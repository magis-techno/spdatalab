# Cursor èŠå¤©è®°å½• - å·¥ä½œåŒº 8b3a795c4925f436fc09da11b26282a6
# æå–æ—¶é—´: 2025-10-15 15:08:16
# æ€»æ¶ˆæ¯æ•°: 280 æ¡
# å¤šæ¨¡æ€ç›¸å…³: 21 æ¡
================================================================================

[1] [Unknown Time]
è¾“å…¥æˆ‘å¸Œæœ›æ˜¯ä¸€ä¸ªgeojsonï¼ˆé‡Œé¢æ”¾çš„æ˜¯queryçš„polygonï¼‰ï¼›å¦å¤–ä¸€å®šè¦ä¿éšœæ•ˆç‡ï¼Œä¸è¦é€polygonè¿›è¡ŒæŸ¥è¯¢ã€‚
================================================================================

[2] [Unknown Time]
å¼€å§‹å¼€å‘å§ã€‚è¾“å‡ºgeojsonæˆ‘è§‰å¾—ä¸éœ€è¦ã€‚ æ•´ä½“åŠŸèƒ½ä¿æŒç®€æ´
================================================================================

[3] [Unknown Time]
æœ‰ä»¥ä¸‹çš„æŠ¥é”™ï¼Œæˆ‘æœ‰å‡ ä¸ªæ€€ç–‘ï¼Œæ˜¯ä¸æ˜¯è¿æ¥æ•°æ®åº“çš„æ–¹æ³•æœ‰é—®é¢˜ï¼Ÿèƒ½å¦å‚ç…§ä»¥ä¸‹å…¶ä»–å‡ ä¸ªæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿå¦å¤–æŠ¥é”™é‡Œé¢å‡ºç°äº†ä¸€äº›ä¹±ç ï¼šæŸ¥è¯¢æŠ¥é”™ï¼š2025-07-21 02:44:25,657 - __main__ - INFO - å¤„ç†æ‰¹æ¬¡ 1/1: 15 ä¸ªpolygon
2025-07-21 02:44:25,730 - __main__ - ERROR - ä»ä¸´æ—¶è¡¨è·å–polygonæ•°æ®å¤±è´¥: (psycopg.errors.UndefinedTable) relation "temp_polygons_1753065865657" does not exist
LINE 3:                     FROM temp_polygons_1753065865657
                                 ^
[SQL: 
                    SELECT polygon_id, ST_AsText(polygon_geom) as polygon_wkt, polygon_area
                    FROM temp_polygons_1753065865657
                    ORDER BY polygon_id
                ]
(Background on this error at: https://sqlalche.me/e/20/f405)
{"code":400,"message":"ï¿½Í»ï¿½ï¿½Ë²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½"}
{"code":400,"message":"ï¿½Í»ï¿½ï¿½Ë²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½"}
{"code":400,"message":"ï¿½Í»ï¿½ï¿½Ë²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½"}
2025-07-21 02:44:28,460 - __main__ - ERROR - æ‰¹é‡æŸ¥è¯¢roadså¤±è´¥: Connection Failed
2025-07-21 02:44:28,477 - __main__ - INFO - roadsæŸ¥è¯¢æ— ç»“æœ
================================================================================

[4] [Unknown Time]
è¿˜æ˜¯ä¸å¯¹ã€‚é¦–å…ˆschemaçš„åœ°æ–¹ï¼ŒæŠŠ_gy1å»æ‰å°±å®Œå…¨æ²¡æœ‰å¿…è¦ã€‚è¿™ä¸ªæ•°æ®åº“çš„æƒé™é…ç½®ï¼Œä¸¥æ ¼å‚è€ƒtrajectory_road_analysiså°±å¯ä»¥äº†ã€‚
================================================================================

[5] [Unknown Time]
ERROR - æ‰¹é‡æŸ¥è¯¢intersectionså¤±è´¥: dn_6005_6006: ST_Intersects: Operation on mixed SRID geometries (Polygon, 4326) != (Polygon, 0)
================================================================================

[6] [Unknown Time]
2025-07-21 07:10:46,537 - __main__ - INFO - åˆå¹¶lanesç»“æœ: 175 æ¡è®°å½•
2025-07-21 07:10:46,537 - __main__ - INFO - ä¿å­˜åˆ†æç»“æœåˆ°æ•°æ®åº“
2025-07-21 07:10:46,562 - __main__ - ERROR - æ‰¹é‡polygonåˆ†æå¤±è´¥: (psycopg.errors.InvalidParameterValue) Geometry has Z dimension but column does not
================================================================================

[7] [Unknown Time]
2025-07-21 07:10:46,537 - __main__ - INFO - åˆå¹¶lanesç»“æœ: 175 æ¡è®°å½•
2025-07-21 07:10:46,537 - __main__ - INFO - ä¿å­˜åˆ†æç»“æœåˆ°æ•°æ®åº“
2025-07-21 07:10:46,562 - __main__ - ERROR - æ‰¹é‡polygonåˆ†æå¤±è´¥: (psycopg.errors.InvalidParameterValue) Geometry has Z dimension but column does notï¼› æŸ¥è¯¢ç»“æœæ˜¯ä¸æ˜¯æŒ‰ç…§3då­˜æ¯”è¾ƒå¥½ï¼Ÿ
================================================================================

[8] [Unknown Time]
æŠ¥é”™ï¼š2025-07-21 07:17:15,895 - __main__ - INFO - ä¿å­˜roadsç»“æœ: 63 æ¡è®°å½•
2025-07-21 07:17:15,899 - __main__ - ERROR - æ‰¹é‡polygonåˆ†æå¤±è´¥: (psycopg.errors.InvalidParameterValue) Geometry type (Polygon) does not match column type (Point)
[SQL: 
            INSERT INTO polygon_intersections 
            (analysis_id, polygon_id, intersection_id, intersection_type, intersection_level, geometry)
            VALUES (
                %(analysis_id)s, %(polygon_id)s, %(intersection_id)s, %(intersection_type)s, %(intersection_level)s,
                ST_Force3D(ST_SetSRID(ST_GeomFromText(%(intersection_geom)s), 4326))
            )
        ]
[parameters: {'analysis_id': 'polygon-lane-road-20250721_analysis', 'polygon_id': 'polygon_0', 'intersection_id': 4340744949137409, 'intersection_type': 1, 'intersection_level': 1, 'intersection_geom': 'POLYGON Z ((121.4410159925 31.2552798339 0,121.4412184993 31.2553233994 0,121.441214476 31.2554070911 0,121.4411930183 31.2554529495 0,121.4408979753 31.255591671 0,121.44085506 31.2554976614 0,121.4408510366 31.255439192 0,121.4408805409 31.255337157 0,121.4410159925 31.2552798339 0))'}]
================================================================================

[9] [Unknown Time]
æŠ¥é”™ï¼š2025-07-21 07:17:15,895 - __main__ - INFO - ä¿å­˜roadsç»“æœ: 63 æ¡è®°å½•
2025-07-21 07:17:15,899 - __main__ - ERROR - æ‰¹é‡polygonåˆ†æå¤±è´¥: (psycopg.errors.InvalidParameterValue) Geometry type (Polygon) does not match column type (Point)
[SQL: 
            INSERT INTO polygon_intersections 
            (analysis_id, polygon_id, intersection_id, intersection_type, intersection_level, geometry)
            VALUES (
                %(analysis_id)s, %(polygon_id)s, %(intersection_id)s, %(intersection_type)s, %(intersection_level)s,
                ST_Force3D(ST_SetSRID(ST_GeomFromText(%(intersection_geom)s), 4326))
            )
        ]
[parameters: {'analysis_id': 'polygon-lane-road-20250721_analysis', 'polygon_id': 'polygon_0', 'intersection_id': 4340744949137409, 'intersection_type': 1, 'intersection_level': 1, 'intersection_geom': 'POLYGON Z ((121.4410159925 31.2552798339 0,121.4412184993 31.2553233994 0,121.441214476 31.2554070911 0,121.4411930183 31.2554529495 0,121.4408979753 31.255591671 0,121.44085506 31.2554976614 0,121.4408510366 31.255439192 0,121.4408805409 31.255337157 0,121.4410159925 31.2552798339 0))'}]ï¼› æˆ‘è§‰å¾—intersectionæ˜¯polygonï¼Œroadå’Œlaneæ˜¯linestringã€‚å¦å¤–è¯¥ä¿ç•™zå°±ä¿ç•™zã€‚
================================================================================

[10] [Unknown Time]
æŠ¥é”™ï¼š2025-07-21 07:17:15,895 - __main__ - INFO - ä¿å­˜roadsç»“æœ: 63 æ¡è®°å½•
2025-07-21 07:17:15,899 - __main__ - ERROR - æ‰¹é‡polygonåˆ†æå¤±è´¥: (psycopg.errors.InvalidParameterValue) Geometry type (Polygon) does not match column type (Point)
[SQL: 
            INSERT INTO polygon_intersections 
            (analysis_id, polygon_id, intersection_id, intersection_type, intersection_level, geometry)
            VALUES (
                %(analysis_id)s, %(polygon_id)s, %(intersection_id)s, %(intersection_type)s, %(intersection_level)s,
                ST_Force3D(ST_SetSRID(ST_GeomFromText(%(intersection_geom)s), 4326))
            )
        ]
[parameters: {'analysis_id': 'polygon-lane-road-20250721_analysis', 'polygon_id': 'polygon_0', 'intersection_id': 4340744949137409, 'intersection_type': 1, 'intersection_level': 1, 'intersection_geom': 'POLYGON Z ((121.4410159925 31.2552798339 0,121.4412184993 31.2553233994 0,121.441214476 31.2554070911 0,121.4411930183 31.2554529495 0,121.4408979753 31.255591671 0,121.44085506 31.2554976614 0,121.4408510366 31.255439192 0,121.4408805409 31.255337157 0,121.4410159925 31.2552798339 0))'}]ï¼› æˆ‘è§‰å¾—intersectionæ˜¯polygonï¼Œroadå’Œlaneæ˜¯linestringã€‚å¦å¤–è¯¥ä¿ç•™zå°±ä¿ç•™zï¼ˆè¿™é‡Œæ˜¯å¦æœ‰å¯èƒ½çœ‹ä¸€ä¸‹æŸ¥è¯¢çš„æ•°æ®åº“æ˜¯å•¥ï¼Œå°±å­˜å•¥ï¼Ÿæˆ‘è§‰å¾—force3Dä¹Ÿä¸æ˜¯å¾ˆåˆé€‚ï¼‰ã€‚
================================================================================

[11] [Unknown Time]
æŠ¥é”™ï¼š2025-07-21 07:17:15,895 - __main__ - INFO - ä¿å­˜roadsç»“æœ: 63 æ¡è®°å½•
2025-07-21 07:17:15,899 - __main__ - ERROR - æ‰¹é‡polygonåˆ†æå¤±è´¥: (psycopg.errors.InvalidParameterValue) Geometry type (Polygon) does not match column type (Point)
[SQL: 
            INSERT INTO polygon_intersections 
            (analysis_id, polygon_id, intersection_id, intersection_type, intersection_level, geometry)
            VALUES (
                %(analysis_id)s, %(polygon_id)s, %(intersection_id)s, %(intersection_type)s, %(intersection_level)s,
                ST_Force3D(ST_SetSRID(ST_GeomFromText(%(intersection_geom)s), 4326))
            )
        ]
[parameters: {'analysis_id': 'polygon-lane-road-20250721_analysis', 'polygon_id': 'polygon_0', 'intersection_id': 4340744949137409, 'intersection_type': 1, 'intersection_level': 1, 'intersection_geom': 'POLYGON Z ((121.4410159925 31.2552798339 0,121.4412184993 31.2553233994 0,121.441214476 31.2554070911 0,121.4411930183 31.2554529495 0,121.4408979753 31.255591671 0,121.44085506 31.2554976614 0,121.4408510366 31.255439192 0,121.4408805409 31.255337157 0,121.4410159925 31.2552798339 0))'}]ï¼› æˆ‘è§‰å¾—intersectionæ˜¯polygonï¼Œroadå’Œlaneæ˜¯linestringã€‚å¦å¤–è¯¥ä¿ç•™zå°±ä¿ç•™zï¼ˆè¿™é‡Œæ˜¯å¦æœ‰å¯èƒ½çœ‹ä¸€ä¸‹æŸ¥è¯¢çš„æ•°æ®åº“æ˜¯å•¥ï¼Œå°±å­˜å•¥ï¼Ÿæˆ‘è§‰å¾—force3Dä¹Ÿä¸æ˜¯å¾ˆåˆé€‚ï¼‰ã€‚è¿˜æœ‰ä¸€ä¸ªï¼Œæˆ‘å¸Œæœ›å¯ä»¥ä¿ç•™åŸæ¥æ•°æ®è¡¨ï¼ˆrcdatalake_gy1ä¸­çš„ï¼‰é‡Œé¢çš„å­—æ®µå†…å®¹
================================================================================

[12] [Unknown Time]
æˆ‘è¦ä¿®æ”¹ä¸€äº›éœ€æ±‚ï¼Œåªä¿ç•™roadã€intersectionã€‚å…·ä½“çš„å­—æ®µä¹Ÿè¦åšä¸€ä¸‹åŠ å·¥ï¼Œéœ€æ±‚å¦‚ä¸‹ï¼šæˆ‘æƒ³ä¿ç•™full_roadçš„å­—æ®µï¼ŒåŒæ—¶å¢åŠ is_in_intersection, is_out_intersection, is_in_intersection3ä¸ªbooleanï¼Œè¿™ä¸ªå€¼æ˜¯æ ¹æ®id+patchid_releaseversion
åˆ†åˆ«åœ¨full_intersectiongoinroadã€full_intersectiongooutroadã€full_roadintersectionä¸­å”¯ä¸€ç¡®è®¤ï¼Œå¦‚æœæœ‰åˆ™ä¸ºtrueï¼Œå¦åˆ™falseï¼›å…·ä½“çš„æ ·ä¾‹å¦‚ä¸‹

full_intersectiongoinroadã€full_intersectiongooutroad:
  {
    "id": 4472679466143015,
    "cityid": "A362",
    "patchid": "2927359078724301",
    "patchversion": "1722825076761",
    "releaseversion": "85497724",
    "citypatchversion": "A362.2.2.0.3.M2",
    "geojsonpath": "obs://delta/NCA-SD-ADS/data-prod/temp/A362/2927359078724301/1722825076761/85497724/",
    "intersectionid": 4472667017642005,
    "roadid": 4472677889278826,
    "dk_timestamp": "2025-05-09 17:36:21.046",
    "datalaketimestamp": "2025-05-09 17:36:21.046000 +00:00"
  },


full_roadintersection
  {
    "id": 4605344395298565,
    "cityid": "A193",
    "patchid": "2855688021220093",
    "patchversion": "1722699149925",
    "releaseversion": "90875988",
    "citypatchversion": "A193.2.3.0.0.M17",
    "geojsonpath": "obs://delta/NCA-SD-ADS/data-prod/temp/A193/2855688021220093/1722699149925/90875988/",
    "intersectionid": 4605313996106930,
    "roadid": 4605339060207860,
    "dk_timestamp": "2025-05-09 17:03:19.235",
    "datalaketimestamp": "2025-05-09 17:03:19.235000 +00:00"
  },

full_road
{
    "id": 4497405190144046,
    "cityid": "A92",
    "patchid": "2855575881585803",
    "patchversion": "1694538357402",
    "releaseversion": "85486860",
    "citypatchversion": "A92.2.4.1.1.M1",
    "length": 5923,
    "roadtype": 0,
    "isbothway": 0,
    "roadclass": 0,
    "roadclasssource": 0,
    "roadtypesource": 0,
    "turninfo": "0",
    "turntype": 2,
    "turntypesource": 4,
    "roadflag": 114,
    "roadflagsource": 8,
    "wkb_geometry": "01020000A0E61000000400000099EC23E045065E405CFDF4796E4E3D400000000000000000E8A6AC2A44065E4083F5E7F1674E3D40000000000000000055D3AC6E40065E404FC82C4D5A4E3D400000000000000000A18EC90D3F065E40F8F37AEB544E3D400000000000000000",
  },

full_intersection:
  {
    "id": 4175406627405013,
    "cityid": "A306",
    "patchid": "2855669599140034",
    "patchversion": "1694540472456",
    "releaseversion": "70825068",
    "citypatchversion": "A306.2.3.0.2.M14",
    "intersectiontype": 1,
    "intersectionsubtype": 4,
    "source": 8,
    "wkb_geometry": ç•¥
  },ï¼› å…ˆä¸ç”¨ç»™ä»£ç ï¼Œç»™ä¸€ä¸‹æ–¹æ¡ˆ
================================================================================

[13] [Unknown Time]
æˆ‘é—®ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯å…ˆæ˜¯ç©ºé—´æŸ¥è¯¢ï¼Œæ ¹æ®æŸ¥è¯¢åçš„ç»“æœæ‰ä¼šjoinå…¶ä»–è¡¨ï¼Ÿæˆ‘æ‹…å¿ƒç›´æ¥joinä¼šå¾ˆæ…¢ã€‚ å¦å¤–roadå’Œintersectionçš„å‡ ä½•ç±»å‹å’ŒåŸæ¥æŸ¥è¯¢çš„è¡¨ä¿æŒä¸€è‡´ã€‚ä¸ç”¨å†™ä»£ç ï¼Œè®²ä¸€ä¸‹æ–¹æ¡ˆ
================================================================================

[14] [Unknown Time]
å‡ ä½•ç±»å‹æœ€å¥½æŸ¥ä¸€ä¸‹ï¼Œç„¶åå†å»ºè¡¨ã€‚ å¼€å§‹å†™ä»£ç å§
================================================================================

[15] [Unknown Time]
æŒ‰ç…§ä¸Šè¿°æ–¹æ¡ˆå¼€å§‹å†™ä»£ç å§
================================================================================

[16] [Unknown Time]
å‡ ä¸ªåœ°æ–¹æˆ‘æ‰‹æ®µä¿®æ”¹äº†ï¼Œä¸€ä¸ªæ˜¯è¡¨åï¼Œåº”è¯¥ä¸ºfull_roadinintersectionï¼Œ å¦å¤–åˆ›å»ºçš„è¡¨åº”è¯¥éƒ½æ˜¯å«Zçš„ã€‚ è¿è¡Œä¹‹åè¿˜æ˜¯æœ‰æŠ¥é”™ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š2025-07-21 08:11:36,261 - src.spdatalab.fusion.polygon_road_analysis - INFO - æ€»è®¡æŸ¥è¯¢åˆ° 8 æ¡roadè®°å½•
2025-07-21 08:11:36,262 - src.spdatalab.fusion.polygon_road_analysis - INFO - åˆå¹¶roadsç»“æœ: 8 æ¡è®°å½•
2025-07-21 08:11:36,263 - src.spdatalab.fusion.polygon_road_analysis - INFO - åˆå¹¶intersectionsç»“æœ: 4 æ¡è®°å½•
2025-07-21 08:11:36,264 - src.spdatalab.fusion.polygon_road_analysis - INFO - lanesæŸ¥è¯¢æ— ç»“æœ
2025-07-21 08:11:36,264 - src.spdatalab.fusion.polygon_road_analysis - INFO - ä¿å­˜åˆ†æç»“æœåˆ°æ•°æ®åº“
2025-07-21 08:11:36,267 - src.spdatalab.fusion.polygon_road_analysis - ERROR - æ‰¹é‡polygonåˆ†æå¤±è´¥: (psycopg.errors.UndefinedTable) relation "polygon_roads" does not exist
LINE 1: DELETE FROM polygon_roads WHERE analysis_id = $1ï¼› å¦å¤–æˆ‘è¿˜æœ‰ä¸€ä¸ªæƒ³æ”¹çš„æ˜¯ï¼Œè¾“å…¥çš„polygonç›´æ¥æ‰¾æ‰€æœ‰çš„ï¼Œè€Œä¸æ˜¯é€polygonå»æŸ¥æ‰¾ã€‚
================================================================================

[17] [Unknown Time]
æŠ¥é”™ï¼Œrelation "polygon_roads","polygon_intersections"ä¸å­˜åœ¨
================================================================================

[18] [Unknown Time] *** å¤šæ¨¡æ€ ***
è¿™ä¸ªæ–‡ä»¶æ˜¯åŸºäºæä¾›çš„polygonè¿›è¡ŒæŸ¥è¯¢ã€‚æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¸Šæ¸¸ç”Ÿäº§çš„æ–¹æ³•ã€‚å¤šæ¨¡æ€æ£€ç´¢ï¼Œæ”¯æŒè¾“å…¥æ–‡æœ¬/å›¾ç‰‡ï¼Œç„¶åæŸ¥è¯¢å‡ºé‚»è¿‘çš„æ•°æ®é›†ï¼ˆdataset_nameï¼‰+å›¾ç‰‡çš„timestampã€‚æˆ‘å¯ä»¥æ ¹æ®è¿™ä¸ªä¿¡æ¯æŸ¥è¯¢åˆ°è½¨è¿¹æ•°æ®ï¼Œç„¶åå¯¹è½¨è¿¹è¿›è¡Œæ‰©å±•ï¼Œä½œä¸ºpolygonï¼Œç„¶åå°±å¯ä»¥å¤ç”¨å½“å‰è¿™ä¸ªå‡½æ•°ã€‚å¤šæ¨¡æ€çš„æŸ¥è¯¢æ¥å£å¦‚ä¸‹ã€‚ ä¸éœ€è¦ä½ å†™ä»£ç ï¼Œä½ å…ˆåˆ†ææˆ‘çš„éœ€æ±‚ï¼Œå¹¶æä¾›æ–¹æ¡ˆï¼šurlï¼šhttps://driveinsight-api.ias.huawei.com/xmodalitys
headerï¼š
å‚è€ƒringå¹³å°æœºæœºæ¥å£æ‰€éœ€header
Deepdata-Project:{ringä¸Šæœ‰æƒé™çš„project}
Deepdata-Platform:xmodalitys-external
Deepdata-Region:RaD-prod
Entrypoint-Version:v2
Content-Type:application/json
Authorization: Bearer {ring-apikey}
Username: å·¥å·
ä»¥æ–‡/å›¾æœå›¾
POSTï¼š /retrieve
çº¦æŸï¼šå•æ¬¡æŸ¥è¯¢countä¸Šé™ä¸º1wï¼›åŒä¸€æ¡ä»¶ä¸‹ï¼Œå¤šæ¬¡æŸ¥è¯¢æ€»å…±æœ€å¤šåªæ”¯æŒæŸ¥å‡º10wæ¡æ•°æ®ï¼›å½“å‰ä»…æ”¯æŒæŒ‰å•æ–‡æœ¬æˆ–æŒ‰å¤šå¼ å›¾ç‰‡æœç´¢
å½“å‰ç›¸æœºå¯¹åº”è¡¨åï¼š
ddi_collection_camera_encoded_{1ã€2ã€8ã€9ã€10ã€11ã€12}

{
      "text": "bicycle",  # æœç´¢æ–‡æœ¬
      "images": ["xxx"],  # å›¾ç‰‡base64ç¼–ç åçš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åŒæ—¶æœç´¢å¤šå¼ å›¾ç‰‡
      "collection": "ddi_collection_camera_encoded_1",  # æœç´¢è¡¨å
      "camera": "camera_{1\2\3}", ç›¸æœº
      "start": 0, # é»˜è®¤ä¸º0
      "count": 5,  # æœ€å¤šè¿”å›æ•°
      "modality": 2, # æœç´¢æ¨¡æ€ï¼Œ1è¡¨ç¤ºæ–‡æœ¬ï¼Œ2è¡¨ç¤ºå›¾ç‰‡ï¼Œé»˜è®¤ä¸º2
      "start_time": 1234567891011, # äº‹ä»¶å¼€å§‹æ—¶é—´ï¼Œ13ä½æ—¶é—´æˆ³
      "end_time": 1234567891011 # äº‹ä»¶ç»“æŸæ—¶é—´ï¼Œ13ä½æ—¶é—´æˆ³
  }
â€‹
image
"200": OK

{
  	"error": null,
     "prompt": "bicycle", # textè¾“å…¥ï¼Œæœç´¢imagesæ—¶ä¸ºç©º
  	"english_prompt": "bicycle", # textè¾“å…¥å¦‚æœæ˜¯ä¸­æ–‡ï¼Œè¿™é‡Œä¼šç¿»è¯‘æˆè‹±æ–‡
  	"result": {
  		"hits": [
  			{
  				"entity": {
  					"uuid": "6f0266e3-732d-5102-8945-8fa7daafc4ff",
  					"metadata": {
  						"l2norm": 1
  					},
  					"dataloader_name": "RosbagDataLoader",
  					"model_name": "ViT-H-14-378-quickgelu",
  					"model_revision": "default",
  					"task": "image embedding",
  					"dataset_name": "d934a91780f14e6fb3a5b01d5fbbb412_330034_2025/02/19/17:56:09-17:57:09",
  					"dataset_type": "ros",
  					"dataset_path": "obs://replayresult-general-wulan/ddi-transform/330034/2025/02/19/93bae83a6fad46ad9fc9eadb2280181b",
  					"dataset_timestamp": 1739958971349,
  					"dataset_bag": "camera_encoded_2",
  					"img_path": "obs://ais-upload/xmodalitys_img/93bae83a6fad46ad9fc9eadb2280181b/camera_encoded_2/1739958971349.jpg",
  					"vector": [
  						-0.014258896932005882
  					], # å‘é‡å€¼ï¼Œä¸€èˆ¬ä¸º1024ç»´
  					"modality": 2,
  					"deleted": false,
  					"create_time": 1739984709417,
  					"update_time": 1739984709417
  				},
  				"id": "6f0266e3-732d-5102-8945-8fa7daafc4ff",
  				"distance": 1.3894870281219482,
  				"similarity": 0.3052564859390259
  			}
  		]
  	}
  }
================================================================================

[19] [Unknown Time]
å‡ ä¸ªç±»ä¹‹é—´çš„å…³ç³»æ˜¯å•¥
================================================================================

[20] [Unknown Time]
å¯ä»¥çœ‹ä¸€ä¸‹polygon_trajectory_queryé‡Œé¢å¯ä»¥å¤ç”¨å“ªä¸€äº›ï¼Ÿ ä¸ç”¨å†™ä»£ç ï¼Œæ¢³ç†æ¸…æ¥šå…ˆ
================================================================================

[21] [Unknown Time] *** å¤šæ¨¡æ€ ***
å¯ä»¥å¤ç”¨è¿™ä¹ˆå¤šï¼Œå¤šæ¨¡æ€è½¨è¿¹æ£€ç´¢è¿™ä¸ªçš„å·¥ä½œæµçš„ç±»ä¸Šçš„å…³ç³»å†æ¢³ç†ä¸€æ¬¡ã€‚
================================================================================

[22] [Unknown Time]
è¯·ä½ æŠŠæˆ‘çš„éœ€æ±‚å†™æˆprd mdæ–‡æ¡£ï¼Œæ–¹æ¡ˆä¹Ÿå½¢æˆä¸€ä¸ªmdæ–‡æ¡£ã€‚å¦å¤–éœ€è¦å¼€å‘çš„äº‹é¡¹æºç¨‹todolist mdã€‚æˆ‘è§‰å¾—æ–¹æ¡ˆå’Œtodolistå¯ä»¥åˆå¹¶mdã€‚
================================================================================

[23] [Unknown Time]
å‚æ•°ä¸Šç®€åŒ–ä¸€ä¸‹ï¼Œé€Ÿåº¦è‡ªé€‚åº”ã€å¯†åº¦è‡ªé€‚åº”è¿™äº›éƒ½ä¸éœ€è¦ã€‚æˆ‘è§‰å¾—æ¯”è¾ƒå…³é”®çš„æ˜¯æ—¶é—´çª—ï¼ˆæŸä¸ªæ•°æ®çš„è½¨è¿¹å»æŸ¥è¯¢é‚»è¿‘æ•°æ®ï¼Œæœ‰æ—¶é—´çª—ï¼‰ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ç©ºé—´ä¸Šçš„bufferï¼Œæˆ‘è§‰å¾—ç®€å•æä¸€ä¸ªå°±è¡Œã€‚å®‰å…¨åˆè§„è¿™äº›éƒ½ä¸è€ƒè™‘ï¼Œæˆ–è€…æåº¦ç®€åŒ–
================================================================================

[24] [Unknown Time]
æ—¶é—´çª—é»˜è®¤æ˜¯30å¤©ï¼› bufferæ˜¯10mï¼›
================================================================================

[25] [Unknown Time]
è¿™ä¸ªæˆ‘è§‰å¾—ä¸éœ€è¦åšç”Ÿäº§ä¼˜åŒ–ã€‚è¿™å—å¼±åŒ–ä¸€ä¸‹ï¼Œè¿˜æ˜¯ç ”å‘åŸŸåˆ†æç”¨ï¼›æ ¸å¿ƒè¦æå¾—è½»é‡ä¸€ç‚¹ï¼ŒåŠŸèƒ½å®Œå¤‡ï¼Œä½†æ˜¯è½»é‡ï¼›ç›¸æœºé€‰æ‹©æ ¸å¿ƒå…¶å®æ˜¯ddi_cpllection_camera_encoded_æ§åˆ¶ï¼Œcamera_éœ€è¦å’Œè¿™ä¸ªä¿æŒä¸€è‡´ï¼Œè‡ªåŠ¨æ”¹å°±è¡Œã€‚å•æ¬¡æŸ¥è¯¢countä¸Šé™ä¸º1wï¼›åŒä¸€æ¡ä»¶ä¸‹ï¼Œå¤šæ¬¡æŸ¥è¯¢æ€»å…±æœ€å¤šåªæ”¯æŒæŸ¥å‡º10wæ¡æ•°æ®ã€‚å›¾ç‰‡è¿™ä¸ªé¢„ç•™ï¼Œä½†æ˜¯å¯ä»¥å…ˆä¸å¼€å‘
================================================================================

[26] [Unknown Time] *** å¤šæ¨¡æ€ ***
å¤šæ¨¡æ€æŸ¥è¯¢å‡ºæ¥çš„ç»“æœï¼Œæ˜¯ä¸æ˜¯è¦æŒ‰ç…§dataset_nameåšä¸€äº›èšåˆï¼ŒåŒ…æ‹¬timestampä¸Šçš„èšåˆã€‚æŸ¥è¯¢å‡ºæ¥çš„polygonæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥èšåˆï¼Œå¦‚æœoverlapæ¯”è¾ƒå¤§ï¼Œå¯ä»¥åˆå¹¶ä¸€ä¸‹ã€‚å½“ç„¶è¿™ä¸ªpolygonå’ŒåŸå§‹çš„dataset_nameå’Œå¸§çš„å¯¹åº”è¦ä¿ç•™ã€‚ ç”¨polygonæŸ¥ï¼Œæˆ‘è§‰å¾—å¯ä»¥å…ˆä¸ç”¨å½¢æˆè½¨è¿¹ï¼Œæ˜¯ä¸æ˜¯ä¿ç•™è½¨è¿¹ç‚¹å°±è¡Œ
================================================================================

[27] [Unknown Time]
å‡†å¤‡å¼€å§‹å¼€å‘ï¼Œåœ¨æ­£å¼å¼€å‘å‰ï¼Œä»£ç ä¼šæ”¾åœ¨å“ªä¸ªç›®å½•ï¼Œå…ˆè¯´ä¸€ä¸‹
================================================================================

[28] [Unknown Time] *** å¤šæ¨¡æ€ ***
å¤šæ¨¡æ€è¿™å—é‡æ–°åˆ›ä¸ªç›®å½•
================================================================================

[29] [Unknown Time] *** å¤šæ¨¡æ€ ***
å¤šæ¨¡æ€å°±æ”¾åœ¨fusioné‡Œé¢ï¼Œé‡Œé¢åŸºç¡€çš„æ•°æ®é›†å¤„ç†å¯ä»¥æ”¾åœ¨dataset
================================================================================

[30] [Unknown Time]
å¥½çš„ï¼Œè¯·ä¸¥æ ¼éµå¾ªæˆ‘æä¾›çš„è¿™ä¸¤ä¸ªmarkdownæ–‡ä»¶è¿›è¡Œå¼€å‘ã€‚
================================================================================

[31] [Unknown Time] *** å¤šæ¨¡æ€ ***
æŠ¥é”™å¦‚ä¸‹ã€‚å…ˆä¸è¦æ”¹ä»£ç ï¼š(.venv) magis@magis-ThinkStation-P720:~/liminzhen/1-code/spdatalab$ make up
docker compose -f docker/docker-compose.yml up -d
WARN[0000] /home/magis/liminzhen/1-code/spdatalab/docker/docker-compose.yml: `version` is obsolete 
[+] Running 3/3
 âœ” Container local_pg   Running                                                                                                                                                                                                                                0.0s 
 âœ” Container workspace  Running                                                                                                                                                                                                                                0.0s 
 âœ” Container pgadmin    Started                                                                                                                                                                                                                                0.4s 
(.venv) magis@magis-ThinkStation-P720:~/liminzhen/1-code/spdatalab$ python -m spdatalab.fusion.multimodal_trajectory_retrieval \
>     --text "bicycle crossing intersection" \
>     --collection "ddi_collection_camera_encoded_1" \
>     --output-table "discovered_trajectories"
Traceback (most recent call last):
  File "/usr/lib/python3.10/runpy.py", line 196, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/usr/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/home/magis/liminzhen/1-code/spdatalab/src/spdatalab/fusion/multimodal_trajectory_retrieval.py", line 31, in <module>
    from spdatalab.dataset.multimodal_data_retriever import (
  File "/home/magis/liminzhen/1-code/spdatalab/src/spdatalab/dataset/multimodal_data_retriever.py", line 21, in <module>
    from requests.exceptions import RequestException, TimeoutError
ImportError: cannot import name 'TimeoutError' from 'requests.exceptions' (/home/magis/liminzhen/1-code/spdatalab/.venv/lib/python3.10/site-packages/requests/exceptions.py)
================================================================================

[32] [Unknown Time]
ä¿®å¤å§
================================================================================

[33] [Unknown Time] *** å¤šæ¨¡æ€ ***
å¤šæ¨¡æ€çš„æ¥å£è¦æ”¹ä¸€ä¸‹ï¼Œç›¸å…³çš„valueæˆ‘è§‰å¾—urlæœ€å¥½åœ¨.envé‡Œé¢é…ä¸€ä¸‹ï¼›
================================================================================

[34] [Unknown Time]
.envé‡Œé¢è¦å¡«çš„å¯ä»¥ç»™ä¸€ä¸ªä¾‹å­å—ï¼Ÿï¼Ÿ
================================================================================

[35] [Unknown Time] *** å¤šæ¨¡æ€ ***
å¤šæ¨¡æ€çš„æ¥å£è¦æ”¹ä¸€ä¸‹ï¼Œç›¸å…³çš„valueæˆ‘è§‰å¾—urlæœ€å¥½åœ¨.envé‡Œé¢é…ä¸€ä¸‹ï¼›curl --request POST \
  --url https://driveinsight-api.ias.huawei.com/xmodalitys/retrieve \
  --header 'Accept: */*' \
  --header 'Accept-Encoding: gzip, deflate, br' \
  --header 'Authorization: Bearer xxx' \
  --header 'Content-Type: application/json' \
  --header 'Deepdata-Platform: xmodalitys-external' \
  --header 'Deepdata-Project: driveinsight' \
  --header 'Deepdata-Region: RaD-prod' \
  --header 'Entrypoint-Version: v2' \
  --header 'Host: driveinsight-api.ias.huawei.com' \
  --header 'User-Agent: PostmanRuntime-ApipostRuntime/1.1.0' \
  --header 'username: l00882130' \
  --data '{
    "text": "a",
    "collection": "ddi_collection_camera_encoded_2",
    "camera": "camera_2",
    "start": 0,
    "count": 24
}' 
================================================================================

[36] [Unknown Time]
æˆ‘è§‰å¾—å‚æ•°æœ‰ç‚¹é—®é¢˜ï¼š{
      "text": "bicycle",  # æœç´¢æ–‡æœ¬
      "images": ["xxx"],  # å›¾ç‰‡base64ç¼–ç åçš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åŒæ—¶æœç´¢å¤šå¼ å›¾ç‰‡
      "collection": "ddi_collection_camera_encoded_1",  # æœç´¢è¡¨å
      "camera": "camera_{1\2\3}", ç›¸æœº
      "start": 0, # é»˜è®¤ä¸º0
      "count": 5,  # æœ€å¤šè¿”å›æ•°
      "modality": 2, # æœç´¢æ¨¡æ€ï¼Œ1è¡¨ç¤ºæ–‡æœ¬ï¼Œ2è¡¨ç¤ºå›¾ç‰‡ï¼Œé»˜è®¤ä¸º2
      "start_time": 1234567891011, # äº‹ä»¶å¼€å§‹æ—¶é—´ï¼Œ13ä½æ—¶é—´æˆ³
      "end_time": 1234567891011 # äº‹ä»¶ç»“æŸæ—¶é—´ï¼Œ13ä½æ—¶é—´æˆ³
  }  è¿™é‡Œstart_timeè¿˜æ˜¯æœ‰çš„ï¼Œåªæ˜¯æ˜¯optionalçš„
================================================================================

[37] [Unknown Time]
å¯¹æ•´ä¸ªé¡¹ç›®æœ‰driveinsight  or  "@https://driveinsight-api.ias.huawei.com "ï¼›è¿›è¡Œéšå»ã€‚è¿™ä¸ªåœ°å€æˆ‘å‡†å¤‡åœ¨.envé‡Œé¢é…ç½®
================================================================================

[38] [Unknown Time] *** å¤šæ¨¡æ€ ***
@env.multimodal.template å¯ä»¥æŠŠå†…å®¹èåˆåˆ°.env.eampleé‡Œé¢å—
================================================================================

[39] [Unknown Time]
æˆ‘å¦‚æœæƒ³.envç”Ÿæ•ˆï¼Œæˆ‘åº”è¯¥è¿™ä¹ˆåšï¼Ÿ æˆ‘å°è¯•source .env ä½†æ˜¯ä»os.environ.get(key)ï¼Œç»“æœè¿˜æ˜¯Noneã€‚ä¸è¦æ”¹ä»£ç ï¼Œè®²æ¸…æ¥šå°±è¡Œ
================================================================================

[40] [Unknown Time]
dotenvåŠ è½½ç¯å¢ƒå˜é‡æ˜¯æˆåŠŸçš„ã€‚ è¯·ä½ çœ‹ä¸€ä¸‹ä»£ç å“ªé‡Œéœ€è¦ä¿®æ”¹ï¼› ä¸è¦å…ˆæ”¹
================================================================================

[41] [Unknown Time] *** å¤šæ¨¡æ€ ***
å¦‚ä½•è§£å†³ï¼š2025-08-25 20:06:31,375 - spdatalab.dataset.multimodal_data_retriever - WARNING - APIè°ƒç”¨å¤±è´¥ï¼ˆç¬¬1æ¬¡ï¼‰ï¼Œ1.0ç§’åé‡è¯•: HTTPSConnectionPool(host='driveinsight-api.ias.huawei.com', port=443): Max retries exceeded with url: /xmodalitys/retrieve (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1007)')))ï¼› å…ˆä¸æ”¹ä»£ç 
================================================================================

[42] [Unknown Time]
åœ¨æˆ‘æµ‹è¯•çš„æœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä¼šæ­£ç¡®é…ç½®urlã€‚æ‰€ä»¥éƒ½æ­£å¸¸åŠ è½½äº†ã€‚ç°åœ¨æˆ‘åœ¨æƒ³å…³é—­SSLçš„éªŒè¯æ¥è§£å†³
================================================================================

[43] [Unknown Time] *** å¤šæ¨¡æ€ ***
å…ˆä¸æ”¹ä»£ç ã€‚å…ˆSSLæŠ¥é”™åº”è¯¥è§£å†³äº†ã€‚ä½†æ˜¯æŠ¥é”™å¦‚ä¸‹ï¼š2025-08-25 20:14:33,552 - spdatalab.dataset.multimodal_data_retriever - INFO - ğŸ” æ‰§è¡Œæ–‡æœ¬æ£€ç´¢: 'bicycle crossing intersection', collection=ddi_collection_camera_encoded_1, camera=camera_1, start=0, count=5
2025-08-25 20:14:33,632 - spdatalab.dataset.multimodal_data_retriever - WARNING - APIè°ƒç”¨å¤±è´¥ï¼ˆç¬¬1æ¬¡ï¼‰ï¼Œ1.0ç§’åé‡è¯•: 400 Client Error: Bad Request for url: https://driveinsight-api.ias.huawei.com/xmodalitys/retrieve
2025-08-25 20:14:34,725 - spdatalab.dataset.multimodal_data_retriever - WARNING - APIè°ƒç”¨å¤±è´¥ï¼ˆç¬¬2æ¬¡ï¼‰ï¼Œ2.0ç§’åé‡è¯•: 400 Client Error: Bad Request for url: https://driveinsight-api.ias.huawei.com/xmodalitys/retrieve
2025-08-25 20:14:36,817 - spdatalab.dataset.multimodal_data_retriever - ERROR - APIè°ƒç”¨å¤±è´¥ï¼Œå·²é‡è¯•3æ¬¡: 400 Client Error: Bad Request for url: https://driveinsight-api.ias.huawei.com/xmodalitys/retrieve
2025-08-25 20:14:36,817 - spdatalab.dataset.multimodal_data_retriever - ERROR - âŒ æ–‡æœ¬æ£€ç´¢å¤±è´¥: 400 Client Error: Bad Request for url: https://driveinsight-api.ias.huawei.com/xmodalitys/retrieve
2025-08-25 20:14:36,818 - spdatalab.fusion.multimodal_trajectory_retrieval - ERROR - âŒ ä¼˜åŒ–å·¥ä½œæµæ‰§è¡Œå¤±è´¥: 400 Client Error: Bad Request for url: https://driveinsight-api.ias.huawei.com/xmodalitys/retrieve
2025-08-25 20:14:36,819 - spdatalab.fusion.multimodal_cli - INFO - âœ… æŸ¥è¯¢å®Œæˆï¼Œè€—æ—¶: 3.27 ç§’
2025-08-25 20:14:36,820 - spdatalab.fusion.multimodal_cli - ERROR - âŒ æŸ¥è¯¢å¤±è´¥: 400 Client Error: Bad Request for url: https://driveinsight-api.ias.huawei.com/xmodalitys/retrieve
2025-08-25 20:14:36,820 - spdatalab.fusion.multimodal_cli - ERROR - âŒ å¤šæ¨¡æ€è½¨è¿¹æ£€ç´¢å¤±è´¥ï¼
================================================================================

[44] [Unknown Time]
æŒ‰ç…§æ–¹æ¡ˆ2æ”¹ä¸€ä¸‹
================================================================================

[45] [Unknown Time] *** å¤šæ¨¡æ€ ***
æˆ‘åœ¨è¿™ä¸ªä½ç½®æ‰“å°responseï¼Œå‘ç°æ˜¯æœ‰è¿”å›çš„ã€‚ä½†æ˜¯æœ€ç»ˆä¼šå‡ºç°å¤šæ¨¡æ€æ£€ç´¢æœªè¿”å›ä»»ä½•ç»“æœï¼Œè¯·å°è¯•è°ƒæ•´æŸ¥è¯¢æ¡ä»¶ï¼›æˆ‘çœ‹äº†responseä¿¡æ¯å¦‚ä¸‹ï¼šresponseå¯ä»¥æ­£ç¡®è¿”å›ï¼Œä½†æ˜¯æ²¡æœ‰è¢«æ­£ç¡®è§£æï¼šå“åº”å†…å®¹: {"error":null,"prompt":"bicycle crossing intersection","english_prompt":"","result":{"hits":[{"entity":{"uuid":"2d7205a5-82b8-513c-a339-3b0fe455c6c2","metadata":{"l2norm":0.9999998807907104},"task":"ImageEmbedding","ads_version":"","dataset_name":"4842d7b30f9e49c99584a220709caaf5_130154_2025/05/29/16:31:23-16:31:53","dataset_type":"ddi","dataset_path":"obs://yw-replayresult-gy1/ddi-transform/2025/05/30/130154/DI20250529163143D2891845046","dataset_bag":"camera_encoded_1","modality":2,"deleted":false,"create_time":1751749865233,"update_time":1751749865233,"dataloader_name":"RosbagDataLoader","model_name":"ViT-H-14-378-quickgelu","model_revision":"default","dataset_timestamp":1748507506699,"img_path":"obs://yw-xmodalitys-gy1/xmodalitys_img/DI20250529163143D2891845046/camera_encoded_1/1748507506699.jpg","vector":[]},"id":"2d7205a5-82b8-513c-a339-3b0fe455c6c2","distance":1.2192653,"similarity":0.39036727732611626}]}}
================================================================================

[46] [Unknown Time]
æˆ‘çœ‹åˆ°æŸ¥åˆ°äº†5ä¸ªæ•°æ®é›†ï¼Œåˆå¹¶æˆäº†ä¸€ä¸ªpolygonã€‚æˆ‘æƒ³åœ¨verboseæ¨¡å¼ä¸‹ä¿¡æ¯æ›´åŠ è¯¦ç»†ä¸€äº›ï¼Œæ¯”å¦‚æ•°æ®é›†åï¼›å¦å¤–æˆ‘çœ‹ç»“æœä¿ç•™åˆ°æ•°æ®åº“è¡¨ discovered_trajectoriesï¼Œä½†æ˜¯æ²¡æ‰¾åˆ°
================================================================================

[47] [Unknown Time]
æŠ¥é”™ï¼šæ•°æ®åº“ä¿å­˜å¤±è´¥ï¼šname'discovered_trajectories' is not defined
================================================================================

[48] [Unknown Time] *** å¤šæ¨¡æ€ ***
æŠ¥é”™å¦‚ä¸‹ï¼š2025-08-26 09:55:33,433 - spdatalab.fusion.multimodal_trajectory_retrieval - ERROR - âŒ åˆ›å»ºè¡¨å¤±è´¥: syntax error at or near "FROM"
LINE 3:                         SELECT FROM information_schema.table...
                                       ^

2025-08-26 09:55:33,617 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ’¾ ä¿å­˜ç¬¬ 1 æ‰¹: 2 æ¡è®°å½•
2025-08-26 09:55:33,694 - spdatalab.fusion.multimodal_trajectory_retrieval - ERROR - âŒ æ•°æ®åº“ä¿å­˜å¤±è´¥: relation "discovered_trajectories" does not exist
LINE 2:                         INSERT INTO discovered_trajectories ...
                                            ^

2025-08-26 09:55:33,694 - spdatalab.fusion.multimodal_trajectory_retrieval - ERROR - âŒ æ•°æ®åº“ä¿å­˜å¤±è´¥: relation "discovered_trajectories" does not exist
LINE 2:                         INSERT INTO discovered_trajectories ...
                                            ^

2025-08-26 09:55:33,695 - spdatalab.fusion.multimodal_cli - INFO - âœ… æŸ¥è¯¢å®Œæˆï¼Œè€—æ—¶: 5.06 ç§’
2025-08-26 09:55:33,695 - spdatalab.fusion.multimodal_cli - ERROR - âŒ æŸ¥è¯¢å¤±è´¥: æœªçŸ¥é”™è¯¯
2025-08-26 09:55:33,695 - spdatalab.fusion.multimodal_cli - ERROR - âŒ å¤šæ¨¡æ€è½¨è¿¹æ£€ç´¢å¤±è´¥ï¼ï¼› å…ˆä¸è¦æ”¹ä»£ç ï¼Œå…ˆç¡®å®šä¸€ä¸‹é”™è¯¯å’Œä¿®æ”¹æ–¹æ¡ˆã€‚å¦å¤–æ•´ä½“å¼€å‘æ–¹æ¡ˆè¿˜æ˜¯è¦ä¸¥æ ¼éµå¾ªmultimodal_data*.mdä¸­çš„å¼€å‘è®¡åˆ’ï¼Œå¼€å‘æ–¹æ¡ˆï¼Œæ¯”å¦‚å……åˆ†å¤ç”¨polygon_trajectory_queryé‡Œé¢çš„åŠŸèƒ½ã€‚
================================================================================

[49] [Unknown Time]
ä¿®æ”¹å§
================================================================================

[50] [Unknown Time]
æ²¡æœ‰è¡¨åˆ›å»ºçš„æŠ¥é”™äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°åˆ›å»ºçš„æ•°æ®è¡¨ã€‚å…ˆä¸æ”¹ä»£ç ï¼Œåˆ†æä¸€ä¸‹
================================================================================

[51] [Unknown Time] *** å¤šæ¨¡æ€ ***
2025-08-26 11:28:06,309 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ”„ Stage 4: è½¬æ¢è½¨è¿¹ä¸ºPolygonå¹¶æ™ºèƒ½åˆå¹¶...
2025-08-26 11:28:06,309 - spdatalab.dataset.multimodal_data_retriever - INFO - ğŸ”„ æ‰¹é‡è½¬æ¢5æ¡è½¨è¿¹ä¸ºPolygon...
2025-08-26 11:28:06,314 - spdatalab.dataset.multimodal_data_retriever - INFO - âœ… æ‰¹é‡è½¬æ¢å®Œæˆ: 5/5 æ¡æˆåŠŸ
2025-08-26 11:28:06,315 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ”„ å¼€å§‹Polygonåˆå¹¶ä¼˜åŒ–: 5ä¸ªåŸå§‹Polygon
2025-08-26 11:28:06,317 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - âœ… Polygonåˆå¹¶å®Œæˆ: 5 â†’ 1 (å‹ç¼©ç‡: 80.0%)
2025-08-26 11:28:06,317 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - âš¡ Stage 5: åŸºäº 1 ä¸ªPolygonæŸ¥è¯¢è½¨è¿¹ç‚¹...
2025-08-26 11:28:06,317 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ”§ è½»é‡åŒ–PolygonæŸ¥è¯¢åŠŸèƒ½å¾…é›†æˆ...
2025-08-26 11:28:06,318 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ’¾ Stage 6: è½»é‡åŒ–ç»“æœè¾“å‡º...
2025-08-26 11:28:06,322 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ’¾ ä¿å­˜ç»“æœåˆ°æ•°æ®åº“è¡¨: discovered_trajectories
2025-08-26 11:28:06,323 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ”„ è½¬æ¢ 2 ä¸ªæ•°æ®é›†çš„è½¨è¿¹ç‚¹ä¸ºæ ‡å‡†æ ¼å¼...
2025-08-26 11:28:06,324 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - âœ… è½¬æ¢å®Œæˆ: 0 æ¡è½¨è¿¹ï¼ŒåŸºäº 2 ä¸ªè½¨è¿¹ç‚¹
2025-08-26 11:28:06,324 - spdatalab.fusion.multimodal_trajectory_retrieval - WARNING - âš ï¸ æ²¡æœ‰è½¨è¿¹æ•°æ®éœ€è¦ä¿å­˜
2025-08-26 11:28:06,324 - spdatalab.fusion.multimodal_cli - INFO - âœ… æŸ¥è¯¢å®Œæˆï¼Œè€—æ—¶: 1.19 ç§’
2025-08-26 11:28:06,324 - spdatalab.fusion.multimodal_cli - ERROR - âŒ æŸ¥è¯¢å¤±è´¥: æœªçŸ¥é”™è¯¯
2025-08-26 11:28:06,325 - spdatalab.fusion.multimodal_cli - ERROR - âŒ å¤šæ¨¡æ€è½¨è¿¹æ£€ç´¢å¤±è´¥ï¼ ---æˆ‘å‘ç°è¿™é‡Œçš„é—®é¢˜æ˜¯1ï¼šè½»é‡åŒ–PolygonæŸ¥è¯¢åŠŸèƒ½å¾…é›†æˆï¼› 2. mockçš„pointç‚¹è½¬æ¢è½¨è¿¹æœ‰é—®é¢˜ï¼› å…ˆä¸æ”¹ä»£ç ï¼Œè®²ä¸€ä¸‹æ€è·¯
================================================================================

[52] [Unknown Time]
æˆ‘è§‰å¾—å¯ä»¥æŒ‰ç…§mdå¼€å‘æ–‡æ¡£é‡Œé¢çš„è®¡åˆ’ï¼Œå¼€å§‹å¼€å‘ä¹‹åçš„åŠŸèƒ½äº†ï¼Œè¿™é‡Œæœ€é«˜ä¼˜çš„æ˜¯æŠŠè¿™ä¸ªè½¨è¿¹æŸ¥è¯¢åŠŸèƒ½å®ç°ï¼›å…ˆä¸å¼€å§‹å†™ï¼Œè®²ä¸€ä¸‹å‡†å¤‡å¼€å‘å“ªäº›åŠŸèƒ½
================================================================================

[53] [Unknown Time]
å¼€å§‹å¹²å§
================================================================================

[54] [Unknown Time]
æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š é—®é¢˜1ï¼Œ è¿è¡ŒåæŠ¥é”™ï¼š2025-08-28 20:26:11,934 - spdatalab.dataset.polygon_trajectory_query - ERROR - åˆ›å»ºè½¨è¿¹è¡¨å¤±è´¥: discovered_trajectories, é”™è¯¯: (psycopg.OperationalError) [Errno -3] Temporary failure in name resolution

================================================================================

[55] [Unknown Time]
è¿è¡Œè¿™ä¸ªå‘½ä»¤ã€‚åœ¨æœ€ç»ˆä¿å­˜è½¨è¿¹æ—¶æŠ¥é”™ï¼š2025-08-28 20:26:11,934 - spdatalab.dataset.polygon_trajectory_query - ERROR - åˆ›å»ºè½¨è¿¹è¡¨å¤±è´¥: discovered_trajectories, é”™è¯¯: (psycopg.OperationalError) [Errno -3] Temporary failure in name resolution
================================================================================

[56] [Unknown Time] *** å¤šæ¨¡æ€ ***
è¿è¡Œè¿™ä¸ªå‘½ä»¤python -m spdatalab.fusion.multimodal_trajectory_retrieval --text 'bicycle crossing intersection' --collection 'ddi_collection_camera_encoded_1' --output-table 'discovered_trajectories' --verboseã€‚åœ¨æœ€ç»ˆä¿å­˜è½¨è¿¹æ—¶æŠ¥é”™ï¼š2025-08-28 20:26:11,934 - spdatalab.dataset.polygon_trajectory_query - ERROR - åˆ›å»ºè½¨è¿¹è¡¨å¤±è´¥: discovered_trajectories, é”™è¯¯: (psycopg.OperationalError) [Errno -3] Temporary failure in name resolution
================================================================================

[57] [Unknown Time]
è¿è¡Œè¯Šæ–­åç»“æœå¦‚ä¸‹ã€‚å…ˆä¸è¦å°è¯•å†™ä»£ç ã€‚å…ˆåˆ†æã€‚æˆ‘è§‰å¾—æ¯”è¾ƒå¥‡æ€ªçš„æ˜¯ï¼Œè¿™ä¸ªlocalpgå·²ç»å¾ˆé•¿æ—¶é—´äº†ï¼Œç†è®ºä¸Šä¸åº”è¯¥æœ‰é—®é¢˜ã€‚æˆ‘è¿˜ä½¿ç”¨navicatè¿æ¥è¿™ä¸ªæ•°æ®åº“ï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®ï¼Œæ¯”è¾ƒæ­£å¸¸ï¼šğŸ¥ spdatalab æ•°æ®åº“è¿æ¥è¯Šæ–­å·¥å…·
==================================================
2025-08-28 20:40:11,305 - INFO - ğŸ” å¼€å§‹æ•°æ®åº“è¿æ¥è¯Šæ–­...
2025-08-28 20:40:11,305 - INFO - ğŸŒ æµ‹è¯•DNSè§£æ: local_pg
2025-08-28 20:40:11,340 - WARNING - âŒ DNSè§£æå¤±è´¥: local_pg - [Errno -3] Temporary failure in name resolution
2025-08-28 20:40:11,340 - INFO - ğŸ³ æ£€æŸ¥Dockerå®¹å™¨çŠ¶æ€...
2025-08-28 20:40:11,377 - INFO - Dockerå®¹å™¨åˆ—è¡¨:
2025-08-28 20:40:11,377 - INFO - NAMES       STATUS                    PORTS
workspace   Up 19 seconds             
local_pg    Up 19 seconds (healthy)   0.0.0.0:5432->5432/tcp, [::]:5432->5432/tcp

2025-08-28 20:40:11,377 - INFO - âœ… å‘ç°PostgreSQLç›¸å…³å®¹å™¨
2025-08-28 20:40:11,378 - INFO - ğŸ”Œ æµ‹è¯•æ•°æ®åº“è¿æ¥...
2025-08-28 20:40:11,378 - INFO - ğŸ”„ æµ‹è¯•åŸå§‹è¿æ¥(local_pg): postgresql+psycopg://postgres:postgres@local_pg:5432/postgres
2025-08-28 20:40:11,494 - WARNING - âŒ åŸå§‹è¿æ¥(local_pg)å¤±è´¥: (psycopg.OperationalError) [Errno -3] Temporary failure in name resolution
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-28 20:40:11,494 - INFO - ğŸ”„ æµ‹è¯•localhostè¿æ¥: postgresql+psycopg://postgres:postgres@localhost:5432/postgres
2025-08-28 20:40:11,528 - INFO - âœ… localhostè¿æ¥æˆåŠŸ
2025-08-28 20:40:11,528 - INFO -    PostgreSQLç‰ˆæœ¬: PostgreSQL 16.4 (Debian 16.4-1.pgdg110+2) on x86_6...
2025-08-28 20:40:11,528 - INFO - ğŸ”„ æµ‹è¯•127.0.0.1è¿æ¥: postgresql+psycopg://postgres:postgres@127.0.0.1:5432/postgres
2025-08-28 20:40:11,556 - INFO - âœ… 127.0.0.1è¿æ¥æˆåŠŸ
2025-08-28 20:40:11,557 - INFO -    PostgreSQLç‰ˆæœ¬: PostgreSQL 16.4 (Debian 16.4-1.pgdg110+2) on x86_6...
2025-08-28 20:40:11,557 - INFO - ğŸ” åˆ†ææµ‹è¯•ç»“æœ...
2025-08-28 20:40:11,557 - INFO - ğŸ’¡ æ¨èä½¿ç”¨localhostè¿æ¥
2025-08-28 20:40:11,557 - INFO - 
============================================================
2025-08-28 20:40:11,557 - INFO - ğŸ“‹ æ•°æ®åº“è¿æ¥è¯Šæ–­æŠ¥å‘Š
2025-08-28 20:40:11,557 - INFO - ============================================================
2025-08-28 20:40:11,557 - INFO - 
ğŸ” æµ‹è¯•ç»“æœæ¦‚è¿°:
2025-08-28 20:40:11,557 - INFO -    DNSè§£æ(local_pg): âŒ
2025-08-28 20:40:11,558 - INFO -    åŸå§‹è¿æ¥(local_pg): âŒ
2025-08-28 20:40:11,558 - INFO -    localhostè¿æ¥: âœ…
2025-08-28 20:40:11,558 - INFO -    127.0.0.1è¿æ¥: âœ…
2025-08-28 20:40:11,558 - INFO -    Dockerå®¹å™¨è¿è¡Œ: âœ…
2025-08-28 20:40:11,558 - INFO - 
ğŸ’¡ æ¨èæ–¹æ¡ˆ: localhost
2025-08-28 20:40:11,558 - INFO - 
ğŸ› ï¸ ä¿®å¤å»ºè®®:
2025-08-28 20:40:11,558 - INFO -    1. ä¿®æ”¹æ•°æ®åº“é…ç½®æ–‡ä»¶ä¸­çš„è¿æ¥å­—ç¬¦ä¸²
2025-08-28 20:40:11,558 - INFO -    2. å°† 'local_pg' æ›¿æ¢ä¸º 'localhost'
2025-08-28 20:40:11,558 - INFO -    3. è¿è¡Œä¿®å¤è„šæœ¬: python fix_database_config.py
2025-08-28 20:40:11,558 - INFO - âœ… å·²åˆ›å»ºæ•°æ®åº“é…ç½®ä¿®å¤è„šæœ¬: fix_database_config.py
================================================================================

[58] [Unknown Time] *** å¤šæ¨¡æ€ ***
@multimodal_data_retriever.py è§£å†³äº†ï¼Œæˆ‘è¿›å…¥workspaceçš„å®¹å™¨åï¼Œå¾ˆå¤šç¯å¢ƒé—®é¢˜ä¼¼ä¹è§£å†³äº†ï¼Œæœ‰æ–°çš„æŠ¥é”™ï¼šERROR - ä¿å­˜è½¨è¿¹æ•°æ®å¤±è´¥: column "query_type" of relation "discovered_trajectories" does not exist
================================================================================

[59] [Unknown Time] *** å¤šæ¨¡æ€ ***
é”™è¯¯åˆ é™¤äº†ä¸€ä¸ªæ–‡ä»¶ï¼šsrc/spdatalab/fusion/multimodal_trajectory_retrieval.pyï¼› å‘½ä»¤è¡Œæ—¥å¿—å¦‚ä¸‹ï¼šPS D:\Worksapce\code\spdatalab> git add .
PS D:\Worksapce\code\spdatalab> git commit -m "update"
[main 0161c51] update
 49 files changed, 344 insertions(+), 10815 deletions(-)
 delete mode 100644 EVENT_ID_TYPE_FIX.md
 delete mode 100644 NEW_FIELDS_FEATURES.md
 delete mode 100644 database_connection_diagnostic.py
 delete mode 100644 database_setup_troubleshooting_guide.md
 delete mode 100644 debug_polygon_query.py
 delete mode 100644 debug_table_creation.py
 delete mode 100644 debug_toll_station.py
 delete mode 100644 debug_trajectory_events.py
 delete mode 100644 debug_trajectory_sql.py
 delete mode 100644 demo_parallel_commands.py
 delete mode 100644 demo_sprint2_commands.py
 delete mode 100644 fix_database_config.py
 create mode 100644 fix_multimodal_table_structure.py
 delete mode 100644 fix_toll_station_tables.py
 delete mode 100644 geopandas_fix.py
 delete mode 100644 improve_table_filtering.py
 delete mode 100644 performance_benchmark.py
 delete mode 100644 performance_fix.py
 delete mode 100644 src/spdatalab/fusion/multimodal_trajectory_retrieval.pyï¼› æ€ä¹ˆå¤„ç†
================================================================================

[60] [Unknown Time] *** å¤šæ¨¡æ€ ***
2025-08-28 13:05:25,582 - spdatalab.dataset.polygon_trajectory_query - INFO - åˆ›å»ºé«˜æ€§èƒ½è½¨è¿¹è¡¨: discovered_trajectories
2025-08-28 13:05:25,669 - spdatalab.dataset.polygon_trajectory_query - INFO - âœ… è½¨è¿¹è¡¨åˆ›å»ºæˆåŠŸ: discovered_trajectories
2025-08-28 13:05:25,669 - spdatalab.dataset.polygon_trajectory_query - INFO - ä¿å­˜ç¬¬ 1 æ‰¹: 560 æ¡è½¨è¿¹
2025-08-28 13:05:25,832 - spdatalab.dataset.polygon_trajectory_query - ERROR - ä¿å­˜è½¨è¿¹æ•°æ®å¤±è´¥: column "query_type" of relation "discovered_trajectories" does not exist
2025-08-28 13:05:25,833 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - âœ… æ•°æ®åº“ä¿å­˜æˆåŠŸ: 0 æ¡è½¨è¿¹
================================================================================

[61] [Unknown Time] *** å¤šæ¨¡æ€ ***
2025-08-28 13:05:25,582 - spdatalab.dataset.polygon_trajectory_query - INFO - åˆ›å»ºé«˜æ€§èƒ½è½¨è¿¹è¡¨: discovered_trajectories
2025-08-28 13:05:25,669 - spdatalab.dataset.polygon_trajectory_query - INFO - âœ… è½¨è¿¹è¡¨åˆ›å»ºæˆåŠŸ: discovered_trajectories
2025-08-28 13:05:25,669 - spdatalab.dataset.polygon_trajectory_query - INFO - ä¿å­˜ç¬¬ 1 æ‰¹: 560 æ¡è½¨è¿¹
2025-08-28 13:05:25,832 - spdatalab.dataset.polygon_trajectory_query - ERROR - ä¿å­˜è½¨è¿¹æ•°æ®å¤±è´¥: column "query_type" of relation "discovered_trajectories" does not exist
2025-08-28 13:05:25,833 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - âœ… æ•°æ®åº“ä¿å­˜æˆåŠŸ: 0 æ¡è½¨è¿¹; å…ˆä¸è¦æ”¹ä»£ç ï¼Œå…ˆæŠŠé—®é¢˜æ¢³ç†æ¸…æ¥š
================================================================================

[62] [Unknown Time]
æŒ‰ç…§æ–¹æ¡ˆ1ä¿®æ”¹å§
================================================================================

[63] [Unknown Time]
æŒ‰ç…§æ–¹æ¡ˆ1ä¿®æ”¹å§ï¼›ä¸è¦æå¤ªå¤æ‚ï¼Œä¹‹é—´æ”¹å°±è¡Œã€‚ã€‚æˆ‘å¯ä»¥æ‰‹åŠ¨åˆ é™¤ä¸å¯¹çš„è¡¨
================================================================================

[64] [Unknown Time] *** å¤šæ¨¡æ€ ***
è¿è¡Œå·²ç»å¯ä»¥æ­£å¸¸æŠ¥é”™äº†ï¼Œæˆ‘åˆæ¢äº†ä¸€ä¸ªæœç´¢è¾“å…¥ã€‚ç»“æœæœ‰é—®é¢˜ï¼Œå…ˆä¸è¦æ”¹ä»£ç ï¼Œå…ˆåˆ†æä¸€ä¸‹é—®é¢˜ï¼š2025-08-28 13:15:23,620 - spdatalab.dataset.multimodal_data_retriever - INFO - ğŸ” æ‰§è¡Œæ–‡æœ¬æ£€ç´¢: 'å…¬è·¯å‡ºéš§é“', collection=ddi_collection_camera_encoded_1, camera=camera_1, start=0, count=100
2025-08-28 13:15:25,264 - spdatalab.dataset.multimodal_data_retriever - INFO - ğŸ” APIè¿”å›åŸå§‹hitsæ•°é‡: 100
2025-08-28 13:15:25,265 - spdatalab.dataset.multimodal_data_retriever - INFO - ğŸ” è½¬æ¢åç»“æœæ•°é‡: 100
2025-08-28 13:15:25,266 - spdatalab.dataset.multimodal_data_retriever - INFO - âœ… æ£€ç´¢æˆåŠŸ: è¿”å›100æ¡ç»“æœï¼Œç´¯è®¡æŸ¥è¯¢100æ¡
2025-08-28 13:15:25,267 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ“Š Stage 2: æ™ºèƒ½èšåˆ 100 ä¸ªæ£€ç´¢ç»“æœ...
2025-08-28 13:15:25,267 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ“Š Datasetèšåˆ: 100æ¡ç»“æœ â†’ 93ä¸ªæ•°æ®é›†
2025-08-28 13:15:25,268 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - â° æ—¶é—´çª—å£èšåˆ: ç”Ÿæˆ93ä¸ªæ—¶é—´èŒƒå›´æŸ¥è¯¢
2025-08-28 13:15:25,268 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸš€ Stage 3: æ‰¹é‡è·å– 93 ä¸ªæ•°æ®é›†è½¨è¿¹...
2025-08-28 13:15:25,268 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸš€ å¼€å§‹è·å–è½¨è¿¹æ•°æ®: 93 ä¸ªæ•°æ®é›†
2025-08-28 13:15:25,269 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ“‹ å¤ç”¨ç°æœ‰è½¨è¿¹æŸ¥è¯¢æ–¹æ³•è·å– 93 ä¸ªæ•°æ®é›†è½¨è¿¹...
2025-08-28 13:15:25,270 - spdatalab.dataset.polygon_trajectory_query - INFO - ğŸ“‹ éœ€è¦è·å–å®Œæ•´è½¨è¿¹çš„æ•°æ®é›†: 93 ä¸ª
2025-08-28 13:15:26,131 - spdatalab.dataset.polygon_trajectory_query - INFO - âœ… å®Œæ•´è½¨è¿¹æŸ¥è¯¢æˆåŠŸ: 2482 ä¸ªç‚¹, 93 ä¸ªæ•°æ®é›†, ç”¨æ—¶: 0.86s
2025-08-28 13:15:26,131 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - âœ… è½¨è¿¹æ•°æ®è·å–æˆåŠŸ: 2482 ä¸ªè½¨è¿¹ç‚¹
2025-08-28 13:15:26,131 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ“Š è·å–ç»Ÿè®¡: æ•°æ®é›†æ•°=93, è½¨è¿¹ç‚¹æ•°=2482, ç”¨æ—¶=0.86s
2025-08-28 13:15:26,132 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ”„ å¼€å§‹è½¬æ¢ 2482 ä¸ªè½¨è¿¹ç‚¹ä¸ºLineString...
2025-08-28 13:15:26,168 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - âœ… LineStringè½¬æ¢å®Œæˆ: 93 æ¡è½¨è¿¹
2025-08-28 13:15:26,169 - spdatalab.fusion.multimodal_trajectory_retrieval - INFO - ğŸ”„ Stage 4: è½¬æ¢è½¨è¿¹ä¸ºPolygonå¹¶æ™ºèƒ½åˆå¹¶...
2025-08-28 13:15:26,169 - spdatalab.dataset.multimodal_data_retriever - INFO - ğŸ”„ æ‰¹é‡è½¬æ¢93æ¡è½¨è¿¹ä¸ºPolygon...
2025-08-28 13:15:26,195 - spdatalab.dataset.multimodal_data_retriever - INFO - âœ… æ‰¹é‡è½¬æ¢å®Œæˆ: 0/93 æ¡æˆåŠŸ
2025-08-28 13:15:26,196 - spdatalab.fusion.multimodal_trajectory_retrieval - WARNING - âš ï¸ è½¨è¿¹è½¬æ¢ä¸ºPolygonå¤±è´¥
2025-08-28 13:15:26,196 - spdatalab.fusion.multimodal_cli - INFO - âœ… æŸ¥è¯¢å®Œæˆï¼Œè€—æ—¶: 2.58 ç§’
2025-08-28 13:15:26,196 - spdatalab.fusion.multimodal_cli - ERROR - âŒ æŸ¥è¯¢å¤±è´¥: è½¨è¿¹æ•°æ®è½¬æ¢ä¸ºPolygonå¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®è´¨é‡
2025-08-28 13:15:26,196 - spdatalab.fusion.multimodal_cli - ERROR - âŒ å¤šæ¨¡æ€è½¨è¿¹æ£€ç´¢å¤±è´¥ï¼
================================================================================

[65] [Unknown Time]
buffer distanceæˆ‘å†™äº†3ï¼› é¢ç§¯ä¸è¦åšè®¾ç½®äº†ã€‚åº”è¯¥æ˜¯è¿™ä¸ªé—®é¢˜ï¼›
================================================================================

[66] [Unknown Time]
è¿™é‡Œæ„å»ºæ•°æ®é›†çš„è¾“å…¥ï¼Œåªè¦æœ‰txt.txt. æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªæ–°çš„è¾“å…¥ï¼Œæ˜¯training_dataset.jsonï¼Œé‡Œé¢æ˜¯æœ‰å…·ä½“çš„æ•°æ®é›†åçš„ï¼Œæˆ‘å¸Œæœ›ä¼˜å…ˆä½¿ç”¨è¿™ä¸ªåï¼Œè€Œä¸æ˜¯ä»å‘½ä»¤è¡Œé‡Œé¢æˆªå–ã€‚ æˆ‘æŠŠæ ·ä¾‹ç»™ä½ ï¼Œä½ å…ˆä¸å†™ä»£ç ï¼Œç»™ä¸€ä¸‹æ–¹æ¡ˆï¼š{
    "meta": {
        "release_name": "JointTrain_20250727",
        "consumer_version": "v1.2.0",
        "bundle_versions": ["v1.2.0-20250620-143500"],
        "created_at": "2025-07-27 15:00:00",
        "description": "ç«¯åˆ°ç«¯ç½‘ç»œè”åˆè®­ç»ƒæ•°æ®é›†",
        "version": "v1.2.0"
    },
    "dataset_index": [
        {
            "name": "enter_waiting_red2green_494",
            "obs_path": "obs://yw-ads-training-gy1/data/ide/cleantask/cc8c7fed-a3ea-438d-8650-2436001b0ae3/waiting_area/golden0520_pkl7.8_enter_waiting_red2green_clip_494_frame_25252.jsonl.shrink",
            "bundle_versions": ["v1.2.0-20250620-143500"],
            "duplicate": 8
        },
        {
            "name": "highway_merge_mixed_dataset",
            "obs_path": "obs://training-data/highway_merge_mixed.jsonl",
            "bundle_versions": ["v1.1.0-20250618", "v1.2.0-20250620"],
            "duplicate": 3
        }
    ]
}
================================================================================

[67] [Unknown Time]
å¯ä»¥ å°±æŒ‰è¿™æ ·æ”¹ï¼Œå¦å¤–dataste_management.mdå’Œcliçš„æ–‡æ¡£ä¿®æ”¹ä¸€ä¸‹
================================================================================

[68] [Unknown Time]
å…ˆä¸ä¿®æ”¹ä»£ç ï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªæŠ¥é”™æ˜¯ä»€ä¹ˆåŸå› ï¼Œç»™å‡ºæ–¹æ¡ˆï¼šroot@82e398ebaf87:/workspace# python -m spdatalab build-dataset --training-dataset-json data/training_dataset_0818.json --output datasets/0818_golden_20250915.parquetÂ 

2025-09-15 01:36:12,263 - spdatalab.dataset.dataset_manager - INFO - ä»JSONæ–‡ä»¶æ„å»ºæ•°æ®é›†: data/training_dataset_0818.json

2025-09-15 01:36:12,263 - spdatalab.cli - ERROR - æ„å»ºæ•°æ®é›†å¤±è´¥: è¯»å–JSONæ–‡ä»¶å¤±è´¥: open_file() got an unexpected keyword argument 'encoding'

Traceback (most recent call last):

Â  File "/workspace/src/spdatalab/dataset/dataset_manager.py", line 409, in build_dataset_from_training_json

Â  Â  with open_file(json_file, 'r', encoding='utf-8') as f:

Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/contextlib.py", line 301, in helper

Â  Â  return _GeneratorContextManager(func, args, kwds)

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/contextlib.py", line 105, in __init__

Â  Â  self.gen = func(*args, **kwds)

Â  Â  Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^

TypeError: open_file() got an unexpected keyword argument 'encoding'



During handling of the above exception, another exception occurred:



Traceback (most recent call last):

Â  File "<frozen runpy>", line 198, in _run_module_as_main

Â  File "<frozen runpy>", line 88, in _run_code

Â  File "/workspace/src/spdatalab/__main__.py", line 10, in <module>

Â  Â  cli()Â 

Â  Â  ^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1442, in __call__

Â  Â  return self.main(*args, **kwargs)

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1363, in main

Â  Â  rv = self.invoke(ctx)

Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1830, in invoke

Â  Â  return _process_result(sub_ctx.command.invoke(sub_ctx))

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1226, in invoke

Â  Â  return ctx.invoke(self.callback, **ctx.params)

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/click/core.py", line 794, in invoke

Â  Â  return callback(*args, **kwargs)

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/workspace/src/spdatalab/cli.py", line 100, in build_dataset

Â  Â  dataset = manager.build_dataset_from_training_json(

Â  Â  Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/workspace/src/spdatalab/dataset/dataset_manager.py", line 412, in build_dataset_from_training_json

Â  Â  raise ValueError(f"è¯»å–JSONæ–‡ä»¶å¤±è´¥: {str(e)}")

ValueError: è¯»å–JSONæ–‡ä»¶å¤±è´¥: open_file() got an unexpected keyword argument 'encoding'
================================================================================

[69] [Unknown Time]
å¯ä»¥
================================================================================

[70] [Unknown Time]
æŠ¥é”™ DatasetManager object has no attribute â€˜include_scene_infoâ€™ï¼›ä¸æ”¹ä»£ç ï¼Œå…ˆçœ‹ä¸€ä¸‹å•¥åŸå› ï¼Œæ·±åˆ»åˆ†æä¸€ä¸‹
================================================================================

[71] [Unknown Time]
ä¿®æ”¹å§
================================================================================

[72] [Unknown Time]
è¿™é‡Œçš„ä¸€ä½“åŒ–å‘½ä»¤å’Œclié‡Œé¢çš„å…·ä½“å®ç°ï¼Œéƒ½ä¸å¤ªä¸€æ ·ã€‚æˆ‘è§‰å¾—è¿™å—æœ‰ç‚¹ä¹±ã€‚æˆ‘è§‰å¾—bboxè¿™ä¸ªäº‹æƒ…ï¼Œæˆ‘æƒ³æç®€å•ä¸€ç‚¹ï¼Œå°±æ˜¯ä¿ç•™ä¸€ä¸ªè¾“å…¥æ•°æ®é›†æ–‡ä»¶ï¼ˆjsonæˆ–è€…parquetï¼‰ï¼Œç„¶åè¾“å‡ºæ•°æ®é›†ï¼Œå¹¶ä¸”ä¸€èˆ¬æå‡éƒ½è¦å¸¦use-partitioningï¼Œä¸ç„¶æ•ˆç‡çš„ç¡®ä¸è¡Œã€‚ æ•´ä½“å°±æ˜¯ç®€åŒ–è°ƒç”¨ï¼ŒæŠŠæ•£è½åœ¨å„å¤„çš„ä½¿ç”¨éƒ½ç»Ÿä¸€ã€‚ å…ˆä¸æ”¹ä»£ç ï¼Œå…ˆåˆ†æä¸€ä¸‹
================================================================================

[73] [Unknown Time]
å…¶å®æˆ‘ä¸æƒ³è¦ä¸€ä½“åŒ–å‘½ä»¤ã€‚æˆ‘æƒ³å½’ä¸€æˆï¼Œç¬¬ä¸€æ­¥ç”Ÿäº§æ•°æ®é›†ï¼Œç¬¬äºŒæ­¥æ ¹æ®æ•°æ®é›†ç”Ÿäº§bboxçš„æ•°æ®è¡¨
================================================================================

[74] [Unknown Time]
ä¸€ä½“åŒ–å‘½ä»¤èƒ½ä¸èƒ½ä¸è¦deprecatedå—ï¼Ÿæˆ‘æƒ³æ¸…ç†ä¸€ä¸‹ã€‚ã€‚
================================================================================

[75] [Unknown Time]
å¥½çš„ï¼Œæ•´ä½“æ¢³ç†ä¸€ä¸ªtodolistï¼Œå¯ä»¥å¼€å§‹ä¿®æ”¹äº†
================================================================================

[76] [Unknown Time]
å¼€å§‹ä¿®æ”¹å§
================================================================================

[77] [Unknown Time]
åˆšåˆšä»»åŠ¡æ–­äº†ï¼Œå®¡è§†ä¸€ä¸‹è¿˜æœ‰å“ªäº›æ²¡æœ‰åšçš„
================================================================================

[78] [Unknown Time]
root@82e398ebaf87:/workspace# python -m spdatalab process-bbox --input datasets/0818_golden_20250915.parquetÂ 

ğŸ¯ å¼€å§‹åˆ†è¡¨æ¨¡å¼å¤„ç†è¾¹ç•Œæ¡†æ•°æ®:

Â  - è¾“å…¥æ–‡ä»¶: datasets/0818_golden_20250915.parquet

Â  - å¤„ç†æ‰¹æ¬¡: 1000

Â  - æ’å…¥æ‰¹æ¬¡: 1000

Â  - å·¥ä½œç›®å½•: ./bbox_import_logs

Â  - åˆ›å»ºç»Ÿä¸€è§†å›¾: æ˜¯

Â  - ä»…ç»´æŠ¤è§†å›¾: å¦

Â  - å¹¶è¡Œå¤„ç†: ç¦ç”¨

=== åˆ†è¡¨æ¨¡å¼å¤„ç†å¼€å§‹ ===

è¾“å…¥æ–‡ä»¶: datasets/0818_golden_20250915.parquet

å·¥ä½œç›®å½•: ./bbox_import_logs

æ‰¹æ¬¡å¤§å°: 1000

æ’å…¥æ‰¹æ¬¡å¤§å°: 1000

åˆ›å»ºç»Ÿä¸€è§†å›¾: True

ä»…ç»´æŠ¤è§†å›¾: False



=== æ­¥éª¤1: åˆ†ç»„åœºæ™¯æ•°æ® ===

åˆ†ç»„scene_idså¤±è´¥: Could not open Parquet input source '<Buffer>': Parquet magic bytes not found in footer. Either the file is corrupted or this is not a parquet file.



åˆ†è¡¨å¤„ç†é‡åˆ°é”™è¯¯: Could not open Parquet input source '<Buffer>': Parquet magic bytes not found in footer. Either the file is corrupted or this is not a parquet file.



æ—¥å¿—å’Œè¿›åº¦æ–‡ä»¶ä¿å­˜åœ¨: ./bbox_import_logs

âœ… åˆ†è¡¨æ¨¡å¼è¾¹ç•Œæ¡†å¤„ç†å®Œæˆï¼› è¿™é‡Œçš„parquetæ˜¯ç”¨training_dataset.jsonç”Ÿæˆçš„ã€‚æˆ‘è¯•äº†å¦ä¸€ä¸ªtxt.txtç”Ÿæˆçš„parquetï¼Œåˆ›å»ºbboxæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯è¿™ä¸ªparquetå°±æœ‰é—®é¢˜ã€‚å…ˆä¸æ”¹ä»£ç ï¼Œåˆ†æä¸€ä¸‹åŸå› 
================================================================================

[79] [Unknown Time]
çœ‹äº† è¿™ä¸ªparquetçš„æŒºå¤§çš„ã€‚å¯ä»¥å†è¿›ä¸€æ­¥çœ‹ä¸€ä¸‹å—ï¼Ÿ å¦å¤–æˆ‘è§‰å¾—training_datasetæ¥å…¥ï¼Œä¸åº”è¯¥ä¿®æ”¹è¿‡å¤šçš„é€»è¾‘ï¼Œæˆ‘æ„Ÿè§‰å°±æ˜¯æ–°å¢äº†ä¸€ä¸ªæ•°æ®é›†åè¿™ä¸€ä¸ªå·®åˆ«å‘€ï¼Œä¸ºå•¥è¿˜æœ‰åˆ«çš„å˜åŒ–ï¼Ÿ
================================================================================

[80] [Unknown Time]
æˆ‘å†é‡æ–°è®²ä¸€ä¸‹éœ€æ±‚ï¼Œæˆ‘è§‰å¾—training_dataset.jsonåªæ˜¯æ–‡ä»¶åæ˜¾æ€§å£°æ˜ã€‚ä¸éœ€è¦ä»è·¯å¾„é‡Œé¢è§£æï¼Œå¦å¤–duplicateæ˜¯å•ç‹¬å£°æ˜ï¼Œä¸å°‘ä»@é‡Œé¢è·å–ã€‚ å…¶ä»–éƒ½ä¸è¦æ”¹ï¼Œæˆ‘å»ºè®®å§build_dataseté‡Œé¢çš„ç‹¬æœ‰å‚æ•°ä¹Ÿå»æ‰ï¼Œå……åˆ†å’Œindex_fileå¤ç”¨é€»è¾‘ã€‚ è®²ä¸€ä¸‹æ–¹æ¡ˆï¼›
================================================================================

[81] [Unknown Time]
å¯ä»¥ï¼Œä¿®æ”¹å§
================================================================================

[82] [Unknown Time]
ä¸å¯¹ï¼Œè¿˜æ˜¯æŠ¥ä¸€æ ·çš„é”™ã€‚
================================================================================

[83] [Unknown Time]
ğŸ” è¯Šæ–­parquetæ–‡ä»¶: datasets/0818_golden_20250915_sample.parquet

ğŸ“ æ–‡ä»¶å¤§å°: 1763858 bytes (1722.52 KB)

ğŸ”¤ æ–‡ä»¶å¤´éƒ¨: b'{\nÂ  '

ğŸ“– å°è¯•è¯»å–parquetæ–‡ä»¶...

âŒ è¯»å–parquetæ–‡ä»¶å¤±è´¥: Could not open Parquet input source '<Buffer>': Parquet magic bytes not found in footer. Either the file is corrupted or this is not a parquet file.

Â  Â é”™è¯¯ç±»å‹: ArrowInvalid

âš ï¸ Metaæ–‡ä»¶ä¸å­˜åœ¨: datasets/0818_golden_20250915_sample.meta.json
================================================================================

[84] [Unknown Time]
æˆ‘ä¸å¤ªç†è§£ï¼Œä¸ºå•¥åŸæ¥txt,txtæ²¡æœ‰é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Ÿä¿®æ”¹æ˜¯ä¸æ˜¯æœ‰ç‚¹é‡äº†ï¼Ÿ
================================================================================

[85] [Unknown Time]
æˆ‘å¤§æ¦‚çŸ¥é“ä¸ºå•¥äº†ï¼Œå› ä¸ºæˆ‘è¿è¡Œçš„æ—¶å€™æ²¡æœ‰è¾“å…¥--format parquetï¼› è¿™ä¸ªå‚æ•°æ˜¯å¦å¯ä»¥å»æ‰ï¼Œç›´æ¥é€šè¿‡æ–‡ä»¶åç¼€ç¡®è®¤ç±»å‹ï¼Ÿ å¦å¤–æ ¹æ®æˆ‘çœŸå®çš„é”™è¯¯åŸå› ï¼Œçœ‹çœ‹ä¹‹å‰ä¿®æ”¹æœ‰æ²¡æœ‰ä¸åˆé€‚ï¼Œæˆ–è€…è¿‡åº¦çš„åœ°æ–¹ã€‚æˆ–è€…å¯ä»¥è€ƒè™‘å›é€€ä¸€ä¸‹å†ä¿®æ”¹ï¼Ÿ
================================================================================

[86] [Unknown Time]
build_datasetæœ‰ç‚¹æ…¢ï¼Œæ•°æ®é›†æœ‰400å¤šä¸ªçš„æ—¶å€™ï¼Œéœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œè®²ä¸€ä¸‹ä¼˜åŒ–æ€è·¯ï¼Œä¸è¦æ”¹ä»£ç 
================================================================================

[87] [Unknown Time]
è¦ä¿æŒç®€æ´ï¼ŒæŒ‰ç…§æœ€å°æ”¹åŠ¨å»åš
================================================================================

[88] [Unknown Time]
æ¥å§ï¼Œå¼€å§‹ä¿®æ”¹å§
================================================================================

[89] [Unknown Time]
è¿™ä¸ªå¹¶è¡Œæ²¡å•¥ä½œç”¨ï¼Œåè€Œå¯¼è‡´æ›´åŠ æ…¢äº†ã€‚
================================================================================

[90] [Unknown Time]
@bbox.py  æ ¹æ®æ•°æ®é›†åˆ›å»ºäº†bboxä¹‹åï¼Œä¸€èˆ¬æ—¶åˆ†è¡¨å­˜å‚¨çš„ã€‚æˆ‘æƒ³æ£€ç´¢ä¸€ä¸‹ï¼Œbboxå ç½®åˆ†æä¹‹åï¼Œé‡åˆæ•°é‡æœ€é«˜çš„ä½ç½®ã€‚è¿™ä¸ªæ€ä¹ˆå®ç°ï¼Ÿ ä¸è¦ç›´æ¥å†™ä»£ç ï¼Œå…ˆç»™æ–¹æ¡ˆ
================================================================================

[91] [Unknown Time]
æŒ‰ç…§æ–¹æ¡ˆä¸€åšã€‚è¿™ä¸ªæ„Ÿè§‰ä¸éœ€è¦æ‹†æ¨¡å—ï¼Œä¼¼ä¹å°±æ˜¯è¿è¡Œsqlå°±å¯ä»¥ã€‚è¾“å‡ºç»“æœæŒ‰ç…§qiså‘ˆç°ã€‚å…ˆçœ‹çœ‹æœ‰æ²¡æœ‰ä¹‹å‰ç±»ä¼¼çš„ä¸€äº›å®ç°ï¼Œå…ˆä¸æ”¹ä»£ç 
================================================================================

[92] [Unknown Time]
ä½ å‡†å¤‡æ”¾åœ¨ä»€ä¹ˆç›®å½•ä¸‹é¢ï¼Œæ¶‰åŠçš„æ–‡ä»¶æœ‰å“ªäº›ï¼Ÿ
================================================================================

[93] [Unknown Time]
exampleä¸‹æœ€å¥½åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œå› ä¸ºä¸‹é¢çš„å®ç°æˆ‘å·²ç»æœ‰ç‚¹æä¸æ¸…æ¥šäº†
================================================================================

[94] [Unknown Time]
å¯ä»¥ï¼Œå¼€å§‹æ•´å§
================================================================================

[95] [Unknown Time]
è¿è¡Œdemo mode æŠ¥é”™å¦‚ä¸‹ï¼šğŸ“Š ç»Ÿä¸€è§†å›¾åŒ…å« 3,022,339 æ¡bboxè®°å½•

ğŸ› ï¸ åˆ›å»ºåˆ†æç»“æœè¡¨...

âŒ åˆ›å»ºåˆ†æç»“æœè¡¨å¤±è´¥: (psycopg.errors.SyntaxError) syntax error at or near "\"

LINE 118: \d+ bbox_overlap_analysis_results;

^

[SQL: -- ==========ï¼› å¦å¤–å½“å‰ç»Ÿä¸€è§†å›¾è¿˜æ²¡åˆ›å»ºï¼Œä¼šé‡æ–°åˆ›å»ºã€‚ä½†æ˜¯æ¶‰åŠåˆ°çš„æ•°æ®åº“ä¹Ÿåœ¨æŒç»­çš„åˆ·æ–°ï¼Œæ‰€ä»¥è¿™ä¸ªè§†å›¾æœ‰ä»€ä¹ˆå¥½çš„å¤„ç†æ–¹å¼å—ï¼Ÿ
================================================================================

[96] [Unknown Time]
root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/bbox_overlap_analysis.py --refresh-view --min-overlap-area 0.0001 --top-n 10

Traceback (most recent call last):

Â  File "/workspace/examples/dataset/bbox_examples/bbox_overlap_analysis.py", line 41, in <module>

Â  Â  from src.spdatalab.dataset.bbox import (

ModuleNotFoundError: No module named 'src'
================================================================================

[97] [Unknown Time]
æˆ‘è§‰å¾—è¿˜è¦ä¼˜åŒ–ä¸€ä¸‹ï¼Œå ç½®åˆ†æçš„æ—¶å€™ï¼Œcity_idç›¸åŒæ‰æœ‰å¿…è¦å†ä¸€èµ·åˆ†æï¼›å¦å¤–all_goodä¹Ÿå¯ä»¥æ˜¯trueå†åˆ†æ
================================================================================

[98] [Unknown Time]
å¦å¤–ï¼Œç°åœ¨å†åšå ç½®åˆ†æå‘¨æœŸéƒ½ç‰¹åˆ«é•¿ï¼Œæˆ‘è§‰å¾—å¯ä»¥æŒ‡å®šæŸä¸ªcity_idè¿›è¡Œåˆ†æã€‚
================================================================================

[99] [Unknown Time]
root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/run_overlap_analysis.py --city A263 --estimate-time

ğŸ¯ Dockerå…¼å®¹çš„BBoxå ç½®åˆ†æ

==================================================

ğŸ”§ è„šæœ¬ä½ç½®: /workspace/examples/dataset/bbox_examples/run_overlap_analysis.py

ğŸ”§ é¡¹ç›®æ ¹ç›®å½•: /workspace/examples

ğŸ”§ Pythonè·¯å¾„:

Â  Â 0: /workspace

Â  Â 1: /workspace/examples/src

Â  Â 2: /workspace/examples

Â  Â 3: /workspace/examples/dataset/bbox_examples

Â  Â 4: /workspace/src

âœ… å¯¼å…¥æ–¹å¼: ç›´æ¥å¯¼å…¥ spdatalab



ğŸš€ ç¯å¢ƒè®¾ç½®æˆåŠŸï¼Œå¼€å§‹å¯¼å…¥æ¨¡å—...

âœ… æ‰€æœ‰æ¨¡å—å¯¼å…¥æˆåŠŸ



ğŸ“‹ åˆ†æå‚æ•°:

Â  Â åŸå¸‚è¿‡æ»¤: A263

Â  Â æœ€å°é‡å é¢ç§¯: 0.0001

Â  Â è¿”å›æ•°é‡: 15

Â  Â å¼ºåˆ¶åˆ·æ–°è§†å›¾: False



ğŸ”Œ è¿æ¥æ•°æ®åº“...

âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ



ğŸ“Š æ£€æŸ¥bboxåˆ†è¡¨...

âœ… å‘ç° 292 ä¸ªbboxåˆ†è¡¨



ğŸ” æ£€æŸ¥ç»Ÿä¸€è§†å›¾...

âœ… ç»Ÿä¸€è§†å›¾å·²å­˜åœ¨

ğŸ“Š ç»Ÿä¸€è§†å›¾åŒ…å« 6,221,952 æ¡bboxè®°å½•



â±ï¸ åˆ†ææ—¶é—´ä¼°ç®—

----------------------------------------



âŒ åˆ†æå¤±è´¥: This Connection is closed

Traceback (most recent call last):

Â  File "/workspace/examples/dataset/bbox_examples/run_overlap_analysis.py", line 278, in main

Â  Â  estimate_result = conn.execute(text(time_estimate_sql)).fetchone()

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

Â  Â  return meth(

Â  Â  Â  Â  Â  Â ^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

Â  Â  return connection._execute_clauseelement(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

Â  Â  ret = self._execute_context(

Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1809, in _execute_context

Â  Â  conn = self._revalidate_connection()

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 678, in _revalidate_connection

Â  Â  raise exc.ResourceClosedError("This Connection is closed")

sqlalchemy.exc.ResourceClosedError: This Connection is closed
================================================================================

[100] [Unknown Time]
èƒ½å¦å¢åŠ ä¸€ä¸ªæ¯”è¾ƒå»ºè®®çš„ä¼˜é›…é€€å‡ºï¼Ÿå› ä¸ºå¯èƒ½ä¼šæ‰‹åŠ¨ç»ˆç«¯
================================================================================

[101] [Unknown Time]
æä¾›ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ‰¹é‡æ¸…é™¤åˆ†æç±»çš„è¡¨
================================================================================

[102] [Unknown Time]
ğŸš€ å¼€å§‹å ç½®åˆ†æ: overlap_docker_20250917_014852

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º

âœ… SQLæ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨ç»Ÿè®¡ç»“æœ...

âœ… å ç½®åˆ†æå®Œæˆï¼Œå‘ç° 0 ä¸ªé‡å çƒ­ç‚¹

âš ï¸ æœªå‘ç°é‡å çƒ­ç‚¹ï¼Œå»ºè®®:

Â  Â â€¢ é™ä½ --min-overlap-area é˜ˆå€¼

Â  Â â€¢ æ£€æŸ¥æ•°æ®æ˜¯å¦åœ¨åŒä¸€åŒºåŸŸ

Â  Â â€¢ å°è¯•ä¸åŒçš„åŸå¸‚è¿‡æ»¤æ¡ä»¶



âœ… åˆ†æå®Œæˆï¼åˆ†æID: overlap_docker_20250917_014852ï¼› æˆ‘é€‰å–äº†A263è¿™ä¸ªåŸå¸‚å·ï¼Œæœ‰9994ä¸ªbboxï¼Œä½†æ˜¯åˆ†æç»“æœæ˜¯æ— ç»“æœã€‚æˆ‘è§‰éƒ½æ¯”è¾ƒå¥‡æ€ªï¼Œè€Œä¸”è¿™ä¸ªoverlapçš„areaæ˜¯å•¥å•ä½ï¼Ÿ è¿™ä¸ªå¦‚ä½•è°ƒè¯•ï¼Ÿ 
================================================================================

[103] [Unknown Time]
ğŸš€ å¼€å§‹å ç½®åˆ†æ: overlap_docker_20250917_014852

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º

âœ… SQLæ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨ç»Ÿè®¡ç»“æœ...

âœ… å ç½®åˆ†æå®Œæˆï¼Œå‘ç° 0 ä¸ªé‡å çƒ­ç‚¹

âš ï¸ æœªå‘ç°é‡å çƒ­ç‚¹ï¼Œå»ºè®®:

Â  Â â€¢ é™ä½ --min-overlap-area é˜ˆå€¼

Â  Â â€¢ æ£€æŸ¥æ•°æ®æ˜¯å¦åœ¨åŒä¸€åŒºåŸŸ

Â  Â â€¢ å°è¯•ä¸åŒçš„åŸå¸‚è¿‡æ»¤æ¡ä»¶



âœ… åˆ†æå®Œæˆï¼åˆ†æID: overlap_docker_20250917_014852ï¼› æˆ‘é€‰å–äº†A263è¿™ä¸ªåŸå¸‚å·ï¼Œæœ‰9994ä¸ªbboxï¼Œä½†æ˜¯åˆ†æç»“æœæ˜¯æ— ç»“æœã€‚æˆ‘è§‰éƒ½æ¯”è¾ƒå¥‡æ€ªï¼Œè€Œä¸”è¿™ä¸ªoverlapçš„areaæ˜¯å•¥å•ä½ï¼Ÿ è¿™ä¸ªå¦‚ä½•è°ƒè¯•ï¼Ÿ è¿˜æœ‰æˆ‘è§‰å¾—è¦å‡ºä¸€ä¸ªæ¨¡å¼ï¼ˆå°½å¯èƒ½å’Œå·²æœ‰å‚æ•°å¤ç”¨ï¼‰ï¼Œåªè¦ç›¸äº¤å°±ç®—okã€‚
================================================================================

[104] [Unknown Time]
åˆ›å»ºçš„è§†å›¾æ˜¯okçš„ï¼Œä½†æ˜¯qgisé‡Œé¢æ²¡æ³•æµè§ˆè§†å›¾ï¼›æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ç›´æ¥æµè§ˆ
================================================================================

[105] [Unknown Time]
èƒ½ä¸èƒ½ä¸åˆ›å»ºè§†å›¾ï¼Œå°±æ˜¯æŠŠç»“æœç›´æ¥åˆ›å»ºè¡¨ï¼Ÿ
================================================================================

[106] [Unknown Time]
è¿™ä¸ªæ”¹åŠ¨å¾ˆä¸å¥½ï¼Œæœ€å¥½å¯ä»¥å›é€€ã€‚æˆ‘å¸Œæœ›æ‰€æœ‰è°ƒç”¨è¿˜æ˜¯ä»run_overlap_analsisè¿›å»ã€‚ã€‚ä¸ç„¶å°±ä¹±äº†ã€‚
================================================================================

[107] [Unknown Time]
ç›¸äº¤å°±ç®—overlapçš„ç›¸å…³å‚æ•°åŠ äº†å—ï¼Ÿ
================================================================================

[108] [Unknown Time]
ç»“æœå¯ä»¥è¾“å‡ºï¼Œä½†æ˜¯ç»“æœæœ‰ç‚¹é—®é¢˜ï¼Œrank1ï¼Œé‡Œé¢åŸºæœ¬æ˜¯æ•´ä¸ªcityé‡Œé¢çš„æ‰€æœ‰çš„polygonéƒ½å«åœ¨é‡Œé¢äº†ï¼Œä½†å®é™…ä¸æ˜¯æ‰€æœ‰éƒ½ç›¸äº¤ã€‚å…ˆä¸æ”¹ä»£ç ï¼Œçœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰bugã€‚
================================================================================

[109] [Unknown Time]
å‡†å¤‡å‡ ä¸ªä¿®å¤æ–¹æ¡ˆå§
================================================================================

[110] [Unknown Time]
æˆ‘è§‰å¾—å°±æŒ‰ç…§æ–¹æ¡ˆä¸€å°±å¯ä»¥ã€‚æ•ˆç‡ä¸Šä¼šæœ‰å¾ˆå¤§çš„å½±å“å—ï¼Ÿ
================================================================================

[111] [Unknown Time]
ä¸ç”¨æµ‹äº†ï¼Œç›´æ¥æ”¹ã€‚ 
================================================================================

[112] [Unknown Time]
æ•ˆæœä¸å¥½ã€‚æˆ‘è§‰å¾—å¯ä»¥æ”¹è¿›ä¸€äº›group_byï¼›æˆ‘è§‰å¾—å°±æŒ‰ç…§ç›¸äº¤å°±groupåœ¨ä¸€èµ·ï¼Œæ˜¯å¦å¯è¡Œï¼Ÿ
================================================================================

[113] [Unknown Time]
group byï¼ˆè¿™æ¬¡ä¿®æ”¹ä¹‹å‰ï¼Œè¿è¡Œï¼‰ï¼Œè¿”å›çš„ç»“æœoverlap countéƒ½æ˜¯1ï¼ŒåŒ…å«çš„sceneéƒ½æ˜¯2ï¼Œç„¶åhotspok rankä¸è¿ç»­ï¼Œéƒ½å¾ˆå¤§ï¼Œæœ‰çš„æ˜¯4000å¤šï¼Œæœ‰çš„æ˜¯5wå¤šï¼Œå…ˆåˆ†æä¸€ä¸‹è¿™ä¸ªåŸå› ï¼Ÿ
================================================================================

[114] [Unknown Time]
snaptogridçš„è¿™ä¸ªé˜ˆå€¼ï¼Œå¤§ä¸€ç‚¹æ²¡å…³ç³»æ˜¯ä¸æ˜¯ï¼Ÿ åº”è¯¥ä¸æ˜¯æœ€ç»ˆæŒ‰ç…§è¿™ä¸ªé˜ˆå€¼è¿›è¡Œå ç½®åˆ†ææ˜¯å§
================================================================================

[115] [Unknown Time]
å¥½çš„ï¼Œä¿®æ”¹å§
================================================================================

[116] [Unknown Time]
å°´å°¬äº†ï¼Œæœºå™¨æ²¡æœ‰ç©ºé—´äº†ï¼š(psycopg.errors.DiskFull) could not write to file "base/pgsql_tmp/pgsql_tmp1272612.195": No space left on deviceï¼› æˆ‘è¿™ä¸ªæ˜¯ä¸ªå·¥ä½œç«™ã€‚å¦‚ä½•æ’æŸ¥ï¼Ÿå…ˆçœ‹ä¸€ä¸‹æˆ‘çš„å·¥ä½œç«™çš„ç©ºé—´ï¼Ÿ 
================================================================================

[117] [Unknown Time]
ä½ åˆ›å»ºä¸€ä¸ªå°ç›®å½•ï¼Œä¸“é—¨æ”¾æ’æŸ¥é—®é¢˜è„šæœ¬çš„
================================================================================

[118] [Unknown Time]
æˆ‘å…¶å®åœ¨è€ƒè™‘ç§»åŠ¨è¿™ä¸ªæ•°æ®åº“ï¼Œåˆ°æ›´å¤§çš„æœåŠ¡å™¨ä¸Šã€‚å…ˆæ¢³ç†ä¸€ä¸‹æ–¹æ¡ˆå’Œè¡ŒåŠ¨é¡¹
================================================================================

[119] [Unknown Time]
root@82e398ebaf87:/workspace# python troubleshooting/quick_space_check.pyÂ 

PostgreSQLç£ç›˜ç©ºé—´å¿«é€Ÿè¯Šæ–­å·¥å…·

è¿è¡Œå¹³å°: Unix/Linux

============================================================

å¿«é€Ÿç£ç›˜ç©ºé—´æ£€æŸ¥

============================================================

FilesystemÂ  Â  Â  SizeÂ  Used Avail Use% Mounted on

overlayÂ  Â  Â  Â  Â 938GÂ  696GÂ  194GÂ  79% /

tmpfsÂ  Â  Â  Â  Â  Â  64MÂ  Â  Â 0Â  Â 64MÂ  Â 0% /dev

tmpfsÂ  Â  Â  Â  Â  Â  63GÂ  Â  Â 0Â  Â 63GÂ  Â 0% /sys/fs/cgroup

shmÂ  Â  Â  Â  Â  Â  Â  64MÂ  Â  Â 0Â  Â 64MÂ  Â 0% /dev/shm

/dev/nvme0n1p2Â  938GÂ  696GÂ  194GÂ  79% /workspace





ç³»ç»Ÿèµ„æºæ£€æŸ¥

================================================================================

CPUä½¿ç”¨ç‡: 2.6%

å†…å­˜ä½¿ç”¨ç‡: 8.7%

å¯ç”¨å†…å­˜: 114.50 GB

äº¤æ¢ç©ºé—´ä½¿ç”¨ç‡: 0.5%

ç£ç›˜è¯»å–: 6.08 GB

ç£ç›˜å†™å…¥: 677.28 GB
================================================================================

[120] [Unknown Time]
root@82e398ebaf87:/workspace# python troubleshooting/quick_space_check.py 

PostgreSQLç£ç›˜ç©ºé—´å¿«é€Ÿè¯Šæ–­å·¥å…·

è¿è¡Œå¹³å°: Unix/Linux

============================================================

å¿«é€Ÿç£ç›˜ç©ºé—´æ£€æŸ¥

============================================================

Filesystem      Size  Used Avail Use% Mounted on

overlay         938G  696G  194G  79% /

tmpfs            64M     0   64M   0% /dev

tmpfs            63G     0   63G   0% /sys/fs/cgroup

shm              64M     0   64M   0% /dev/shm

/dev/nvme0n1p2  938G  696G  194G  79% /workspace





ç³»ç»Ÿèµ„æºæ£€æŸ¥

================================================================================

CPUä½¿ç”¨ç‡: 2.6%

å†…å­˜ä½¿ç”¨ç‡: 8.7%

å¯ç”¨å†…å­˜: 114.50 GB

äº¤æ¢ç©ºé—´ä½¿ç”¨ç‡: 0.5%

ç£ç›˜è¯»å–: 6.08 GB

ç£ç›˜å†™å…¥: 677.28 GB
================================================================================

[121] [Unknown Time]
æˆ‘è§‰å¾—ä¸ç”¨åˆ†æäº†ï¼Œå¸Œæœ›èƒ½æŠŠæ•°æ®åº“è¿ç§»åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ä¸Šã€‚
================================================================================

[122] [Unknown Time]
ç»“æœè¿˜æ˜¯è·Ÿä¹‹å‰ä¸€æ ·ï¼Œæˆ‘è§‰å¾—éœ€è¦è¿›ä¸€æ­¥å®šä½é—®é¢˜
================================================================================

[123] [Unknown Time]
root@82e398ebaf87:/workspace# python debug_overlap_issue.pyÂ 

ğŸ” å¼€å§‹è°ƒè¯•é‡å åˆ†æé—®é¢˜

============================================================



ğŸ“Š æ­¥éª¤1: æ£€æŸ¥åŸºç¡€æ•°æ®

----------------------------------------

æ€»æ•°æ®é‡: 7,570,159

åŸå¸‚A263æ•°æ®é‡: 11,396

åŸå¸‚A263è´¨é‡è‰¯å¥½æ•°æ®: 11,235

ä¸åŒåŸå¸‚æ•°: 365

é¢ç§¯èŒƒå›´: 0.0000000000 ~ 2912.4116697711

å¹³å‡é¢ç§¯: 0.0003910798



ğŸ”— æ­¥éª¤2: æ£€æŸ¥é‡å å¯¹ç”Ÿæˆï¼ˆå‰10ä¸ªæ ·æœ¬ï¼‰

----------------------------------------

å‰10ä¸ªé‡å å¯¹æ ·æœ¬:

Â bbox_a_idÂ  bbox_b_idÂ  overlap_areaÂ  Â area_aÂ  Â area_bÂ  overlap_percent_aÂ  overlap_percent_bÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â subdataset_aÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â subdataset_bÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scene_aÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scene_b

Â  Â 2030327Â  Â  4115806Â  Â  Â  0.000038 0.000040 0.000041Â  Â  Â  Â  Â  Â  Â  95.30Â  Â  Â  Â  Â  Â  Â  93.14Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_10_hqÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_58_hq 3421e31638b241308844d09c9e19e902 65b02f057dd046869904d657f86b9065

Â  Â 2442491Â  Â  3214105Â  Â  Â  0.000037 0.000046 0.000037Â  Â  Â  Â  Â  Â  Â  81.66Â  Â  Â  Â  Â  Â  Â 100.00Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  golden_added_1_hqÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_37_hq 6a2ca48755ed462ba32b5da212a915a0 03c40685cc9a4e14974cea4c3039a3a6

Â  Â 4017587Â  Â  5306873Â  Â  Â  0.000034 0.000043 0.000034Â  Â  Â  Â  Â  Â  Â  79.35Â  Â  Â  Â  Â  Â  Â 100.00Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_56_hq golden_efficiency_lane_change_0707_216 7daca55bd688412e8b186ea234c148fc facb910b7ca14034ad56517fd16b9cfd

Â  Â 4017587Â  Â  4208492Â  Â  Â  0.000034 0.000043 0.000034Â  Â  Â  Â  Â  Â  Â  79.35Â  Â  Â  Â  Â  Â  Â 100.00Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_56_hqÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  golden_added_5_hq 7daca55bd688412e8b186ea234c148fc facb910b7ca14034ad56517fd16b9cfd

Â  Â  625047Â  Â  1469853Â  Â  Â  0.000034 0.000037 0.000040Â  Â  Â  Â  Â  Â  Â  92.28Â  Â  Â  Â  Â  Â  Â  84.93 e2e_allsensors_330010_auto_train_3_subÂ  Â  Â  Â  Â  Â  Â  filtered_navi_lc_balanced 0b65772efbb74a7fa5284cfcbdcaecdc f85fe990bb864c43abd27226c45142cf

Â  Â 2619310Â  Â  4818977Â  Â  Â  0.000033 0.000038 0.000042Â  Â  Â  Â  Â  Â  Â  88.95Â  Â  Â  Â  Â  Â  Â  79.76Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_23_hqÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_75_hq 9ffa42c9e18e40e384153b5c1ebd900e 5e7e7e9c94ee49bd953dafdbfe7f9f76

Â  Â 2015106Â  Â  4482858Â  Â  Â  0.000033 0.000041 0.000033Â  Â  Â  Â  Â  Â  Â  79.84Â  Â  Â  Â  Â  Â  Â 100.00Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_10_hqÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_68_hq 4129ae5bde004989bec4b897ecf555ca 9fd3be51ead74cb89f9aff8e28a6a4f8

Â  Â 3294200Â  Â  7434618Â  Â  Â  0.000032 0.000034 0.000038Â  Â  Â  Â  Â  Â  Â  94.07Â  Â  Â  Â  Â  Â  Â  85.49Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_39_hqÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â res_effi_truck ac8c6016809948cdb5fac4ce2ee30d9d 652657bf867c4f06843b2277b0114c72

Â  Â 2316971Â  Â  4870261Â  Â  Â  0.000032 0.000036 0.000035Â  Â  Â  Â  Â  Â  Â  88.94Â  Â  Â  Â  Â  Â  Â  91.78Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_17_hqÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â golden_added_76_hq 5dd2acfaeae34d5a9e977a24d3c3d551 9306bcc72aef4333b4b1cef0e78c90e5

Â  Â  456474Â  Â  Â 507113Â  Â  Â  0.000032 0.000038 0.000032Â  Â  Â  Â  Â  Â  Â  83.99Â  Â  Â  Â  Â  Â  Â 100.00 e2e_allsensors_330010_auto_train_1_sub e2e_allsensors_330010_auto_train_2_sub 34021d19604449fb9325e59c1e8b1b2e 45b7f121364f4b248fbccb249e145f36



ğŸ“ˆ æ­¥éª¤3: ç»Ÿè®¡é‡å å¯¹æ€»æ•°

----------------------------------------

æ€»é‡å å¯¹æ•°: 67,105

é¢ç§¯>1e-6çš„é‡å å¯¹: 27,880

é¢ç§¯>1e-4çš„é‡å å¯¹: 0

é‡å é¢ç§¯èŒƒå›´: 0.000000000000 ~ 0.000038298343

å¹³å‡é‡å é¢ç§¯: 0.000001971410



ğŸ¯ æ­¥éª¤4: æµ‹è¯•ä¸åŒé¢ç§¯é˜ˆå€¼çš„å½±å“

----------------------------------------

é˜ˆå€¼Â  Â  Â  Â  Â  0:Â  Â 67,105 ä¸ªé‡å å¯¹

é˜ˆå€¼Â  Â  Â  1e-06:Â  Â 27,880 ä¸ªé‡å å¯¹

é˜ˆå€¼Â  Â  Â  1e-05:Â  Â  2,291 ä¸ªé‡å å¯¹

é˜ˆå€¼Â  Â  Â 0.0001:Â  Â  Â  Â  0 ä¸ªé‡å å¯¹

é˜ˆå€¼Â  Â  Â  0.001:Â  Â  Â  Â  0 ä¸ªé‡å å¯¹



ğŸ“‹ æ­¥éª¤5: æ£€æŸ¥ç°æœ‰åˆ†æç»“æœ

----------------------------------------

æœ€è¿‘5æ¬¡åˆ†æç»“æœ:

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â analysis_idÂ  result_countÂ  min_rankÂ  max_rankÂ  min_overlap_countÂ  max_overlap_countÂ  min_areaÂ  max_areaÂ  Â  Â  Â  Â  Â  Â  Â  Â created_at

overlap_docker_20250918_080255Â  Â  Â  Â  Â  Â  10Â  Â  Â  6286Â  Â  Â 56458Â  Â  Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  Â  Â  Â  1Â  0.000032Â  0.000038 2025-09-18 08:02:55.163300

overlap_docker_20250917_062132Â  Â  Â  Â  Â  Â  10Â  Â  Â  5925Â  Â  Â 50865Â  Â  Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  Â  Â  Â  1Â  0.000031Â  0.000038 2025-09-17 06:21:32.511111

overlap_docker_20250917_034901Â  Â  Â  Â  Â  Â  10Â  Â  Â  5863Â  Â  Â 49839Â  Â  Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  Â  Â  Â  1Â  0.000031Â  0.000038 2025-09-17 03:49:01.326082

overlap_docker_20250917_033747Â  Â  Â  Â  Â  Â  10Â  Â  Â  Â  Â 1Â  Â  Â  Â  10Â  Â  Â  Â  Â  Â  Â  Â  107Â  Â  Â  Â  Â  Â  Â  29451Â  0.000074Â  0.011138 2025-09-17 03:37:47.577128

overlap_docker_20250917_015443Â  Â  Â  Â  Â  Â  10Â  Â  Â  Â  Â 1Â  Â  Â  Â  10Â  Â  Â  Â  Â  Â  Â  Â  107Â  Â  Â  Â  Â  Â  Â  25900Â  0.000074Â  0.011125 2025-09-17 01:54:43.883097



ğŸ” è¯¦ç»†æŸ¥çœ‹æœ€æ–°åˆ†æ: overlap_docker_20250918_080255

å‰10ä¸ªçƒ­ç‚¹è¯¦æƒ…:

Â hotspot_rankÂ  overlap_countÂ  total_overlap_areaÂ  subdataset_countÂ  scene_countÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â sample_subdatasetsÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â centroid

Â  Â  Â  Â  Â 6286Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000032Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2 [e2e_allsensors_330010_auto_train_1_sub, e2e_allsensors_330010_auto_train_2_sub]Â  POINT(106.11975632413329 30.75975774277403)

Â  Â  Â  Â  Â 9726Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000034Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  [e2e_allsensors_330010_auto_train_3_sub, filtered_navi_lc_balanced]Â  POINT(106.27333790676356 30.84963897269948)

Â  Â  Â  Â  27408Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000033Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_10_hq, golden_added_68_hq] POINT(106.21536895137224 31.266074005990646)

Â  Â  Â  Â  27698Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000038Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_10_hq, golden_added_58_hq]Â  POINT(106.21077172336146 31.26268637016615)

Â  Â  Â  Â  32503Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000032Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_17_hq, golden_added_76_hq] POINT(106.25099489756157 30.792828884797824)

Â  Â  Â  Â  34729Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000037Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [golden_added_1_hq, golden_added_37_hq]Â  POINT(106.15172603173502 30.66161056599795)

Â  Â  Â  Â  38106Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000033Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_23_hq, golden_added_75_hq] POINT(106.49135238116381 31.015688392680364)

Â  Â  Â  Â  48668Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000032Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_39_hq, res_effi_truck] POINT(106.49331745942493 31.016861134571833)

Â  Â  Â  Â  56446Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000034Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [golden_added_56_hq, golden_added_5_hq] POINT(105.98760604035532 30.912211194509197)

Â  Â  Â  Â  56458Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000034Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_56_hq, golden_efficiency_lane_change_0707_216] POINT(105.98760604035532 30.912211194509197)



ğŸ§ª æ­¥éª¤6: æµ‹è¯•å½“å‰SQLé€»è¾‘

----------------------------------------

å½“å‰SQLé€»è¾‘æµ‹è¯•ç»“æœ:

Â hotspot_rankÂ  overlap_countÂ  total_overlap_areaÂ  subdataset_countÂ  scene_countÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â involved_subdatasetsÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  involved_scenesÂ  Â  Â  Â  Â pair_id

Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000038Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_10_hq, golden_added_58_hq] [3421e31638b241308844d09c9e19e902, 65b02f057dd046869904d657f86b9065] 2030327_4115806

Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000037Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [golden_added_1_hq, golden_added_37_hq] [6a2ca48755ed462ba32b5da212a915a0, 03c40685cc9a4e14974cea4c3039a3a6] 2442491_3214105

Â  Â  Â  Â  Â  Â  3Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000034Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [golden_added_56_hq, golden_added_5_hq] [7daca55bd688412e8b186ea234c148fc, facb910b7ca14034ad56517fd16b9cfd] 4017587_4208492

Â  Â  Â  Â  Â  Â  4Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000034Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_56_hq, golden_efficiency_lane_change_0707_216] [7daca55bd688412e8b186ea234c148fc, facb910b7ca14034ad56517fd16b9cfd] 4017587_5306873

Â  Â  Â  Â  Â  Â  5Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000034Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  [e2e_allsensors_330010_auto_train_3_sub, filtered_navi_lc_balanced] [0b65772efbb74a7fa5284cfcbdcaecdc, f85fe990bb864c43abd27226c45142cf]Â  625047_1469853

Â  Â  Â  Â  Â  Â  6Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000033Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_23_hq, golden_added_75_hq] [9ffa42c9e18e40e384153b5c1ebd900e, 5e7e7e9c94ee49bd953dafdbfe7f9f76] 2619310_4818977

Â  Â  Â  Â  Â  Â  7Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000033Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_10_hq, golden_added_68_hq] [4129ae5bde004989bec4b897ecf555ca, 9fd3be51ead74cb89f9aff8e28a6a4f8] 2015106_4482858

Â  Â  Â  Â  Â  Â  8Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000032Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_39_hq, res_effi_truck] [ac8c6016809948cdb5fac4ce2ee30d9d, 652657bf867c4f06843b2277b0114c72] 3294200_7434618

Â  Â  Â  Â  Â  Â  9Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000032Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â [golden_added_17_hq, golden_added_76_hq] [5dd2acfaeae34d5a9e977a24d3c3d551, 9306bcc72aef4333b4b1cef0e78c90e5] 2316971_4870261

Â  Â  Â  Â  Â  Â 10Â  Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â  0.000032Â  Â  Â  Â  Â  Â  Â  Â  Â 2Â  Â  Â  Â  Â  Â  2 [e2e_allsensors_330010_auto_train_1_sub, e2e_allsensors_330010_auto_train_2_sub] [34021d19604449fb9325e59c1e8b1b2e, 45b7f121364f4b248fbccb249e145f36]Â  Â 456474_507113



ğŸ“Š ç»“æœåˆ†æ:

Rankåˆ†å¸ƒ: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

Overlap countåˆ†å¸ƒ: {1}

Scene countåˆ†å¸ƒ: {2}

Rankæ˜¯å¦è¿ç»­: æ˜¯
================================================================================

[124] [Unknown Time]
ç»“æœå¯ä»¥è¾“å‡ºï¼Œä½†æ˜¯ç»“æœæœ‰ç‚¹é—®é¢˜ï¼Œrank1ï¼Œé‡Œé¢åŸºæœ¬æ˜¯æ•´ä¸ªcityé‡Œé¢çš„æ‰€æœ‰çš„polygonéƒ½å«åœ¨é‡Œé¢äº†ï¼Œæ˜¯ä¸€ä¸ªmultipolygonã€‚ç†è®ºä¸Šè¿™äº›polygonåº”è¯¥è¿åœ¨ä¸€èµ·ã€‚ä½†å®é™…ä¸Šï¼Œæˆ‘çœ‹æœ‰ä¸€äº›å­polygonæ˜¯äº’ç›¸ä¸ç›¸äº¤çš„ã€‚ å…ˆåˆ†æé—®é¢˜ï¼Œä¸ç”¨å…ˆæ”¹ä»£ç 
================================================================================

[125] [Unknown Time]
è§£å†³æ–¹æ¡ˆAä¸­ï¼Œå¦‚æœbuffer distanceæ˜¯0ï¼Œå¯ä»¥å—ï¼Ÿè¿™é‡Œbufferæ˜¯å¿…è¦æ“ä½œå—ï¼Ÿè¿˜æ˜¯ä¸ºäº†å’Œæ¥å£ä¸­çš„é˜ˆå€¼ç›¸é€‚é…ï¼Œè®¾è®¡çš„ï¼Ÿ
================================================================================

[126] [Unknown Time]
ä¿®æ”¹å§
================================================================================

[127] [Unknown Time]
æˆ‘å‘ç°è¾“å‡ºæ˜¯ä¸€ä¸ªè§†å›¾ï¼Œä½†æ˜¯qgisé‡Œé¢æŸ¥çœ‹ä¸æ–¹ä¾¿ï¼Œèƒ½å¦è¾“å‡ºtableï¼Ÿæ”¹åŠ¨ä¸Šå°½å¯èƒ½å°ä¸€äº›
================================================================================

[128] [Unknown Time]
ç¡®è®¤ä¸€ä¸‹ï¼ŒæŸ¥è¯¢ç»“æœæ˜¯å“ªä¸ªè¡¨ï¼Ÿä¼šæ‰“å°å‡ºæ¥å—ï¼Ÿå¦å¤–ï¼Œæˆ‘æƒ³åšä¸€äº›æŸ¥è¯¢ç»“æœçš„cleanupï¼Œæˆ‘çœ‹äº†ç°åœ¨çš„å‡½æ•°æœ‰ç‚¹å¤æ‚ï¼Œå¦å¤–æˆ‘å°è¯•è¿è¡Œlist-resultsè¿™ä¸ªå‘½ä»¤ï¼Œè¿è¡Œæ—¶é—´ç‰¹åˆ«é•¿ï¼Œä¹Ÿä¸çŸ¥é“å¡å“ªé‡Œäº†ã€‚
================================================================================

[129] [Unknown Time]
ç¡®è®¤ä¸€ä¸‹ï¼ŒæŸ¥è¯¢ç»“æœæ˜¯å“ªä¸ªè¡¨ï¼Ÿä¼šæ‰“å°å‡ºæ¥å—ï¼Ÿå¦å¤–ï¼Œæˆ‘æƒ³åšä¸€äº›æŸ¥è¯¢ç»“æœçš„cleanupï¼Œæˆ‘çœ‹äº†ç°åœ¨çš„å‡½æ•°æœ‰ç‚¹å¤æ‚ï¼Œå¦å¤–æˆ‘å°è¯•è¿è¡Œlist-resultsè¿™ä¸ªå‘½ä»¤ï¼Œè¿è¡Œæ—¶é—´ç‰¹åˆ«é•¿ï¼Œä¹Ÿä¸çŸ¥é“å¡å“ªé‡Œäº†ã€‚æˆ‘è§‰å¾—ä¹Ÿä¸ç”¨å°è¯•ä¿®å¤ï¼Œæˆ‘å°±æ˜¯å¾ˆæœ´ç´ çš„æƒ³æŠŠä¹‹å‰çš„æŸ¥è¯¢ç»“æœç»Ÿä¸€æ¸…é™¤ä¸€ä¸‹ï¼Œç„¶åå†è¿è¡Œã€‚çœ‹çœ‹èƒ½ä¸èƒ½æŠŠç°æœ‰çš„å‘½ä»¤æ•´ç†ä¸€ä¸‹ï¼Œå…ˆä¸æ”¹ä»£ç ï¼Œè®²ä¸€ä¸‹ä¿®æ”¹æ–¹æ¡ˆ
================================================================================

[130] [Unknown Time]
å°±æŒ‰ç…§æ–¹æ¡ˆ1æ”¹ï¼ŒåŸæ¥ä¸€äº›ä¸éœ€è¦çš„ä¹Ÿåˆ æ‰
================================================================================

[131] [Unknown Time]
--list-simpleè¿˜æ˜¯å¾ˆæ…¢ã€‚ã€‚ã€‚å‘ç°293ä¸ªbboxåˆ†è¡¨ï¼ˆclips_bbox_*ï¼‰ï¼Œä¸ºç¤¾ä¹ˆä¼šçœ‹è¿™ä¸ªè¡¨ï¼Ÿ
================================================================================

[132] [Unknown Time]
root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/bbox_overlap_analysis.py --list-simple

ğŸ¯ BBoxå ç½®åˆ†æç¤ºä¾‹

============================================================



ğŸ“‹ åˆ†æç»“æœåˆ—è¡¨ï¼ˆç®€å•æ¨¡å¼ï¼‰

----------------------------------------

ğŸ“‹ æŸ¥è¯¢åˆ†æç»“æœï¼ˆç®€å•æ¨¡å¼ï¼‰...

ğŸ“Š æ‰¾åˆ° 7 ä¸ªåˆ†æç»“æœ:

åˆ†æIDÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â çƒ­ç‚¹æ•°Â  Â  Â  åˆ›å»ºæ—¶é—´Â  Â  Â  Â  Â  Â  Â  Â Â 

----------------------------------------------------------------------

overlap_docker_20250918_091345Â  Â  Â  Â  Â  Â 10Â  Â  Â  Â 2025-09-18 09:13:45.796156

overlap_docker_20250918_083444Â  Â  Â  Â  Â  Â 10Â  Â  Â  Â 2025-09-18 08:34:44.898399

overlap_docker_20250918_080255Â  Â  Â  Â  Â  Â 10Â  Â  Â  Â 2025-09-18 08:02:55.163300

overlap_docker_20250917_062132Â  Â  Â  Â  Â  Â 10Â  Â  Â  Â 2025-09-17 06:21:32.511111

overlap_docker_20250917_034901Â  Â  Â  Â  Â  Â 10Â  Â  Â  Â 2025-09-17 03:49:01.326082

overlap_docker_20250917_033747Â  Â  Â  Â  Â  Â 10Â  Â  Â  Â 2025-09-17 03:37:47.577128

overlap_docker_20250917_015443Â  Â  Â  Â  Â  Â 10Â  Â  Â  Â 2025-09-17 01:54:43.883097

root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/bbox_overlap_analysis.py --cleanup-all --force

ğŸ¯ BBoxå ç½®åˆ†æç¤ºä¾‹

============================================================



ğŸ§¹ å…¨é‡æ¸…ç†åˆ†ææ•°æ®

----------------------------------------

ğŸ§¹ å…¨é‡æ¸…ç†åˆ†ææ•°æ®...

ğŸ“‹ qgis_bbox_overlap_hotspots: 70 æ¡è®°å½•

ğŸ“‹ bbox_overlap_analysis_results: 70 æ¡è®°å½•



ğŸ“Š æ€»è®¡: 2 ä¸ªè¡¨, 140 æ¡è®°å½•



ğŸ—‘ï¸ å¼€å§‹åˆ é™¤...

âŒ æ¸…ç†å¤±è´¥: (psycopg.errors.WrongObjectType) "qgis_bbox_overlap_hotspots" is not a table

HINT:Â  Use DROP VIEW to remove a view.

[SQL: DROP TABLE IF EXISTS qgis_bbox_overlap_hotspots;]

(Background on this error at: https://sqlalche.me/e/20/f405)
================================================================================

[133] [Unknown Time]
æˆ‘å‘ç°ä½ è€å¸ˆä¼šæä¸€ä¸ªæµ‹è¯•è„šæœ¬ï¼Œç„¶ååˆ é™¤ã€‚ã€‚è¿™ä¸ªèƒ½å¦ä¼˜åŒ–ä¸€äº›ï¼Ÿå¦‚æœæ˜¯è¿œç«¯çš„æµ‹è¯•è„šæœ¬å°±ä¸åˆ ã€‚å¦‚æœæ˜¯æœ¬åœ°çš„ï¼Œå°±ä¸è¦ç”Ÿæˆäº†ï¼Œå› ä¸ºæœ¬åœ°ä¹Ÿä¸è¿è¡Œã€‚æŠŠè¿™ä¸ªæ€»ç»“æˆä¸€å¥è¯ï¼Œæˆ‘æ”¾åˆ°rulesé‡Œé¢
================================================================================

[134] [Unknown Time]
root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/bbox_overlap_analysis.py --cleanup-all --force

ğŸ¯ BBoxå ç½®åˆ†æç¤ºä¾‹

============================================================



ğŸ§¹ å…¨é‡æ¸…ç†åˆ†ææ•°æ®

----------------------------------------

ğŸ§¹ å…¨é‡æ¸…ç†åˆ†ææ•°æ®...

ğŸ“‹ qgis_bbox_overlap_hotspots (è¡¨): 70 æ¡è®°å½•

ğŸ“‹ bbox_overlap_analysis_results (è¡¨): 70 æ¡è®°å½•



ğŸ“Š æ€»è®¡: 2 ä¸ªå¯¹è±¡, 140 æ¡è®°å½•



ğŸ—‘ï¸ å¼€å§‹åˆ é™¤...

âŒ æ¸…ç†å¤±è´¥: (psycopg.errors.WrongObjectType) "qgis_bbox_overlap_hotspots" is not a table

HINT:Â  Use DROP VIEW to remove a view.

[SQL: DROP TABLE IF EXISTS qgis_bbox_overlap_hotspots;]

(Background on this error at: https://sqlalche.me/e/20/f405)
================================================================================

[135] [Unknown Time]
è¿™äº›æ“ä½œéƒ½å¾ˆå¥‡æ€ªï¼Œä¸ºä»€ä¹ˆé™¤äº†clips_bbox_unifiedå¤–è¿˜æœ‰è¿™ä¸ªviewï¼Œè¿™ä¸¤ä¸ªviewéƒ½å¾ˆå¤§ã€‚ã€‚ã€‚æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿç°åœ¨è¿è¡ŒSELECT COUNT(*) FROM {view_name};å°±å¾ˆæ…¢ã€‚ã€‚
================================================================================

[136] [Unknown Time]
æˆ‘å»ºè®®åªä¿ç•™ä¸€ä¸ªè§†å›¾ï¼Œå› ä¸ºè¿™äº›è§†å›¾å…³è”çš„è¡¨æœ¬èº«ä¹Ÿæœ‰ç©ºé—´ç´¢å¼•å•Šã€‚ã€‚æœ‰å¿…è¦å†ç‰©åŒ–ä¸€ä¸ªå—ï¼Ÿ å…ˆä¸æ”¹ä»£ç ï¼Œè·Ÿæˆ‘è®²æ–¹æ¡ˆ
================================================================================

[137] [Unknown Time]
â€œåªä¿ç•™åŸºç¡€è§†å›¾ï¼ŒåŠ¨æ€æ·»åŠ qgis_idâ€è¿™æ˜¯å•¥æ„æ€ï¼Ÿä¸ºå•¥è¦åŠ qgis_idï¼Ÿæˆ‘åªæ˜¯æƒ³æŠŠtopkçš„ç­›é€‰ç»“æœå¯è§†åŒ–ï¼Œå¹¶ä¸éœ€è¦æ‰€æœ‰ç»“æœå¯è§†åŒ–å‘€ï¼Ÿã€‚ã€‚
================================================================================

[138] [Unknown Time]
å°±æŒ‰è¿™æ ·æ”¹å§ã€‚ åˆ é™¤è§†å›¾ï¼Œå•ç‹¬æä¸€ä¸ªä¸´æ—¶è„šæœ¬ã€‚ å…¶ä»–çš„ä»£ç éƒ½ä¿®æ”¹ä¸€ä¸‹ï¼Œä¸è¦æœ‰é—æ¼ã€‚ å¦å¤–ï¼Œåœ¨åˆ†æä»£ç é‡Œé¢ä¹Ÿæœ‰é—®é¢˜ï¼Œä¸ºå•¥æ˜¯ç”¨qgisè§†å›¾ã€‚ã€‚æ€ªä¸å¾—è¿™ä¹ˆæ…¢ã€‚ã€‚
================================================================================

[139] [Unknown Time]
è¿™é‡Œæœ‰bug
================================================================================

[140] [Unknown Time]
è¿™é‡Œæœ‰bugã€‚æŠ¥é”™return outside function
================================================================================

[141] [Unknown Time]
æˆ‘è¿è¡Œäº†python cleanup_redundant_views.pyã€‚ç„¶åä¸€ç›´åœåœ¨ clips_bbox_unified_qgisï¼ˆviewï¼‰:å­˜åœ¨ï¼Œè¿™ä¸€å¥ï¼Œä¸€ç›´ä¸å¾€åèµ°ã€‚ ç„¶åæˆ‘æ£€æŸ¥æ•°æ®åº“é‡Œé¢æ‰€æœ‰çš„viewéƒ½æ²¡æœ‰äº†ã€‚ã€‚è¿™æ˜¯ç®—cleanupå®Œäº†å—ï¼Ÿ
================================================================================

[142] [Unknown Time]
list-simpleä¹‹åçš„ç¡®æ²¡æœ‰ä¸œè¥¿ã€‚ä½†æ˜¯æœ€åŸºç¡€çš„è§†å›¾ä¹Ÿä¹ˆæœ‰äº†ï¼Œæˆ‘ä¹Ÿæ²¡æ‰¾åˆ°åˆ›å»ºè§†å›¾çš„å‚æ•°ã€‚ ç„¶åè¿è¡Œåˆ†æï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼šğŸ” ä½¿ç”¨ç›¸äº¤æ¨¡å¼ï¼šåªè¦å‡ ä½•ä½“ç›¸äº¤å°±ç®—é‡å ï¼ˆå¿½ç•¥é¢ç§¯é˜ˆå€¼ï¼‰

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º



âŒ åˆ†æå¤±è´¥: (psycopg.errors.UndefinedColumn) column a.qgis_id does not exist

LINE 13:Â  Â  Â  Â  Â  Â  Â JOIN clips_bbox_unified b ON a.qgis_id < b.qgis_...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^

[SQL:Â 

Â  Â  Â  Â  WITH overlapping_pairs AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  a.qgis_id as bbox_a_id,

Â  Â  Â  Â  Â  Â  Â  Â  b.qgis_id as bbox_b_id,

Â  Â  Â  Â  Â  Â  Â  Â  a.subdataset_name as subdataset_a,

Â  Â  Â  Â  Â  Â  Â  Â  b.subdataset_name as subdataset_b,

Â  Â  Â  Â  Â  Â  Â  Â  a.scene_token as scene_a,

Â  Â  Â  Â  Â  Â  Â  Â  b.scene_token as scene_b,

Â  Â  Â  Â  Â  Â  Â  Â  ST_Intersection(a.geometry, b.geometry) as overlap_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  ST_Area(ST_Intersection(a.geometry, b.geometry)) as overlap_area

Â  Â  Â  Â  Â  Â  FROM clips_bbox_unified a

Â  Â  Â  Â  Â  Â  JOIN clips_bbox_unified b ON a.qgis_id < b.qgis_id

Â  Â  Â  Â  Â  Â  WHERE ST_Intersects(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  -- ç›¸äº¤æ¨¡å¼ï¼šå¿½ç•¥é¢ç§¯é˜ˆå€¼ï¼Œåªè¦ç›¸äº¤å°±ç®—é‡å 

Â  Â  Â  Â  Â  Â  AND NOT ST_Equals(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  -- ğŸ¯ åªåˆ†æç›¸åŒåŸå¸‚çš„bboxï¼ˆæ€§èƒ½å’Œé€»è¾‘ä¼˜åŒ–ï¼‰

Â  Â  Â  Â  Â  Â  AND a.city_id = b.city_id

Â  Â  Â  Â  Â  Â  AND a.city_id IS NOT NULL

Â  Â  Â  Â  Â  Â  -- ğŸ¯ åªåˆ†æè´¨é‡åˆæ ¼çš„æ•°æ®ï¼ˆall_good=trueï¼‰

Â  Â  Â  Â  Â  Â  AND a.all_good = true

Â  Â  Â  Â  Â  Â  AND b.all_good = true

Â  Â  Â  Â  Â  Â  AND a.city_id = 'A263' AND b.city_id = 'A263'

Â  Â  Â  Â  ),

Â  Â  Â  Â  -- ğŸ”§ ä¿®å¤ï¼šä½¿ç”¨çœŸæ­£çš„ç©ºé—´è¿é€šæ€§èšç±»

Â  Â  Â  Â  overlap_clusters AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  overlap_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  overlap_area,

Â  Â  Â  Â  Â  Â  Â  Â  subdataset_a,

Â  Â  Â  Â  Â  Â  Â  Â  subdataset_b,

Â  Â  Â  Â  Â  Â  Â  Â  scene_a,

Â  Â  Â  Â  Â  Â  Â  Â  scene_b,

Â  Â  Â  Â  Â  Â  Â  Â  -- ä½¿ç”¨ ST_ClusterDBSCAN è¿›è¡Œç©ºé—´èšç±»

Â  Â  Â  Â  Â  Â  Â  Â  -- eps=0 è¡¨ç¤ºåªæœ‰ç›´æ¥ç›¸äº¤çš„å‡ ä½•ä½“æ‰å½’ä¸ºä¸€ç»„

Â  Â  Â  Â  Â  Â  Â  Â  -- minpoints=1 è¡¨ç¤ºå•ä¸ªé‡å ä¹Ÿå¯ä»¥å½¢æˆçƒ­ç‚¹

Â  Â  Â  Â  Â  Â  Â  Â  ST_ClusterDBSCAN(overlap_geometry, eps := 0, minpoints := 1) OVER() as cluster_id

Â  Â  Â  Â  Â  Â  FROM overlapping_pairs

Â  Â  Â  Â  ),

Â  Â  Â  Â  overlap_hotspots AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  cluster_id,

Â  Â  Â  Â  Â  Â  Â  Â  -- å¯¹æ¯ä¸ªèšç±»ï¼Œåˆå¹¶æ‰€æœ‰é‡å åŒºåŸŸ

Â  Â  Â  Â  Â  Â  Â  Â  ST_Union(overlap_geometry) as hotspot_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  COUNT(*) as overlap_count,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT subdataset_a) || ARRAY_AGG(DISTINCT subdataset_b) as involved_subdatasets,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT scene_a) || ARRAY_AGG(DISTINCT scene_b) as involved_scenes,

Â  Â  Â  Â  Â  Â  Â  Â  SUM(overlap_area) as total_overlap_area

Â  Â  Â  Â  Â  Â  FROM overlap_clusters

Â  Â  Â  Â  Â  Â  WHERE cluster_id IS NOT NULLÂ  -- æ’é™¤å™ªå£°ç‚¹

Â  Â  Â  Â  Â  Â  GROUP BY cluster_id

Â  Â  Â  Â  Â  Â  HAVING COUNT(*) >= 1Â  -- è‡³å°‘åŒ…å«ä¸€ä¸ªé‡å åŒºåŸŸ

Â  Â  Â  Â  )

Â  Â  Â  Â  INSERT INTO bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  (analysis_id, hotspot_rank, overlap_count, total_overlap_area,Â 

Â  Â  Â  Â  Â subdataset_count, scene_count, involved_subdatasets, involved_scenes, geometry, analysis_params)

Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  'overlap_docker_20250919_030906' as analysis_id,

Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER (ORDER BY overlap_count DESC) as hotspot_rank,

Â  Â  Â  Â  Â  Â  overlap_count,

Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_subdatasets, 1) as subdataset_count,

Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_scenes, 1) as scene_count,

Â  Â  Â  Â  Â  Â  involved_subdatasets,

Â  Â  Â  Â  Â  Â  involved_scenes,

Â  Â  Â  Â  Â  Â  hotspot_geometry as geometry,

Â  Â  Â  Â  Â  Â  '{"city_filter": "A263", "min_overlap_area": 0.0001, "top_n": 10}' as analysis_params

Â  Â  Â  Â  FROM overlap_hotspots

Â  Â  Â  Â  ORDER BY overlap_count DESC

Â  Â  Â  Â  LIMIT 10;

Â  Â  Â  Â  ]

(Background on this error at: https://sqlalche.me/e/20/f405)

Traceback (most recent call last):

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

psycopg.errors.UndefinedColumn: column a.qgis_id does not exist

LINE 13:Â  Â  Â  Â  Â  Â  Â JOIN clips_bbox_unified b ON a.qgis_id < b.qgis_...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^



The above exception was the direct cause of the following exception:



Traceback (most recent call last):

Â  File "/workspace/examples/dataset/bbox_examples/run_overlap_analysis.py", line 550, in main

Â  Â  conn.execute(text(analysis_sql))

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

Â  Â  return meth(

Â  Â  Â  Â  Â  Â ^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

Â  Â  return connection._execute_clauseelement(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

Â  Â  ret = self._execute_context(

Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context

Â  Â  return self._exec_single_context(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context

Â  Â  self._handle_dbapi_exception(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception

Â  Â  raise sqlalchemy_exception.with_traceback(exc_info[2]) from e

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

sqlalchemy.exc.ProgrammingError: (psycopg.errors.UndefinedColumn) column a.qgis_id does not exist

LINE 13:Â  Â  Â  Â  Â  Â  Â JOIN clips_bbox_unified b ON a.qgis_id < b.qgis_...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^

[SQL:Â 

Â  Â  Â  Â  WITH overlapping_pairs AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  a.qgis_id as bbox_a_id,

Â  Â  Â  Â  Â  Â  Â  Â  b.qgis_id as bbox_b_id,

Â  Â  Â  Â  Â  Â  Â  Â  a.subdataset_name as subdataset_a,

Â  Â  Â  Â  Â  Â  Â  Â  b.subdataset_name as subdataset_b,

Â  Â  Â  Â  Â  Â  Â  Â  a.scene_token as scene_a,

Â  Â  Â  Â  Â  Â  Â  Â  b.scene_token as scene_b,

Â  Â  Â  Â  Â  Â  Â  Â  ST_Intersection(a.geometry, b.geometry) as overlap_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  ST_Area(ST_Intersection(a.geometry, b.geometry)) as overlap_area

Â  Â  Â  Â  Â  Â  FROM clips_bbox_unified a

Â  Â  Â  Â  Â  Â  JOIN clips_bbox_unified b ON a.qgis_id < b.qgis_id

Â  Â  Â  Â  Â  Â  WHERE ST_Intersects(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  -- ç›¸äº¤æ¨¡å¼ï¼šå¿½ç•¥é¢ç§¯é˜ˆå€¼ï¼Œåªè¦ç›¸äº¤å°±ç®—é‡å 

Â  Â  Â  Â  Â  Â  AND NOT ST_Equals(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  -- ğŸ¯ åªåˆ†æç›¸åŒåŸå¸‚çš„bboxï¼ˆæ€§èƒ½å’Œé€»è¾‘ä¼˜åŒ–ï¼‰

Â  Â  Â  Â  Â  Â  AND a.city_id = b.city_id

Â  Â  Â  Â  Â  Â  AND a.city_id IS NOT NULL

Â  Â  Â  Â  Â  Â  -- ğŸ¯ åªåˆ†æè´¨é‡åˆæ ¼çš„æ•°æ®ï¼ˆall_good=trueï¼‰

Â  Â  Â  Â  Â  Â  AND a.all_good = true

Â  Â  Â  Â  Â  Â  AND b.all_good = true

Â  Â  Â  Â  Â  Â  AND a.city_id = 'A263' AND b.city_id = 'A263'

Â  Â  Â  Â  ),

Â  Â  Â  Â  -- ğŸ”§ ä¿®å¤ï¼šä½¿ç”¨çœŸæ­£çš„ç©ºé—´è¿é€šæ€§èšç±»

Â  Â  Â  Â  overlap_clusters AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  overlap_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  overlap_area,

Â  Â  Â  Â  Â  Â  Â  Â  subdataset_a,

Â  Â  Â  Â  Â  Â  Â  Â  subdataset_b,

Â  Â  Â  Â  Â  Â  Â  Â  scene_a,

Â  Â  Â  Â  Â  Â  Â  Â  scene_b,

Â  Â  Â  Â  Â  Â  Â  Â  -- ä½¿ç”¨ ST_ClusterDBSCAN è¿›è¡Œç©ºé—´èšç±»

Â  Â  Â  Â  Â  Â  Â  Â  -- eps=0 è¡¨ç¤ºåªæœ‰ç›´æ¥ç›¸äº¤çš„å‡ ä½•ä½“æ‰å½’ä¸ºä¸€ç»„

Â  Â  Â  Â  Â  Â  Â  Â  -- minpoints=1 è¡¨ç¤ºå•ä¸ªé‡å ä¹Ÿå¯ä»¥å½¢æˆçƒ­ç‚¹

Â  Â  Â  Â  Â  Â  Â  Â  ST_ClusterDBSCAN(overlap_geometry, eps := 0, minpoints := 1) OVER() as cluster_id

Â  Â  Â  Â  Â  Â  FROM overlapping_pairs

Â  Â  Â  Â  ),

Â  Â  Â  Â  overlap_hotspots AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  cluster_id,

Â  Â  Â  Â  Â  Â  Â  Â  -- å¯¹æ¯ä¸ªèšç±»ï¼Œåˆå¹¶æ‰€æœ‰é‡å åŒºåŸŸ

Â  Â  Â  Â  Â  Â  Â  Â  ST_Union(overlap_geometry) as hotspot_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  COUNT(*) as overlap_count,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT subdataset_a) || ARRAY_AGG(DISTINCT subdataset_b) as involved_subdatasets,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT scene_a) || ARRAY_AGG(DISTINCT scene_b) as involved_scenes,

Â  Â  Â  Â  Â  Â  Â  Â  SUM(overlap_area) as total_overlap_area

Â  Â  Â  Â  Â  Â  FROM overlap_clusters

Â  Â  Â  Â  Â  Â  WHERE cluster_id IS NOT NULLÂ  -- æ’é™¤å™ªå£°ç‚¹

Â  Â  Â  Â  Â  Â  GROUP BY cluster_id

Â  Â  Â  Â  Â  Â  HAVING COUNT(*) >= 1Â  -- è‡³å°‘åŒ…å«ä¸€ä¸ªé‡å åŒºåŸŸ

Â  Â  Â  Â  )

Â  Â  Â  Â  INSERT INTO bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  (analysis_id, hotspot_rank, overlap_count, total_overlap_area,Â 

Â  Â  Â  Â  Â subdataset_count, scene_count, involved_subdatasets, involved_scenes, geometry, analysis_params)

Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  'overlap_docker_20250919_030906' as analysis_id,

Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER (ORDER BY overlap_count DESC) as hotspot_rank,

Â  Â  Â  Â  Â  Â  overlap_count,

Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_subdatasets, 1) as subdataset_count,

Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_scenes, 1) as scene_count,

Â  Â  Â  Â  Â  Â  involved_subdatasets,

Â  Â  Â  Â  Â  Â  involved_scenes,

Â  Â  Â  Â  Â  Â  hotspot_geometry as geometry,

Â  Â  Â  Â  Â  Â  '{"city_filter": "A263", "min_overlap_area": 0.0001, "top_n": 10}' as analysis_params

Â  Â  Â  Â  FROM overlap_hotspots

Â  Â  Â  Â  ORDER BY overlap_count DESC

Â  Â  Â  Â  LIMIT 10;

Â  Â  Â  Â  ]

(Background on this error at: https://sqlalche.me/e/20/f405)
================================================================================

[143] [Unknown Time]
æ”¹å¾—ä¸å¯¹ï¼Œæˆ‘å…¶å®æƒ³çŸ¥é“å•¥æ—¶å€™å¼•å…¥çš„qgis_viewï¼Œæƒ³å›é€€ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚
================================================================================

[144] [Unknown Time]
æ”¹å¾—ä¸å¯¹ï¼Œæˆ‘å…¶å®æƒ³çŸ¥é“å•¥æ—¶å€™å¼•å…¥çš„qgis_viewï¼Œæˆ‘æƒ³å›é€€åˆ°å½“æ—¶çš„æäº¤ï¼Œå¯ä»¥å¸®æˆ‘ç¡®è®¤ä¸€äº›commitå—
================================================================================

[145] [Unknown Time]
âŒ åˆ†æå¤±è´¥: (psycopg.errors.UndefinedColumn) column a.sample_token does not exist

LINE 13: ...subdataset_name || '|' || a.scene_token || '|' || a.sample_t...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^

[SQL:Â 

Â  Â  Â  Â  WITH overlapping_pairs AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER (ORDER BY a.subdataset_name, a.scene_token, a.sample_token) as bbox_a_id,

Â  Â  Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER (ORDER BY b.subdataset_name, b.scene_token, b.sample_token) as bbox_b_id,

Â  Â  Â  Â  Â  Â  Â  Â  a.subdataset_name as subdataset_a,

Â  Â  Â  Â  Â  Â  Â  Â  b.subdataset_name as subdataset_b,

Â  Â  Â  Â  Â  Â  Â  Â  a.scene_token as scene_a,

Â  Â  Â  Â  Â  Â  Â  Â  b.scene_token as scene_b,

Â  Â  Â  Â  Â  Â  Â  Â  ST_Intersection(a.geometry, b.geometry) as overlap_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  ST_Area(ST_Intersection(a.geometry, b.geometry)) as overlap_area

Â  Â  Â  Â  Â  Â  FROM clips_bbox_unified a

Â  Â  Â  Â  Â  Â  JOIN clips_bbox_unified b ON (a.subdataset_name || '|' || a.scene_token || '|' || a.sample_token) <Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (b.subdataset_name || '|' || b.scene_token || '|' || b.sample_token)

Â  Â  Â  Â  Â  Â  WHERE ST_Intersects(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  -- ç›¸äº¤æ¨¡å¼ï¼šå¿½ç•¥é¢ç§¯é˜ˆå€¼ï¼Œåªè¦ç›¸äº¤å°±ç®—é‡å 

Â  Â  Â  Â  Â  Â  AND NOT ST_Equals(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  -- ğŸ¯ åªåˆ†æç›¸åŒåŸå¸‚çš„bboxï¼ˆæ€§èƒ½å’Œé€»è¾‘ä¼˜åŒ–ï¼‰

Â  Â  Â  Â  Â  Â  AND a.city_id = b.city_id

Â  Â  Â  Â  Â  Â  AND a.city_id IS NOT NULL

Â  Â  Â  Â  Â  Â  -- ğŸ¯ åªåˆ†æè´¨é‡åˆæ ¼çš„æ•°æ®ï¼ˆall_good=trueï¼‰

Â  Â  Â  Â  Â  Â  AND a.all_good = true

Â  Â  Â  Â  Â  Â  AND b.all_good = true

Â  Â  Â  Â  Â  Â  AND a.city_id = 'A263' AND b.city_id = 'A263'

Â  Â  Â  Â  ),

Â  Â  Â  Â  -- ğŸ”§ ä¿®å¤ï¼šä½¿ç”¨çœŸæ­£çš„ç©ºé—´è¿é€šæ€§èšç±»

Â  Â  Â  Â  overlap_clusters AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  overlap_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  overlap_area,

Â  Â  Â  Â  Â  Â  Â  Â  subdataset_a,

Â  Â  Â  Â  Â  Â  Â  Â  subdataset_b,

Â  Â  Â  Â  Â  Â  Â  Â  scene_a,

Â  Â  Â  Â  Â  Â  Â  Â  scene_b,

Â  Â  Â  Â  Â  Â  Â  Â  -- ä½¿ç”¨ ST_ClusterDBSCAN è¿›è¡Œç©ºé—´èšç±»

Â  Â  Â  Â  Â  Â  Â  Â  -- eps=0 è¡¨ç¤ºåªæœ‰ç›´æ¥ç›¸äº¤çš„å‡ ä½•ä½“æ‰å½’ä¸ºä¸€ç»„

Â  Â  Â  Â  Â  Â  Â  Â  -- minpoints=1 è¡¨ç¤ºå•ä¸ªé‡å ä¹Ÿå¯ä»¥å½¢æˆçƒ­ç‚¹

Â  Â  Â  Â  Â  Â  Â  Â  ST_ClusterDBSCAN(overlap_geometry, eps := 0, minpoints := 1) OVER() as cluster_id

Â  Â  Â  Â  Â  Â  FROM overlapping_pairs

Â  Â  Â  Â  ),

Â  Â  Â  Â  overlap_hotspots AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  cluster_id,

Â  Â  Â  Â  Â  Â  Â  Â  -- å¯¹æ¯ä¸ªèšç±»ï¼Œåˆå¹¶æ‰€æœ‰é‡å åŒºåŸŸ

Â  Â  Â  Â  Â  Â  Â  Â  ST_Union(overlap_geometry) as hotspot_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  COUNT(*) as overlap_count,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT subdataset_a) || ARRAY_AGG(DISTINCT subdataset_b) as involved_subdatasets,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT scene_a) || ARRAY_AGG(DISTINCT scene_b) as involved_scenes,

Â  Â  Â  Â  Â  Â  Â  Â  SUM(overlap_area) as total_overlap_area

Â  Â  Â  Â  Â  Â  FROM overlap_clusters

Â  Â  Â  Â  Â  Â  WHERE cluster_id IS NOT NULLÂ  -- æ’é™¤å™ªå£°ç‚¹

Â  Â  Â  Â  Â  Â  GROUP BY cluster_id

Â  Â  Â  Â  Â  Â  HAVING COUNT(*) >= 1Â  -- è‡³å°‘åŒ…å«ä¸€ä¸ªé‡å åŒºåŸŸ

Â  Â  Â  Â  )

Â  Â  Â  Â  INSERT INTO bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  (analysis_id, hotspot_rank, overlap_count, total_overlap_area,Â 

Â  Â  Â  Â  Â subdataset_count, scene_count, involved_subdatasets, involved_scenes, geometry, analysis_params)

Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  'overlap_docker_20250919_031616' as analysis_id,

Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER (ORDER BY overlap_count DESC) as hotspot_rank,

Â  Â  Â  Â  Â  Â  overlap_count,

Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_subdatasets, 1) as subdataset_count,

Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_scenes, 1) as scene_count,

Â  Â  Â  Â  Â  Â  involved_subdatasets,

Â  Â  Â  Â  Â  Â  involved_scenes,

Â  Â  Â  Â  Â  Â  hotspot_geometry as geometry,

Â  Â  Â  Â  Â  Â  '{"city_filter": "A263", "min_overlap_area": 0.0001, "top_n": 10}' as analysis_params

Â  Â  Â  Â  FROM overlap_hotspots

Â  Â  Â  Â  ORDER BY overlap_count DESC

Â  Â  Â  Â  LIMIT 10;

Â  Â  Â  Â  ]

(Background on this error at: https://sqlalche.me/e/20/f405)

Traceback (most recent call last):

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

psycopg.errors.UndefinedColumn: column a.sample_token does not exist

LINE 13: ...subdataset_name || '|' || a.scene_token || '|' || a.sample_t...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^



The above exception was the direct cause of the following exception:



Traceback (most recent call last):

Â  File "/workspace/examples/dataset/bbox_examples/run_overlap_analysis.py", line 551, in main

Â  Â  conn.execute(text(analysis_sql))

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

Â  Â  return meth(

Â  Â  Â  Â  Â  Â ^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

Â  Â  return connection._execute_clauseelement(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

Â  Â  ret = self._execute_context(

Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context

Â  Â  return self._exec_single_context(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context

Â  Â  self._handle_dbapi_exception(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception

Â  Â  raise sqlalchemy_exception.with_traceback(exc_info[2]) from e

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

sqlalchemy.exc.ProgrammingError: (psycopg.errors.UndefinedColumn) column a.sample_token does not exist

LINE 13: ...subdataset_name || '|' || a.scene_token || '|' || a.sample_t...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^

[SQL:Â 

Â  Â  Â  Â  WITH overlapping_pairs AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER (ORDER BY a.subdataset_name, a.scene_token, a.sample_token) as bbox_a_id,

Â  Â  Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER (ORDER BY b.subdataset_name, b.scene_token, b.sample_token) as bbox_b_id,

Â  Â  Â  Â  Â  Â  Â  Â  a.subdataset_name as subdataset_a,

Â  Â  Â  Â  Â  Â  Â  Â  b.subdataset_name as subdataset_b,

Â  Â  Â  Â  Â  Â  Â  Â  a.scene_token as scene_a,

Â  Â  Â  Â  Â  Â  Â  Â  b.scene_token as scene_b,

Â  Â  Â  Â  Â  Â  Â  Â  ST_Intersection(a.geometry, b.geometry) as overlap_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  ST_Area(ST_Intersection(a.geometry, b.geometry)) as overlap_area

Â  Â  Â  Â  Â  Â  FROM clips_bbox_unified a

Â  Â  Â  Â  Â  Â  JOIN clips_bbox_unified b ON (a.subdataset_name || '|' || a.scene_token || '|' || a.sample_token) <Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (b.subdataset_name || '|' || b.scene_token || '|' || b.sample_token)

Â  Â  Â  Â  Â  Â  WHERE ST_Intersects(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  -- ç›¸äº¤æ¨¡å¼ï¼šå¿½ç•¥é¢ç§¯é˜ˆå€¼ï¼Œåªè¦ç›¸äº¤å°±ç®—é‡å 

Â  Â  Â  Â  Â  Â  AND NOT ST_Equals(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  -- ğŸ¯ åªåˆ†æç›¸åŒåŸå¸‚çš„bboxï¼ˆæ€§èƒ½å’Œé€»è¾‘ä¼˜åŒ–ï¼‰

Â  Â  Â  Â  Â  Â  AND a.city_id = b.city_id

Â  Â  Â  Â  Â  Â  AND a.city_id IS NOT NULL

Â  Â  Â  Â  Â  Â  -- ğŸ¯ åªåˆ†æè´¨é‡åˆæ ¼çš„æ•°æ®ï¼ˆall_good=trueï¼‰

Â  Â  Â  Â  Â  Â  AND a.all_good = true

Â  Â  Â  Â  Â  Â  AND b.all_good = true

Â  Â  Â  Â  Â  Â  AND a.city_id = 'A263' AND b.city_id = 'A263'

Â  Â  Â  Â  ),

Â  Â  Â  Â  -- ğŸ”§ ä¿®å¤ï¼šä½¿ç”¨çœŸæ­£çš„ç©ºé—´è¿é€šæ€§èšç±»

Â  Â  Â  Â  overlap_clusters AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  overlap_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  overlap_area,

Â  Â  Â  Â  Â  Â  Â  Â  subdataset_a,

Â  Â  Â  Â  Â  Â  Â  Â  subdataset_b,

Â  Â  Â  Â  Â  Â  Â  Â  scene_a,

Â  Â  Â  Â  Â  Â  Â  Â  scene_b,

Â  Â  Â  Â  Â  Â  Â  Â  -- ä½¿ç”¨ ST_ClusterDBSCAN è¿›è¡Œç©ºé—´èšç±»

Â  Â  Â  Â  Â  Â  Â  Â  -- eps=0 è¡¨ç¤ºåªæœ‰ç›´æ¥ç›¸äº¤çš„å‡ ä½•ä½“æ‰å½’ä¸ºä¸€ç»„

Â  Â  Â  Â  Â  Â  Â  Â  -- minpoints=1 è¡¨ç¤ºå•ä¸ªé‡å ä¹Ÿå¯ä»¥å½¢æˆçƒ­ç‚¹

Â  Â  Â  Â  Â  Â  Â  Â  ST_ClusterDBSCAN(overlap_geometry, eps := 0, minpoints := 1) OVER() as cluster_id

Â  Â  Â  Â  Â  Â  FROM overlapping_pairs

Â  Â  Â  Â  ),

Â  Â  Â  Â  overlap_hotspots AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  cluster_id,

Â  Â  Â  Â  Â  Â  Â  Â  -- å¯¹æ¯ä¸ªèšç±»ï¼Œåˆå¹¶æ‰€æœ‰é‡å åŒºåŸŸ

Â  Â  Â  Â  Â  Â  Â  Â  ST_Union(overlap_geometry) as hotspot_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  COUNT(*) as overlap_count,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT subdataset_a) || ARRAY_AGG(DISTINCT subdataset_b) as involved_subdatasets,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT scene_a) || ARRAY_AGG(DISTINCT scene_b) as involved_scenes,

Â  Â  Â  Â  Â  Â  Â  Â  SUM(overlap_area) as total_overlap_area

Â  Â  Â  Â  Â  Â  FROM overlap_clusters

Â  Â  Â  Â  Â  Â  WHERE cluster_id IS NOT NULLÂ  -- æ’é™¤å™ªå£°ç‚¹

Â  Â  Â  Â  Â  Â  GROUP BY cluster_id

Â  Â  Â  Â  Â  Â  HAVING COUNT(*) >= 1Â  -- è‡³å°‘åŒ…å«ä¸€ä¸ªé‡å åŒºåŸŸ

Â  Â  Â  Â  )

Â  Â  Â  Â  INSERT INTO bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  (analysis_id, hotspot_rank, overlap_count, total_overlap_area,Â 

Â  Â  Â  Â  Â subdataset_count, scene_count, involved_subdatasets, involved_scenes, geometry, analysis_params)

Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  'overlap_docker_20250919_031616' as analysis_id,

Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER (ORDER BY overlap_count DESC) as hotspot_rank,

Â  Â  Â  Â  Â  Â  overlap_count,

Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_subdatasets, 1) as subdataset_count,

Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_scenes, 1) as scene_count,

Â  Â  Â  Â  Â  Â  involved_subdatasets,

Â  Â  Â  Â  Â  Â  involved_scenes,

Â  Â  Â  Â  Â  Â  hotspot_geometry as geometry,

Â  Â  Â  Â  Â  Â  '{"city_filter": "A263", "min_overlap_area": 0.0001, "top_n": 10}' as analysis_params

Â  Â  Â  Â  FROM overlap_hotspots

Â  Â  Â  Â  ORDER BY overlap_count DESC

Â  Â  Â  Â  LIMIT 10;

Â  Â  Â  Â  ]

(Background on this error at: https://sqlalche.me/e/20/f405)

root@82e398ebaf87:/workspace# ğŸ” ä½¿ç”¨ç›¸äº¤æ¨¡å¼ï¼šåªè¦å‡ ä½•ä½“ç›¸äº¤å°±ç®—é‡å ï¼ˆå¿½ç•¥é¢ç§¯é˜ˆå€¼ï¼‰

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º



âŒ åˆ†æå¤±è´¥: (psycopg.errors.UndefinedColumn) column a.qgis_id does not exist

LINE 13:Â  Â  Â  Â  Â  Â  Â JOIN clips_bbox_unified b ON a.qgis_id < b.qgis_...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^

[SQL:Â 

Â  Â  Â  Â  WITH overlapping_pairs AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  a.qgis_id as bbox_a_id,

Â  Â  Â  Â  Â  Â  Â  Â  b.qgis_id as bbox_b_id,

Â  Â  Â  Â  Â  Â  Â  Â  a.subdataset_name as subdataset_a,

Â  Â  Â  Â  Â  Â  Â  Â  b.subdataset_name as subdataset_b,

Â  Â  Â  Â  Â  Â  Â  Â  a.scene_token as scene_a,

Â  Â  Â  Â  Â  Â  Â  Â  b.scene_token as scene_b,

Â  Â  Â  Â  Â  Â  Â  Â  ST_Intersection(a.geometry, b.geometry) as overlap_geometry,

Â  Â  Â  Â  Â  Â  Â  Â  ST_Area(ST_Intersection(a.geometry, b.geometry)) as overlap_area

Â  Â  Â  Â  Â  Â  FROM clips_bbox_unified a

Â  Â  Â  Â  Â  Â  JOIN clips_bbox_unified b ON a.qgis_id < b.qgis_id

Â  Â  Â  Â  Â  Â  WHERE ST_Intersects(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  -- ç›¸äº¤æ¨¡å¼ï¼šå¿½ç•¥é¢ç§¯é˜ˆå€¼ï¼Œåªè¦ç›¸äº¤å°±ç®—é‡å 
================================================================================

[146] [Unknown Time]
ï¼šÂ TOP 5 é‡å çƒ­ç‚¹:

Â hotspot_rankÂ  overlap_countÂ  total_overlap_areaÂ  subdataset_countÂ  scene_count

Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  37220Â  Â  Â  Â  Â  Â  Â  0.0559Â  Â  Â  Â  Â  Â  Â  Â 289Â  Â  Â  Â  Â 4792

Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â 1783Â  Â  Â  Â  Â  Â  Â  0.0051Â  Â  Â  Â  Â  Â  Â  Â 102Â  Â  Â  Â  Â  168

Â  Â  Â  Â  Â  Â  3Â  Â  Â  Â  Â  Â 1554Â  Â  Â  Â  Â  Â  Â  0.0048Â  Â  Â  Â  Â  Â  Â  Â 111Â  Â  Â  Â  Â  172

Â  Â  Â  Â  Â  Â  4Â  Â  Â  Â  Â  Â 1292Â  Â  Â  Â  Â  Â  Â  0.0018Â  Â  Â  Â  Â  Â  Â  Â 130Â  Â  Â  Â  Â  224

Â  Â  Â  Â  Â  Â  5Â  Â  Â  Â  Â  Â 1110Â  Â  Â  Â  Â  Â  Â  0.0017Â  Â  Â  Â  Â  Â  Â  Â 113Â  Â  Â  Â  Â  160



ğŸ¨ åˆ›å»ºQGISè§†å›¾...

âœ… QGISè§†å›¾ qgis_bbox_overlap_hotspots åˆ›å»ºæˆåŠŸ



ğŸ¯ QGISå¯è§†åŒ–æŒ‡å¯¼

========================================

ğŸ“‹ æ•°æ®åº“è¿æ¥ä¿¡æ¯:

Â  Â host: local_pg

Â  Â port: 5432

Â  Â database: postgres

Â  Â username: postgres



ğŸ“Š æ¨èåŠ è½½çš„å›¾å±‚:

Â  Â 1. clips_bbox_unified - æ‰€æœ‰bboxæ•°æ®ï¼ˆåº•å›¾ï¼‰

Â  Â 2. qgis_bbox_overlap_hotspots - é‡å çƒ­ç‚¹åŒºåŸŸ



ğŸ¨ å¯è§†åŒ–å»ºè®®:

Â  Â â€¢ ä¸»é”®: qgis_id

Â  Â â€¢ å‡ ä½•åˆ—: geometry

Â  Â â€¢ æŒ‰ density_level å­—æ®µè®¾ç½®é¢œè‰²

Â  Â â€¢ æ˜¾ç¤º overlap_count æ ‡ç­¾

Â  Â â€¢ ä½¿ç”¨ analysis_id = 'overlap_docker_20250919_032542' è¿‡æ»¤



âœ… åˆ†æå®Œæˆï¼åˆ†æID: overlap_docker_20250919_032542ï¼› æœ‰å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨è§†å›¾é‡Œé¢æ²¡æœ‰çœ‹åˆ°ä»»ä½•viewï¼ŒåŒ…æ‹¬clips_bbox_unifiedï¼Œä¸Šé¢æ—¥å¿—çš„å›¾å±‚å’Œviewä¹Ÿå®Œå…¨æ²¡æœ‰ã€‚è¿™ä¸¤ä¸ªï¼š   1. clips_bbox_unified - æ‰€æœ‰bboxæ•°æ®ï¼ˆåº•å›¾ï¼‰

   2. qgis_bbox_overlap_hotspots - é‡å çƒ­ç‚¹åŒºåŸŸï¼›  clips_bbox_unified åº”è¯¥æ˜¯viewï¼Œä¸åº”è¯¥æ˜¯å®ä½“çš„å›¾å±‚ï¼Œ qgis_bbox_overlap_hotspotsåº”è¯¥æ˜¯å›¾å±‚
================================================================================

[147] [Unknown Time]
æˆ‘åªèƒ½è¿œç¨‹æµ‹è¯•è„šæœ¬ã€‚ check_database_status.pyè¿™ä¸ªimportæœ‰é—®é¢˜å•Š
================================================================================

[148] [Unknown Time]
ğŸš€ å¼€å§‹å ç½®åˆ†æ: overlap_docker_20250917_014852

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º

âœ… SQLæ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨ç»Ÿè®¡ç»“æœ...

âœ… å ç½®åˆ†æå®Œæˆï¼Œå‘ç° 0 ä¸ªé‡å çƒ­ç‚¹

âš ï¸ æœªå‘ç°é‡å çƒ­ç‚¹ï¼Œå»ºè®®:

Â  Â â€¢ é™ä½ --min-overlap-area é˜ˆå€¼

Â  Â â€¢ æ£€æŸ¥æ•°æ®æ˜¯å¦åœ¨åŒä¸€åŒºåŸŸ

Â  Â â€¢ å°è¯•ä¸åŒçš„åŸå¸‚è¿‡æ»¤æ¡ä»¶



âœ… åˆ†æå®Œæˆï¼åˆ†æID: overlap_docker_20250917_014852ï¼› æˆ‘é€‰å–äº†A263è¿™ä¸ªåŸå¸‚å·ï¼Œæœ‰9994ä¸ªbboxï¼Œä½†æ˜¯åˆ†æç»“æœæ˜¯æ— ç»“æœã€‚æˆ‘è§‰éƒ½æ¯”è¾ƒå¥‡æ€ªï¼Œè€Œä¸”è¿™ä¸ªoverlapçš„areaæ˜¯å•¥å•ä½ï¼Ÿ è¿™ä¸ªå¦‚ä½•è°ƒè¯•ï¼Ÿ è¿˜æœ‰æˆ‘è§‰å¾—è¦å‡ºä¸€ä¸ªæ¨¡å¼ï¼ˆå°½å¯èƒ½å’Œå·²æœ‰å‚æ•°å¤ç”¨ï¼‰ï¼Œåªè¦ç›¸äº¤å°±ç®—okã€‚
================================================================================

[149] [Unknown Time]
ğŸš€ å¼€å§‹å ç½®åˆ†æ: overlap_docker_20250917_014852

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º

âœ… SQLæ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨ç»Ÿè®¡ç»“æœ...

âœ… å ç½®åˆ†æå®Œæˆï¼Œå‘ç° 0 ä¸ªé‡å çƒ­ç‚¹

âš ï¸ æœªå‘ç°é‡å çƒ­ç‚¹ï¼Œå»ºè®®:

Â  Â â€¢ é™ä½ --min-overlap-area é˜ˆå€¼

Â  Â â€¢ æ£€æŸ¥æ•°æ®æ˜¯å¦åœ¨åŒä¸€åŒºåŸŸ

Â  Â â€¢ å°è¯•ä¸åŒçš„åŸå¸‚è¿‡æ»¤æ¡ä»¶



âœ… åˆ†æå®Œæˆï¼åˆ†æID: overlap_docker_20250917_014852ï¼› æˆ‘é€‰å–äº†A263è¿™ä¸ªåŸå¸‚å·ï¼Œæœ‰9994ä¸ªbboxï¼Œä½†æ˜¯åˆ†æç»“æœæ˜¯æ— ç»“æœã€‚æˆ‘è§‰å¾—ç®€åŒ–ä¸€ä¸‹ï¼Œåªè¦ç›¸äº¤å°±ç®—é‡å ï¼Œå…ˆä¸è€ƒè™‘buffer
================================================================================

[150] [Unknown Time]
ğŸš€ å¼€å§‹å ç½®åˆ†æ: overlap_docker_20250917_014852

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º

âœ… SQLæ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨ç»Ÿè®¡ç»“æœ...

âœ… å ç½®åˆ†æå®Œæˆï¼Œå‘ç° 0 ä¸ªé‡å çƒ­ç‚¹

âš ï¸ æœªå‘ç°é‡å çƒ­ç‚¹ï¼Œå»ºè®®:

Â  Â â€¢ é™ä½ --min-overlap-area é˜ˆå€¼

Â  Â â€¢ æ£€æŸ¥æ•°æ®æ˜¯å¦åœ¨åŒä¸€åŒºåŸŸ

Â  Â â€¢ å°è¯•ä¸åŒçš„åŸå¸‚è¿‡æ»¤æ¡ä»¶



âœ… åˆ†æå®Œæˆï¼åˆ†æID: overlap_docker_20250917_014852ï¼› æˆ‘é€‰å–äº†A263è¿™ä¸ªåŸå¸‚å·ï¼Œæœ‰9994ä¸ªbboxï¼Œä½†æ˜¯åˆ†æç»“æœæ˜¯æ— ç»“æœã€‚æˆ‘è§‰å¾—ç®€åŒ–ä¸€ä¸‹ï¼Œåªè¦ç›¸äº¤å°±ç®—é‡å ï¼Œå…ˆä¸è€ƒè™‘bufferï¼› 
================================================================================

[151] [Unknown Time]
æˆ‘å¦‚æœè¦æ¢å¤åˆ°å½“å‰æäº¤å¯¹åº”çš„å¯¹è¯ï¼Œåº”è¯¥è¿™ä¹ˆåš
================================================================================

[152] [Unknown Time]
ğŸš€ å¼€å§‹å ç½®åˆ†æ: overlap_docker_20250917_014852

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º

âœ… SQLæ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨ç»Ÿè®¡ç»“æœ...

âœ… å ç½®åˆ†æå®Œæˆï¼Œå‘ç° 0 ä¸ªé‡å çƒ­ç‚¹

âš ï¸ æœªå‘ç°é‡å çƒ­ç‚¹ï¼Œå»ºè®®:

Â  Â â€¢ é™ä½ --min-overlap-area é˜ˆå€¼

Â  Â â€¢ æ£€æŸ¥æ•°æ®æ˜¯å¦åœ¨åŒä¸€åŒºåŸŸ

Â  Â â€¢ å°è¯•ä¸åŒçš„åŸå¸‚è¿‡æ»¤æ¡ä»¶



âœ… åˆ†æå®Œæˆï¼åˆ†æID: overlap_docker_20250917_014852ï¼› æˆ‘é€‰å–äº†A263è¿™ä¸ªåŸå¸‚å·ï¼Œæœ‰9994ä¸ªbboxï¼Œä½†æ˜¯åˆ†æç»“æœæ˜¯æ— ç»“æœã€‚æˆ‘è§‰å¾—ç®€åŒ–ä¸€ä¸‹ï¼Œåªè¦ç›¸äº¤å°±ç®—é‡å ï¼Œå…ˆä¸è€ƒè™‘bufferï¼› 
================================================================================

[153] [Unknown Time]
çœ‹ä¸€ä¸‹è¿™ä¸ªç»Ÿä¸€è§†å›¾ï¼Œæœ€å¥½å¯ä»¥å¤ç”¨ @bbox.py ä¸­æœ€ååˆ›å»ºçš„è§†å›¾ï¼Œä¸è¦å¼•å…¥æ–°çš„qgisè§†å›¾
================================================================================

[154] [Unknown Time]
@bbox_overlap_analysis.py è¿™ä¸ªä»£ç è¿è¡Œå¥½æ…¢ï¼Œè¿˜æœ‰ä¸€ä¸ªå¥‡æ€ªçš„äº‹æƒ…ã€‚æˆ‘ç”¨navicatçœ‹è§†å›¾ï¼Œé‡Œé¢æ˜¯ç©ºçš„ï¼Œä½†æ˜¯è¿è¡Œè¿™ä¸ªä»£ç ï¼Œæ£€æŸ¥ç»Ÿä¸€è§†å›¾ï¼Œæ˜¾ç¤ºç»Ÿä¸€è§†å›¾å·²å­˜åœ¨ã€‚ ç„¶åè¿è¡Œæ—¶é—´ç‰¹åˆ«é•¿ã€‚ä¸è¦ç›´æ¥æ”¹ä»£ç ï¼Œå…ˆè®²è§£è§£å†³æ€è·¯
================================================================================

[155] [Unknown Time]
ä½ åœ¨çœ‹ä¸€ä¸‹bbox.pyé‡Œé¢æœ€ç»ˆä¹Ÿä¼šåˆ›å»ºç»Ÿä¸€è§†å›¾ã€‚è¿™ä¸ªè§†å›¾å’Œoverlapåˆ†æçš„è§†å›¾éƒ½ä¿æŒä¸€è‡´ï¼ˆä»¥bboxä¸­çš„è§†å›¾åå’Œè§†å›¾åˆ›å»ºæ–¹å¼ä¸ºä¸»ï¼‰ã€‚è¿™æ ·å°±ä¸ç”¨é¢å¤–å†åˆ›å»ºã€‚ æˆ‘å‘ç°overlapåˆ†æé‡Œé¢çš„è§†å›¾åˆ›å»ºæ—¶qgisè§†å›¾ã€‚å…ˆä¸æ”¹ä»£ç ï¼Œç¡®è®¤ä¸€ä¸‹æˆ‘ä»¬æ˜¯å¦ç†è§£ä¸€è‡´
================================================================================

[156] [Unknown Time]
ä¸å¤ªä¸€è‡´ã€‚æˆ‘ç°åœ¨ä¸éœ€è¦è§†å›¾åœ¨qgisé‡Œé¢èƒ½å¤Ÿæ‰“å¼€ã€‚ä¸ç®¡æ˜¯å“ªé‡Œï¼Œéƒ½ç»Ÿä¸€åˆ›å»ºclips_bbox_unifiedè§†å›¾
================================================================================

[157] [Unknown Time]
æ˜¯çš„
================================================================================

[158] [Unknown Time]
root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/diagnose_bbox_data.py 

ğŸ” BBoxæ•°æ®è¯Šæ–­æŠ¥å‘Š

============================================================



ğŸ“‹ 1. åˆ†è¡¨çŠ¶æ€æ£€æŸ¥

   æ€»è®¡bboxç›¸å…³è¡¨: 294

   åˆ†è¡¨æ•°é‡: 293

   åˆ†è¡¨åˆ—è¡¨:

     - clips_bbox_0303efficien_1741142185_data_analyze_s

     - clips_bbox_0516_slow_cutin_12

     - clips_bbox_0516_slow_cutin_16

     - clips_bbox_0516_slow_cutin_20

     - clips_bbox_0516_vru_cross_vague_12

     - clips_bbox_0516_vru_cross_vague_16

     - clips_bbox_0516_vru_cross_vague_20

     - clips_bbox_0529_h_cross

     - clips_bbox_0604_tanglu_merge

     - clips_bbox_0607_green_start_fast_clip_5081

     ... è¿˜æœ‰ 283 ä¸ªåˆ†è¡¨



ğŸ“Š 2. æ•°æ®é‡ç»Ÿè®¡

   clips_bbox_0303efficien_1741142185_data_analyze_s: 905 æ¡è®°å½•

   clips_bbox_0516_slow_cutin_12: 1,524 æ¡è®°å½•

   clips_bbox_0516_slow_cutin_16: 178 æ¡è®°å½•

   clips_bbox_0516_slow_cutin_20: 170 æ¡è®°å½•

   clips_bbox_0516_vru_cross_vague_12: 19,136 æ¡è®°å½•

   ... (ä»…æ˜¾ç¤ºå‰5ä¸ªè¡¨çš„æ•°æ®)

   æ ·æœ¬æ€»è®°å½•æ•°: 21,913



ğŸ” 3. ç»Ÿä¸€è§†å›¾çŠ¶æ€

   âœ… ç»Ÿä¸€è§†å›¾ clips_bbox_unified å­˜åœ¨

   ğŸ“Š è§†å›¾è®°å½•æ•°: 7,575,312

   ğŸ™ï¸ TOP 5åŸå¸‚æ•°æ®åˆ†å¸ƒ:

     A72: 702,257 æ¡è®°å½• (697,685 ä¼˜è´¨)

     A200: 646,472 æ¡è®°å½• (643,117 ä¼˜è´¨)

     A252: 562,988 æ¡è®°å½• (553,979 ä¼˜è´¨)

     A0: 368,250 æ¡è®°å½• (365,093 ä¼˜è´¨)

     A86: 307,494 æ¡è®°å½• (304,863 ä¼˜è´¨)



ğŸ’¡ 4. è¯Šæ–­å»ºè®®

   âœ… æ•°æ®çŠ¶æ€æ­£å¸¸ï¼Œå¯ä»¥è¿›è¡Œoverlapåˆ†æ

   ğŸ“ æµ‹è¯•å‘½ä»¤: python examples/dataset/bbox_examples/bbox_overlap_analysis.py --suggest-cityï¼› ä½†æ˜¯æˆ‘åœ¨navicatä¸­æ‰“å¼€ï¼Œè§†å›¾è¿˜æ˜¯ç©ºçš„ï¼Œä½†æ˜¯åœ¨navicatä¸­åˆ›å»ºæŸ¥è¯¢ï¼ŒSELECT * FROM clips_bbox_unified LIMIT 100;æ˜¯å¯ä»¥æ­£å¸¸è¿”å›çš„
================================================================================

[159] [Unknown Time]
æˆ‘ä¸è¦åˆ›å»ºç‰©åŒ–è§†å›¾ï¼ˆè¿™ä¸ªæ˜¯ä¸æ˜¯ä¼šå®é™…å ç”¨ç©ºé—´ï¼Ÿï¼‰æˆ‘å…ˆä¸çº ç»“navicatäº†ã€‚ç°åœ¨é—®é¢˜æ˜¯è¿è¡Œbbox overlapåˆ†æï¼ˆæŒ‡å®šåŸå¸‚å·ï¼Œtop10ä¸ªï¼‰ï¼Œæ—¥å¿—æ‰“å°åˆ°ç»Ÿä¸€è§†å›¾å­˜åœ¨ï¼Œåé¢å°±ä¸€ç›´ä¸å¾€åäº†
================================================================================

[160] [Unknown Time]
æˆ‘ä¸è¦åˆ›å»ºç‰©åŒ–è§†å›¾ï¼ˆè¿™ä¸ªæ˜¯ä¸æ˜¯ä¼šå®é™…å ç”¨ç©ºé—´ï¼Ÿï¼‰æˆ‘å…ˆä¸çº ç»“navicatäº†ã€‚ç°åœ¨é—®é¢˜æ˜¯è¿è¡Œbbox overlapåˆ†æï¼ˆæŒ‡å®šåŸå¸‚å·ï¼Œtop10ä¸ªï¼‰ï¼Œæ—¥å¿—æ‰“å°åˆ°ç»Ÿä¸€è§†å›¾å­˜åœ¨ï¼Œåé¢å°±ä¸€ç›´ä¸å¾€åäº†ï¼› å…ˆä¸è¦ç›´æ¥æ”¹ä»£ç ã€‚é¦–å…ˆæˆ‘æŒ‡å®šäº†city_idï¼Œæ•°é‡åº”è¯¥æ˜¯å¯æ§çš„ã€‚ç„¶ååœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œæå‡æ•ˆç‡æœ‰å“ªäº›æªæ–½ï¼Œæˆ‘ä»¬æŒ‰ç…§æœ€å°æ”¹åŠ¨çš„ç­–ç•¥ï¼Œä¸€æ­¥ä¸€æ­¥åŠ ã€‚å…ˆä¸æ”¹ä»£ç ï¼Œå¯¹é½æ–¹æ¡ˆ
================================================================================

[161] [Unknown Time]
ä½ çœ‹ä¸€ä¸‹è¿è¡Œå‚æ•°ï¼Œæœ‰ä¸€ä¸ªintersect_onlyçš„å‚æ•°ï¼Œæˆ‘å…¶å®å°±è¡Œå…ˆè¿è¡Œæ˜ç¡®ç›¸äº¤çš„ï¼Œå°±è¿”å›ï¼Œä¸ç”¨åˆ¤æ–­å¤§å°ã€‚ å½“ç„¶åˆ¤æ–­å¤§å°çš„å¯ä»¥ä¿ç•™ï¼Œé‡å¤è®¡ç®—ç›¸äº¤å¯ä»¥ä¼˜åŒ–ã€‚â€œa.id < b.id â€è¿™ä¸ªæ˜¯å•¥æ„æ€ï¼Ÿç›¸äº¤çš„æ„æ€å—ï¼Ÿå¦å¤–ï¼Œå¿…è¦çš„ç´¢å¼•å¯ä»¥è€ƒè™‘å¢åŠ ã€‚å…ˆä¸æ”¹ä»£ç ï¼Œå¯¹é½æ€è·¯ã€‚
================================================================================

[162] [Unknown Time]
ä½ æƒ³å…ˆæµ‹è¯• --intersect-only å‚æ•°å—ï¼Ÿ--å¯ä»¥ï¼›å¯¹äºç´¢å¼•åˆ›å»ºï¼Œä½ å€¾å‘äºæ‰‹åŠ¨SQLè¿˜æ˜¯ä»£ç è‡ªåŠ¨åˆ›å»ºï¼Ÿ---æ‰‹åŠ¨åˆ›å»ºï¼›
================================================================================

[163] [Unknown Time]
intersect_onlyçš„ç›¸å…³ä»£ç ä¿®æ”¹äº†å—ï¼Ÿ
================================================================================

[164] [Unknown Time]
å¼€å§‹ä¿®æ”¹æˆ‘ä»¬ä¸Šé¢è®¨è®ºçš„ï¼Œå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹
================================================================================

[165] [Unknown Time]
è¿˜æ˜¯å†run_overlap_analysis.pyä¸­åŒ…å«ï¼Œè¿è¡Œè¿™ä¸ªè„šæœ¬æ‰§è¡Œ
================================================================================

[166] [Unknown Time]
å¦å¤–ï¼Œæ‰‹åŠ¨æ”¹åˆ›å»ºç´¢å¼•çš„è„šæœ¬æ˜¯ä¸æ˜¯ä¹Ÿå¤„ç†ä¸€ä¸‹
================================================================================

[167] [Unknown Time]
[282/293] æ£€æŸ¥ clips_bbox_unified...

[283/293] æ£€æŸ¥ clips_bbox_unified_qgis...ï¼› å¡æ­»å†283è¿™æ­¥äº†ã€‚æˆ‘æƒ³æŠŠclips_bbox_unified_qgisè§†å›¾å¹²æ‰ã€‚ æˆ‘æœ‰ä¸ªé—®é¢˜å•Šï¼Œè¿™é‡Œæ£€æŸ¥ä¸ä»…æ£€æŸ¥è¡¨ï¼Œè¿˜æ£€æŸ¥è§†å›¾ï¼Œæ˜¯è¿™æ ·å—ï¼Ÿè§†å›¾åˆ›å»ºç´¢å¼•ï¼Œä¼šé¢å¤–å ç”¨ç©ºé—´å—ï¼Ÿå®Œå…¨é‡å¤çš„å ç”¨ï¼Œè¿˜æ˜¯å¢è¡¥ï¼Ÿ 
================================================================================

[168] [Unknown Time]
root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/cleanup_analysis_data.pyÂ 

Traceback (most recent call last):

Â  File "/workspace/examples/dataset/bbox_examples/cleanup_analysis_data.py", line 46, in <module>

Â  Â  from examples.dataset.bbox_examples.bbox_overlap_analysis import BBoxOverlapAnalyzer

ModuleNotFoundError: No module named 'examples'ï¼› 
================================================================================

[169] [Unknown Time]
æˆ‘åœ¨navicaté‡Œé¢è¿è¡ŒDROP VIEW IF EXISTS clips_bbox_unified_qgis CASCADE; å·²ç»è¿è¡Œ80å¤šç§’äº†ã€‚è¿™ä¸ªæ­£å¸¸å—
================================================================================

[170] [Unknown Time]
å¥½éº»çƒ¦ï¼Œè¿˜æ˜¯æ²¡æœ‰è¿è¡Œå®Œã€‚ æˆ‘æ‰‹åŠ¨åœæ­¢äº†ï¼Œç°åœ¨è¿è¡ŒSELECT * FROM clips_bbox_unified_qgis LIMIT 100ï¼Œ è¿è¡Œ1åˆ†é’Ÿä¹Ÿå‡ºä¸æ¥ã€‚æˆ‘ç°åœ¨åº”è¯¥å¦‚ä½•å¤„ç†è¿™ä¸ªè¡¨ã€‚ã€‚SELECT pid, query FROM pg_stat_activity WHERE query LIKE '%DROP VIEW%';ï¼Œ æŠ¥é”™ column â€œ%DROP VIEW%â€ does not exist
================================================================================

[171] [Unknown Time]
æŒ‰ç…§ä¸Šé¢åˆ pidï¼Œå·²ç»è§£å†³äº†ï¼ŒæˆåŠŸdropè§†å›¾äº†ã€‚ ä½†æ˜¯è¿è¡Œåˆ†æï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼šğŸš€ å¼€å§‹å ç½®åˆ†æ: overlap_docker_20250925_032447

ğŸ™ï¸ åŸå¸‚è¿‡æ»¤: A263

ğŸš€ ä½¿ç”¨å¿«é€Ÿæ¨¡å¼ï¼ˆintersect-onlyï¼‰ï¼Œå¤§å¹…æå‡æ€§èƒ½...

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º

âœ… SQLæ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨ç»Ÿè®¡ç»“æœ...

âœ… å ç½®åˆ†æå®Œæˆï¼Œå‘ç° 1 ä¸ªé‡å çƒ­ç‚¹



ğŸ“Š TOP 5 é‡å çƒ­ç‚¹:

 hotspot_rank  overlap_count  total_overlap_area  subdataset_count  scene_count

            1          67104             67104.0               343        14910



ğŸ¨ åˆ›å»ºQGISè§†å›¾...



âŒ åˆ†æå¤±è´¥: (psycopg.errors.InvalidTableDefinition) cannot change name of view column "qgis_id" to "id"

HINT:  Use ALTER VIEW ... RENAME COLUMN ... to change name of view column instead.

[SQL: 

                CREATE OR REPLACE VIEW qgis_bbox_overlap_hotspots AS

                SELECT 

                    id,

                    analysis_id,

                    hotspot_rank,

                    overlap_count,

                    total_overlap_area,

                    subdataset_count,

                    scene_count,

                    involved_subdatasets,

                    involved_scenes,

                    CASE 

                        WHEN overlap_count >= 10 THEN 'High Density'

                        WHEN overlap_count >= 5 THEN 'Medium Density'

                        ELSE 'Low Density'

                    END as density_level,

                    geometry,

                    created_at

                FROM bbox_overlap_analysis_results

                WHERE analysis_type = 'bbox_overlap'

                ORDER BY hotspot_rank;

                ]

(Background on this error at: https://sqlalche.me/e/20/f405)

Traceback (most recent call last):

  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

    self.dialect.do_execute(

  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

    cursor.execute(statement, parameters)

  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

    raise ex.with_traceback(None)

psycopg.errors.InvalidTableDefinition: cannot change name of view column "qgis_id" to "id"

HINT:  Use ALTER VIEW ... RENAME COLUMN ... to change name of view column instead.



The above exception was the direct cause of the following exception:



Traceback (most recent call last):

  File "/workspace/examples/dataset/bbox_examples/run_overlap_analysis.py", line 614, in main

    conn.execute(text(view_sql))

  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

    return meth(

           ^^^^^

  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

    return connection._execute_clauseelement(

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

    ret = self._execute_context(

          ^^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context

    return self._exec_single_context(

           ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context

    self._handle_dbapi_exception(

  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception

    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e

  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

    self.dialect.do_execute(

  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

    cursor.execute(statement, parameters)

  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

    raise ex.with_traceback(None)

sqlalchemy.exc.ProgrammingError: (psycopg.errors.InvalidTableDefinition) cannot change name of view column "qgis_id" to "id"

HINT:  Use ALTER VIEW ... RENAME COLUMN ... to change name of view column instead.

[SQL: 

                CREATE OR REPLACE VIEW qgis_bbox_overlap_hotspots AS

                SELECT 

                    id,

                    analysis_id,

                    hotspot_rank,

                    overlap_count,

                    total_overlap_area,

                    subdataset_count,

                    scene_count,

                    involved_subdatasets,

                    involved_scenes,

                    CASE 

                        WHEN overlap_count >= 10 THEN 'High Density'

                        WHEN overlap_count >= 5 THEN 'Medium Density'

                        ELSE 'Low Density'

                    END as density_level,

                    geometry,

                    created_at

                FROM bbox_overlap_analysis_results

                WHERE analysis_type = 'bbox_overlap'

                ORDER BY hotspot_rank;

                ]

(Background on this error at: https://sqlalche.me/e/20/f405)
================================================================================

[172] [Unknown Time]
hotspot_rank  overlap_count  total_overlap_area  subdataset_count  scene_count

            1          67104             67104.0               343        14910ï¼› è¿™ä¸ªåˆ†æç»“æœæ˜¯ä¸æ˜¯æœ‰ç‚¹é—®é¢˜ï¼Œå…ˆä¸æ”¹ä»£ç ï¼Œçœ‹ä¸€ä¸‹ä»£ç é‡Œé¢æ˜¯ä¸æ˜¯æœ‰æŠŠä¸€äº›é›¶æ•£çš„polygonåˆå¹¶çš„åŠ¨ä½œï¼Ÿ 
================================================================================

[173] [Unknown Time]
æˆ‘å‘ç°ä¸‹é¢çš„åˆ†æç»“æœæœ‰ç‚¹é—®é¢˜ï¼Œæ˜¯æˆ‘æƒ³ç®€å•äº†ï¼Œä¸€ä¸ªåŸå¸‚é‡Œé¢æ•°æ®çš„boxå¯èƒ½ä¼šäº’ç›¸ç›¸è¾ƒï¼Œäº’ç›¸è¿æ¥åï¼Œç»“æœå°±æ˜¯ä¸€ä¸ªåŸå¸‚ï¼Œæ‰€æœ‰polygonä¸€èµ·ç›¸äº¤äº†ã€‚æœ‰ä»€ä¹ˆå¥½æ–¹æ¡ˆå—ï¼Œå…ˆæ­¥æ”¹ä»£ç ï¼Œå…ˆè®²æ–¹æ¡ˆï¼Œç»“æœå¦‚ä¸‹ï¼šğŸ“Š TOP 5 é‡å çƒ­ç‚¹:

Â hotspot_rankÂ  overlap_countÂ  total_overlap_areaÂ  subdataset_countÂ  scene_count

Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  67104Â  Â  Â  Â  Â  Â  Â 67104.0Â  Â  Â  Â  Â  Â  Â  Â 343Â  Â  Â  Â  14910



ğŸ¨ åˆ›å»ºQGISè§†å›¾...

âœ… QGISè§†å›¾ qgis_bbox_overlap_hotspots åˆ›å»ºæˆåŠŸ



ğŸ¯ QGISå¯è§†åŒ–æŒ‡å¯¼

========================================

ğŸ“‹ æ•°æ®åº“è¿æ¥ä¿¡æ¯:

Â  Â host: local_pg

Â  Â port: 5432

Â  Â database: postgres

Â  Â username: postgres



ğŸ“Š æ¨èåŠ è½½çš„å›¾å±‚:

Â  Â 1. clips_bbox_unified - æ‰€æœ‰bboxæ•°æ®ï¼ˆåº•å›¾ï¼‰

Â  Â 2. qgis_bbox_overlap_hotspots - é‡å çƒ­ç‚¹åŒºåŸŸ



ğŸ¨ å¯è§†åŒ–å»ºè®®:

Â  Â â€¢ ä¸»é”®: id

Â  Â â€¢ å‡ ä½•åˆ—: geometry

Â  Â â€¢ æŒ‰ density_level å­—æ®µè®¾ç½®é¢œè‰²

Â  Â â€¢ æ˜¾ç¤º overlap_count æ ‡ç­¾

Â  Â â€¢ ä½¿ç”¨ analysis_id = 'overlap_docker_20250925_032837' è¿‡æ»¤



âœ… åˆ†æå®Œæˆï¼åˆ†æID: overlap_docker_20250925_032837
================================================================================

[174] [Unknown Time]
å…ˆä¸ç€æ€¥æ”¹ï¼Œæˆ‘ä»¬å†è®¨è®ºä¸€ä¸‹ã€‚èƒ½å¦ä»æ€§èƒ½ä¸Šï¼Œä¹Ÿåˆ†æä¸€ä¸‹å“ªä¸ªæ›´å¥½ï¼Ÿ è¿˜æœ‰æ¶‰åŠDBSCANï¼Œå¦‚æœæˆ‘åˆ†æçš„æ•´ä½“æ•°æ®ä¸ä¸€æ ·ï¼Œåˆ†ç±»ç»“æœå¯èƒ½ä¹Ÿä¸ä¸€æ ·ã€‚ä»ç»“æœç¨³å®šæ€§ä¸Šï¼Œä¹Ÿä¸€å¹¶åˆ†æä¸€ä¸‹
================================================================================

[175] [Unknown Time]
ç½‘æ ¼åŒ–å’Œå¯†åº¦è¿‡æ»¤æœ‰å•¥åŒºåˆ«ï¼Ÿæˆ‘æ€ä¹ˆæ„Ÿè§‰ç½‘æ ¼åŒ–å°±æ˜¯å¯†åº¦è¿‡æ»¤çš„ä¸­é—´æ­¥éª¤ï¼Ÿ
================================================================================

[176] [Unknown Time]
æˆ‘è§‰å¾—å°±æŒ‰ç…§ç½‘æ ¼åŒ–çš„æ–¹æ³•å§ï¼Œå¬ä¸Šå»åº”è¯¥æ˜¯æœ€çœæ—¶é—´çš„
================================================================================

[177] [Unknown Time]
root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/run_overlap_analysis.py --city A263 --top-n 10 --use-gridÂ 

ğŸ¯ Dockerå…¼å®¹çš„BBoxå ç½®åˆ†æ

==================================================

ğŸ”§ è„šæœ¬ä½ç½®: /workspace/examples/dataset/bbox_examples/run_overlap_analysis.py

ğŸ”§ é¡¹ç›®æ ¹ç›®å½•: /workspace/examples

ğŸ”§ Pythonè·¯å¾„:

Â  Â 0: /workspace

Â  Â 1: /workspace/examples/src

Â  Â 2: /workspace/examples

Â  Â 3: /workspace/examples/dataset/bbox_examples

Â  Â 4: /workspace/src

âœ… å¯¼å…¥æ–¹å¼: ç›´æ¥å¯¼å…¥ spdatalab



ğŸš€ ç¯å¢ƒè®¾ç½®æˆåŠŸï¼Œå¼€å§‹å¯¼å…¥æ¨¡å—...

âœ… æ‰€æœ‰æ¨¡å—å¯¼å…¥æˆåŠŸ



ğŸ“‹ åˆ†æå‚æ•°:

Â  Â åŸå¸‚è¿‡æ»¤: A263

Â  Â æœ€å°é‡å é¢ç§¯: 0.0

Â  Â è¿”å›æ•°é‡: 10

Â  Â å¼ºåˆ¶åˆ·æ–°è§†å›¾: False

Â  Â å¿«é€Ÿæ¨¡å¼: False

Â  Â ğŸ”¥ ç½‘æ ¼åŒ–åˆ†æ: True

Â  Â ğŸ“ ç½‘æ ¼å¤§å°: 500m Ã— 500m

Â  Â ğŸ“Š å¯†åº¦é˜ˆå€¼: 5 é‡å /ç½‘æ ¼



ğŸ”Œ è¿æ¥æ•°æ®åº“...

âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ



ğŸ“Š æ£€æŸ¥bboxåˆ†è¡¨...

âœ… å‘ç° 292 ä¸ªbboxåˆ†è¡¨



ğŸ” æ£€æŸ¥ç»Ÿä¸€è§†å›¾...

âœ… ç»Ÿä¸€è§†å›¾å·²å­˜åœ¨

ğŸ“Š ç»Ÿä¸€è§†å›¾åŒ…å« 7,575,312 æ¡bboxè®°å½•



ğŸ› ï¸ å‡†å¤‡åˆ†æè¡¨...

âœ… åˆ†æè¡¨å·²å­˜åœ¨



ğŸš€ å¼€å§‹å ç½®åˆ†æ: overlap_docker_20250925_034416

ğŸ™ï¸ åŸå¸‚è¿‡æ»¤: A263

ğŸ”¥ ä½¿ç”¨ç½‘æ ¼åŒ–åˆ†æï¼Œé¿å…è¿é”èšåˆé—®é¢˜...

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º



âŒ åˆ†æå¤±è´¥: (psycopg.errors.UndefinedFunction) function generate_series(double precision, double precision, integer) does not exist

LINE 20:Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â generate_series(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ^

HINT:Â  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL:Â 

Â  Â  Â  Â  Â  Â  WITH city_bbox AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- è·å–åŸå¸‚çš„è¾¹ç•Œæ¡†

Â  Â  Â  Â  Â  Â  Â  Â  SELECT ST_Envelope(ST_Union(geometry)) as city_envelope

Â  Â  Â  Â  Â  Â  Â  Â  FROM clips_bbox_unifiedÂ 

Â  Â  Â  Â  Â  Â  Â  Â  WHERE city_id = 'A263' AND all_good = true

Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  analysis_grid AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- åˆ›å»ºè§„åˆ™ç½‘æ ¼è¦†ç›–åŸå¸‚åŒºåŸŸ

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER() as grid_id,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ST_MakeEnvelope(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  x, y,Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  x + 500, y + 500,Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  4326

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) as grid_geom

Â  Â  Â  Â  Â  Â  Â  Â  FROM city_bbox,

Â  Â  Â  Â  Â  Â  Â  Â  LATERAL (

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generate_series(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  floor(ST_XMin(city_envelope) / 500) * 500::int,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ceil(ST_XMax(city_envelope) / 500) * 500::int,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  500

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) as x

Â  Â  Â  Â  Â  Â  Â  Â  ) x_series,

Â  Â  Â  Â  Â  Â  Â  Â  LATERAL (

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generate_series(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  floor(ST_YMin(city_envelope) / 500) * 500::int,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ceil(ST_YMax(city_envelope) / 500) * 500::int,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  500

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) as y

Â  Â  Â  Â  Â  Â  Â  Â  ) y_series

Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  overlap_pairs AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- è®¡ç®—é‡å å¯¹ï¼ˆä¼˜åŒ–ç‰ˆï¼‰

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  a.id as bbox_a_id,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.id as bbox_b_id,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  a.subdataset_name as subdataset_a,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.subdataset_name as subdataset_b,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  a.scene_token as scene_a,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.scene_token as scene_b,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ST_Intersection(a.geometry, b.geometry) as overlap_geom

Â  Â  Â  Â  Â  Â  Â  Â  FROM clips_bbox_unified a

Â  Â  Â  Â  Â  Â  Â  Â  JOIN clips_bbox_unified b ON a.id < b.id

Â  Â  Â  Â  Â  Â  Â  Â  WHERE a.city_id = 'A263' AND b.city_id = 'A263'

Â  Â  Â  Â  Â  Â  Â  Â  AND a.all_good = true AND b.all_good = true

Â  Â  Â  Â  Â  Â  Â  Â  AND a.geometry && b.geometryÂ  -- å¿«é€Ÿè¾¹ç•Œæ¡†æ£€æŸ¥

Â  Â  Â  Â  Â  Â  Â  Â  AND ST_Intersects(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  Â  Â  AND NOT ST_Equals(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  grid_overlap_stats AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- ç»Ÿè®¡æ¯ä¸ªç½‘æ ¼å†…çš„é‡å æƒ…å†µ

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  g.grid_id,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  g.grid_geom,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  COUNT(op.overlap_geom) as overlap_count_in_grid,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT op.subdataset_a) || ARRAY_AGG(DISTINCT op.subdataset_b) as involved_subdatasets,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT op.scene_a) || ARRAY_AGG(DISTINCT op.scene_b) as involved_scenes,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  CASEÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  WHEN False THEN COUNT(op.overlap_geom)::float

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ELSE COALESCE(SUM(ST_Area(op.overlap_geom)), 0)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  END as total_overlap_area

Â  Â  Â  Â  Â  Â  Â  Â  FROM analysis_grid g

Â  Â  Â  Â  Â  Â  Â  Â  LEFT JOIN overlap_pairs op ON ST_Intersects(g.grid_geom, op.overlap_geom)

Â  Â  Â  Â  Â  Â  Â  Â  GROUP BY g.grid_id, g.grid_geom

Â  Â  Â  Â  Â  Â  Â  Â  HAVING COUNT(op.overlap_geom) >= 5

Â  Â  Â  Â  Â  Â  )

Â  Â  Â  Â  Â  Â  INSERT INTO bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  Â  Â  (analysis_id, hotspot_rank, overlap_count, total_overlap_area,Â 

Â  Â  Â  Â  Â  Â  Â subdataset_count, scene_count, involved_subdatasets, involved_scenes, geometry, analysis_params)

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  'overlap_docker_20250925_034416' as analysis_id,

Â  Â  Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER (ORDER BY overlap_count_in_grid DESC) as hotspot_rank,

Â  Â  Â  Â  Â  Â  Â  Â  overlap_count_in_grid as overlap_count,

Â  Â  Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_subdatasets, 1) as subdataset_count,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_scenes, 1) as scene_count,

Â  Â  Â  Â  Â  Â  Â  Â  involved_subdatasets,

Â  Â  Â  Â  Â  Â  Â  Â  involved_scenes,

Â  Â  Â  Â  Â  Â  Â  Â  grid_geom as geometry,

Â  Â  Â  Â  Â  Â  Â  Â  '{"city_filter": "A263", "grid_size": 500, "density_threshold": 5, "intersect_only": False}' as analysis_params

Â  Â  Â  Â  Â  Â  FROM grid_overlap_stats

Â  Â  Â  Â  Â  Â  ORDER BY overlap_count_in_grid DESC

Â  Â  Â  Â  Â  Â  LIMIT 10;

Â  Â  Â  Â  Â  Â  ]

(Background on this error at: https://sqlalche.me/e/20/f405)

Traceback (most recent call last):

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

psycopg.errors.UndefinedFunction: function generate_series(double precision, double precision, integer) does not exist

LINE 20:Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â generate_series(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ^

HINT:Â  No function matches the given name and argument types. You might need to add explicit type casts.



The above exception was the direct cause of the following exception:



Traceback (most recent call last):

Â  File "/workspace/examples/dataset/bbox_examples/run_overlap_analysis.py", line 653, in main

Â  Â  conn.execute(text(analysis_sql))

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

Â  Â  return meth(

Â  Â  Â  Â  Â  Â ^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

Â  Â  return connection._execute_clauseelement(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

Â  Â  ret = self._execute_context(

Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context

Â  Â  return self._exec_single_context(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context

Â  Â  self._handle_dbapi_exception(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception

Â  Â  raise sqlalchemy_exception.with_traceback(exc_info[2]) from e

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

sqlalchemy.exc.ProgrammingError: (psycopg.errors.UndefinedFunction) function generate_series(double precision, double precision, integer) does not exist

LINE 20:Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â generate_series(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ^

HINT:Â  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL:Â 

Â  Â  Â  Â  Â  Â  WITH city_bbox AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- è·å–åŸå¸‚çš„è¾¹ç•Œæ¡†

Â  Â  Â  Â  Â  Â  Â  Â  SELECT ST_Envelope(ST_Union(geometry)) as city_envelope

Â  Â  Â  Â  Â  Â  Â  Â  FROM clips_bbox_unifiedÂ 

Â  Â  Â  Â  Â  Â  Â  Â  WHERE city_id = 'A263' AND all_good = true

Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  analysis_grid AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- åˆ›å»ºè§„åˆ™ç½‘æ ¼è¦†ç›–åŸå¸‚åŒºåŸŸ

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER() as grid_id,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ST_MakeEnvelope(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  x, y,Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  x + 500, y + 500,Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  4326

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) as grid_geom

Â  Â  Â  Â  Â  Â  Â  Â  FROM city_bbox,

Â  Â  Â  Â  Â  Â  Â  Â  LATERAL (

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generate_series(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  floor(ST_XMin(city_envelope) / 500) * 500::int,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ceil(ST_XMax(city_envelope) / 500) * 500::int,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  500

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) as x

Â  Â  Â  Â  Â  Â  Â  Â  ) x_series,

Â  Â  Â  Â  Â  Â  Â  Â  LATERAL (

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generate_series(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  floor(ST_YMin(city_envelope) / 500) * 500::int,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ceil(ST_YMax(city_envelope) / 500) * 500::int,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  500

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) as y

Â  Â  Â  Â  Â  Â  Â  Â  ) y_series

Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  overlap_pairs AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- è®¡ç®—é‡å å¯¹ï¼ˆä¼˜åŒ–ç‰ˆï¼‰

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  a.id as bbox_a_id,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.id as bbox_b_id,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  a.subdataset_name as subdataset_a,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.subdataset_name as subdataset_b,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  a.scene_token as scene_a,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.scene_token as scene_b,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ST_Intersection(a.geometry, b.geometry) as overlap_geom

Â  Â  Â  Â  Â  Â  Â  Â  FROM clips_bbox_unified a

Â  Â  Â  Â  Â  Â  Â  Â  JOIN clips_bbox_unified b ON a.id < b.id

Â  Â  Â  Â  Â  Â  Â  Â  WHERE a.city_id = 'A263' AND b.city_id = 'A263'

Â  Â  Â  Â  Â  Â  Â  Â  AND a.all_good = true AND b.all_good = true

Â  Â  Â  Â  Â  Â  Â  Â  AND a.geometry && b.geometryÂ  -- å¿«é€Ÿè¾¹ç•Œæ¡†æ£€æŸ¥

Â  Â  Â  Â  Â  Â  Â  Â  AND ST_Intersects(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  Â  Â  AND NOT ST_Equals(a.geometry, b.geometry)

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  grid_overlap_stats AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- ç»Ÿè®¡æ¯ä¸ªç½‘æ ¼å†…çš„é‡å æƒ…å†µ

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  g.grid_id,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  g.grid_geom,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  COUNT(op.overlap_geom) as overlap_count_in_grid,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT op.subdataset_a) || ARRAY_AGG(DISTINCT op.subdataset_b) as involved_subdatasets,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT op.scene_a) || ARRAY_AGG(DISTINCT op.scene_b) as involved_scenes,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  CASEÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  WHEN False THEN COUNT(op.overlap_geom)::float

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ELSE COALESCE(SUM(ST_Area(op.overlap_geom)), 0)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  END as total_overlap_area

Â  Â  Â  Â  Â  Â  Â  Â  FROM analysis_grid g

Â  Â  Â  Â  Â  Â  Â  Â  LEFT JOIN overlap_pairs op ON ST_Intersects(g.grid_geom, op.overlap_geom)

Â  Â  Â  Â  Â  Â  Â  Â  GROUP BY g.grid_id, g.grid_geom

Â  Â  Â  Â  Â  Â  Â  Â  HAVING COUNT(op.overlap_geom) >= 5

Â  Â  Â  Â  Â  Â  )

Â  Â  Â  Â  Â  Â  INSERT INTO bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  Â  Â  (analysis_id, hotspot_rank, overlap_count, total_overlap_area,Â 

Â  Â  Â  Â  Â  Â  Â subdataset_count, scene_count, involved_subdatasets, involved_scenes, geometry, analysis_params)

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  'overlap_docker_20250925_034416' as analysis_id,

Â  Â  Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER (ORDER BY overlap_count_in_grid DESC) as hotspot_rank,

Â  Â  Â  Â  Â  Â  Â  Â  overlap_count_in_grid as overlap_count,

Â  Â  Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_subdatasets, 1) as subdataset_count,

Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_LENGTH(involved_scenes, 1) as scene_count,

Â  Â  Â  Â  Â  Â  Â  Â  involved_subdatasets,

Â  Â  Â  Â  Â  Â  Â  Â  involved_scenes,

Â  Â  Â  Â  Â  Â  Â  Â  grid_geom as geometry,

Â  Â  Â  Â  Â  Â  Â  Â  '{"city_filter": "A263", "grid_size": 500, "density_threshold": 5, "intersect_only": False}' as analysis_params

Â  Â  Â  Â  Â  Â  FROM grid_overlap_stats

Â  Â  Â  Â  Â  Â  ORDER BY overlap_count_in_grid DESC

Â  Â  Â  Â  Â  Â  LIMIT 10;

Â  Â  Â  Â  Â  Â  ]

(Background on this error at: https://sqlalche.me/e/20/f405)
================================================================================

[178] [Unknown Time]
root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/run_overlap_analysis.py --city A263 --top-n 10 --use-gridÂ  --intersect-only

ğŸ“Š TOP 5 é‡å çƒ­ç‚¹:

Â hotspot_rankÂ  overlap_countÂ  total_overlap_areaÂ  subdataset_countÂ  scene_count

Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  67104Â  Â  Â  Â  Â  Â  Â 67104.0Â  Â  Â  Â  Â  Â  Â  Â 343Â  Â  Â  Â  14910



è¿™ä¸ªç»“æœæ„Ÿè§‰ä¸å¤ªå¯¹ï¼Œæ¯”ä¸ç”¨--use-gridä¹‹å‰è¿˜ä¸å¦‚ï¼ˆä¹‹å‰æ˜¯æœ‰ä¸€ä¸ªç‰¹åˆ«å¤§ï¼Œç„¶åä¼šæœ‰é›¶æ˜Ÿå‡ ä¸ªå°patchï¼Œè¿ç»­ç›¸äº¤æœ‰è¾¹ç•Œï¼‰ï¼› å…ˆä¸ç”¨æ”¹ä»£ç ï¼Œå…ˆåˆ†æä¸€ä¸‹æ½œåœ¨çš„é—®é¢˜åœ¨å“ªé‡Œ
================================================================================

[179] [Unknown Time]
æˆ‘è§‰å¾—æŒ‰ç…§åº¦åˆ†éš”ï¼Œåº”è¯¥æ˜¯è®¡ç®—é‡æœ€å°çš„ã€‚æˆ‘å»ºè®®å§use-gridå˜æˆé»˜è®¤çš„åˆ†ææ–¹æ³•ã€‚è¿˜æœ‰intersect-onlyä¹Ÿæ˜¯é»˜è®¤ã€‚ ç„¶ååˆ†æçš„è·ç¦»æ”¹æˆ200må¯¹åº”çš„degree
================================================================================

[180] [Unknown Time]
æˆ‘è§‰å¾—ä¸è¦ä¿ç•™ä¼ ç»Ÿæ¨¡å¼äº†å‘€ã€‚ è€Œä¸”ä¹Ÿæ²¡æœ‰æ‰€è°“çš„ä¼ ç»Ÿæ¨¡å¼ï¼Œåªæ˜¯åœ¨ç›¸äº¤çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ç›¸äº¤é¢ç§¯çš„é˜ˆå€¼ã€‚è¿™ä¸ªåªæ˜¯å¢è¡¥é¡¹ã€‚è¯·ä½ æŠŠæ€ä¹ˆæ”¹è·Ÿæˆ‘åŒæ­¥å®Œæˆï¼Œç„¶åå†å¼€å§‹æ”¹ã€‚
================================================================================

[181] [Unknown Time]
å¯ä»¥ï¼Œæ³¨æ„run_overlap_analysisä¹ŸåŒæ­¥ä¸€èµ·ä¿®æ”¹
================================================================================

[182] [Unknown Time]
æˆ‘è§‰å¾—æŒ‰ç…§åº¦åˆ†éš”ï¼Œåº”è¯¥æ˜¯è®¡ç®—é‡æœ€å°çš„ã€‚æˆ‘å»ºè®®å§use-gridå˜æˆé»˜è®¤çš„åˆ†ææ–¹æ³•ã€‚è¿˜æœ‰intersect-onlyä¹Ÿæ˜¯é»˜è®¤ã€‚ ç„¶ååˆ†æçš„è·ç¦»æ”¹æˆ200må¯¹åº”çš„degreeï¼›æˆ‘è§‰å¾—ä¸è¦ä¿ç•™ä¼ ç»Ÿæ¨¡å¼äº†å‘€ã€‚ è€Œä¸”ä¹Ÿæ²¡æœ‰æ‰€è°“çš„ä¼ ç»Ÿæ¨¡å¼ï¼Œåªæ˜¯åœ¨ç›¸äº¤çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ç›¸äº¤é¢ç§¯çš„é˜ˆå€¼ã€‚è¿™ä¸ªåªæ˜¯å¢è¡¥é¡¹ã€‚è¯·ä½ æŠŠæ€ä¹ˆæ”¹è·Ÿæˆ‘åŒæ­¥å®Œæˆï¼Œç„¶åå†å¼€å§‹æ”¹ã€‚å¦å¤–ä¸è¦é¢å¤–å†æä¸ªcalcutae-areaå‚æ•°ï¼Œå°±å¤ç”¨min-overlap-areaå°±è¡Œ
================================================================================

[183] [Unknown Time]
å¯ä»¥
================================================================================

[184] [Unknown Time]
@bbox.py @bbox_overlap_analysis.py è¿™é‡Œéƒ½ç”¨åˆ°äº†ç»Ÿä¸€è§†å›¾ã€‚ä½†æ˜¯è¿™ä¸ªè§†å›¾æœ‰å‡ ä¸ªé—®é¢˜ï¼ŒåŠ è½½æµè§ˆçš„å‹åŠ›æ¯”è¾ƒå¤§ã€‚æ˜¯ä¸æ˜¯é™¤äº†è¿™ä¸ªç»Ÿä¸€è§†å›¾å¤–ï¼Œåˆ›å»ºæŒ‰ç…§åŸå¸‚å·çš„è§†å›¾ï¼Ÿåœ¨qgisé‡Œé¢æµè§ˆï¼Ÿ æˆ‘ä¸çŸ¥é“è¿™ä¸ªæƒ³æ³•é è°±å—ï¼Ÿä¸è¦å…ˆæ”¹ä»£ç ï¼Œå…ˆè®¨è®ºä¸€ä¸‹
================================================================================

[185] [Unknown Time]
æˆ‘å°è¯•ç”¨ç½‘æ ¼åŒ–åˆ†æï¼Œ0.002Â°çš„å¤§å°ï¼Œå¿«é€Ÿç›¸äº¤çš„æ¨¡å¼è¿›è¡Œåˆ†æï¼Œä¼¼ä¹åˆå¡æ­»äº†ã€‚è¿™ä¸ªä¼šæ¯”ä»¥å‰æ…¢å¾ˆå¤šå—ï¼Ÿ
================================================================================

[186] [Unknown Time]
æˆ‘æ”¹grid-sizeä¹‹åï¼ŒæŠ¥æå‡ï¼Œé¢„è®¡ç½‘æ ¼æ•°é‡ä¸º19035.0ä¸ªï¼Œç½‘æ ¼æ•°é‡è¿‡å¤šã€‚æˆ‘å…¶å®æœ‰ç‚¹æƒ³ä¸æ¸…æ¥šã€‚å› ä¸ºbboxæ˜¯boxï¼Œå…¶å®çœ‹è¿™ä¸ªboxå½’å±å“ªä¸ªgridï¼Œæ„Ÿè§‰å°±æ•´é™¤å°±å¯ä»¥äº†ï¼Œä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆå¤æ‚ï¼Ÿæ•ˆç‡è¿™ä¹ˆä½ï¼Ÿ å…ˆä¸æ”¹ä»£ç ï¼Œå…ˆåˆ†æä¸€ä¸‹ã€‚
================================================================================

[187] [Unknown Time]
å¯ä»¥å•Šï¼Œå…ˆæ”¹ä¸€ä¸‹å§
================================================================================

[188] [Unknown Time]
æˆ‘ç”¨æ–°çš„æ–¹å¼åœ¨åˆ†æäº†ï¼Œä½†æ˜¯è¿‡äº†ä¸€ä¼šä¹Ÿè¿˜æ²¡æœ‰è·‘å‡ºæ¥ï¼šroot@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/run_overlap_analysis.py --city A263 --top-n 10 --grid-size 0.01

ğŸ¯ Dockerå…¼å®¹çš„BBoxå ç½®åˆ†æ

==================================================

ğŸ”§ è„šæœ¬ä½ç½®: /workspace/examples/dataset/bbox_examples/run_overlap_analysis.py

ğŸ”§ é¡¹ç›®æ ¹ç›®å½•: /workspace/examples

ğŸ”§ Pythonè·¯å¾„:

Â  Â 0: /workspace

Â  Â 1: /workspace/examples/src

Â  Â 2: /workspace/examples

Â  Â 3: /workspace/examples/dataset/bbox_examples

Â  Â 4: /workspace/src

âœ… å¯¼å…¥æ–¹å¼: ç›´æ¥å¯¼å…¥ spdatalab



ğŸš€ ç¯å¢ƒè®¾ç½®æˆåŠŸï¼Œå¼€å§‹å¯¼å…¥æ¨¡å—...

âœ… æ‰€æœ‰æ¨¡å—å¯¼å…¥æˆåŠŸ



ğŸ“‹ åˆ†æå‚æ•°:

Â  Â åŸå¸‚è¿‡æ»¤: A263

Â  Â è¿”å›æ•°é‡: 10

Â  Â å¼ºåˆ¶åˆ·æ–°è§†å›¾: False

Â  Â ğŸ”¥ ç½‘æ ¼åŒ–åˆ†æ: å·²å¯ç”¨ï¼ˆé»˜è®¤ï¼‰

Â  Â ğŸ“ ç½‘æ ¼å¤§å°: 0.01Â° Ã— 0.01Â° (çº¦200mÃ—200m)

Â  Â ğŸ“Š å¯†åº¦é˜ˆå€¼: 5 é‡å /ç½‘æ ¼

Â  Â ğŸ¯ åˆ†ææ¨¡å¼: å¿«é€Ÿç›¸äº¤æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰



ğŸ”Œ è¿æ¥æ•°æ®åº“...

âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ



ğŸ“Š æ£€æŸ¥bboxåˆ†è¡¨...

âœ… å‘ç° 292 ä¸ªbboxåˆ†è¡¨



ğŸ” æ£€æŸ¥ç»Ÿä¸€è§†å›¾...

âœ… ç»Ÿä¸€è§†å›¾å·²å­˜åœ¨

ğŸ“Š ç»Ÿä¸€è§†å›¾åŒ…å« 7,575,312 æ¡bboxè®°å½•



ğŸ› ï¸ å‡†å¤‡åˆ†æè¡¨...

âœ… åˆ†æè¡¨å·²å­˜åœ¨



ğŸš€ å¼€å§‹å ç½®åˆ†æ: overlap_docker_20250925_063838

ğŸ™ï¸ åŸå¸‚è¿‡æ»¤: A263

ğŸ”¥ ä½¿ç”¨ç½‘æ ¼åŒ–åˆ†æï¼Œé¿å…è¿é”èšåˆé—®é¢˜...

ğŸ“ åŸå¸‚èŒƒå›´: 1.4068Â° Ã— 1.3447Â°

ğŸ“¦ bboxæ•°é‡: 11,235 ä¸ª

ğŸ“Š ç½‘æ ¼å¤§å°: 0.01Â° Ã— 0.01Â° (çº¦200mÃ—200m)

ğŸ’¡ æ–°æ–¹æ³•ï¼šåªä¸ºæœ‰é‡å çš„åŒºåŸŸç”Ÿæˆç½‘æ ¼ï¼Œé¿å…ç©ºç½‘æ ¼è®¡ç®—

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º
================================================================================

[189] [Unknown Time]
æˆ‘ç”¨æ–°çš„æ–¹å¼åœ¨åˆ†æäº†ï¼Œä½†æ˜¯è¿‡äº†ä¸€ä¼šä¹Ÿè¿˜æ²¡æœ‰è·‘å‡ºæ¥ï¼šroot@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/run_overlap_analysis.py --city A263 --top-n 10 --grid-size 0.01

ğŸ¯ Dockerå…¼å®¹çš„BBoxå ç½®åˆ†æ

==================================================

ğŸ”§ è„šæœ¬ä½ç½®: /workspace/examples/dataset/bbox_examples/run_overlap_analysis.py

ğŸ”§ é¡¹ç›®æ ¹ç›®å½•: /workspace/examples

ğŸ”§ Pythonè·¯å¾„:

Â  Â 0: /workspace

Â  Â 1: /workspace/examples/src

Â  Â 2: /workspace/examples

Â  Â 3: /workspace/examples/dataset/bbox_examples

Â  Â 4: /workspace/src

âœ… å¯¼å…¥æ–¹å¼: ç›´æ¥å¯¼å…¥ spdatalab



ğŸš€ ç¯å¢ƒè®¾ç½®æˆåŠŸï¼Œå¼€å§‹å¯¼å…¥æ¨¡å—...

âœ… æ‰€æœ‰æ¨¡å—å¯¼å…¥æˆåŠŸ



ğŸ“‹ åˆ†æå‚æ•°:

Â  Â åŸå¸‚è¿‡æ»¤: A263

Â  Â è¿”å›æ•°é‡: 10

Â  Â å¼ºåˆ¶åˆ·æ–°è§†å›¾: False

Â  Â ğŸ”¥ ç½‘æ ¼åŒ–åˆ†æ: å·²å¯ç”¨ï¼ˆé»˜è®¤ï¼‰

Â  Â ğŸ“ ç½‘æ ¼å¤§å°: 0.01Â° Ã— 0.01Â° (çº¦200mÃ—200m)

Â  Â ğŸ“Š å¯†åº¦é˜ˆå€¼: 5 é‡å /ç½‘æ ¼

Â  Â ğŸ¯ åˆ†ææ¨¡å¼: å¿«é€Ÿç›¸äº¤æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰



ğŸ”Œ è¿æ¥æ•°æ®åº“...

âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ



ğŸ“Š æ£€æŸ¥bboxåˆ†è¡¨...

âœ… å‘ç° 292 ä¸ªbboxåˆ†è¡¨



ğŸ” æ£€æŸ¥ç»Ÿä¸€è§†å›¾...

âœ… ç»Ÿä¸€è§†å›¾å·²å­˜åœ¨

ğŸ“Š ç»Ÿä¸€è§†å›¾åŒ…å« 7,575,312 æ¡bboxè®°å½•



ğŸ› ï¸ å‡†å¤‡åˆ†æè¡¨...

âœ… åˆ†æè¡¨å·²å­˜åœ¨



ğŸš€ å¼€å§‹å ç½®åˆ†æ: overlap_docker_20250925_063838

ğŸ™ï¸ åŸå¸‚è¿‡æ»¤: A263

ğŸ”¥ ä½¿ç”¨ç½‘æ ¼åŒ–åˆ†æï¼Œé¿å…è¿é”èšåˆé—®é¢˜...

ğŸ“ åŸå¸‚èŒƒå›´: 1.4068Â° Ã— 1.3447Â°

ğŸ“¦ bboxæ•°é‡: 11,235 ä¸ª

ğŸ“Š ç½‘æ ¼å¤§å°: 0.01Â° Ã— 0.01Â° (çº¦200mÃ—200m)

ğŸ’¡ æ–°æ–¹æ³•ï¼šåªä¸ºæœ‰é‡å çš„åŒºåŸŸç”Ÿæˆç½‘æ ¼ï¼Œé¿å…ç©ºç½‘æ ¼è®¡ç®—

âš¡ æ‰§è¡Œç©ºé—´å ç½®åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º âœ… SQLæ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨ç»Ÿè®¡ç»“æœ...

âœ… å ç½®åˆ†æå®Œæˆï¼Œå‘ç° 10 ä¸ªé‡å çƒ­ç‚¹



ğŸ“Š TOP 5 é‡å çƒ­ç‚¹:

Â hotspot_rankÂ  overlap_countÂ  total_overlap_areaÂ  subdataset_countÂ  scene_count

Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â 2989Â  Â  Â  Â  Â  Â  Â  2989.0Â  Â  Â  Â  Â  Â  Â  Â 153Â  Â  Â  Â  Â  302

Â  Â  Â  Â  Â  Â  2Â  Â  Â  Â  Â  Â 2975Â  Â  Â  Â  Â  Â  Â  2975.0Â  Â  Â  Â  Â  Â  Â  Â 186Â  Â  Â  Â  Â  408

Â  Â  Â  Â  Â  Â  3Â  Â  Â  Â  Â  Â 2803Â  Â  Â  Â  Â  Â  Â  2803.0Â  Â  Â  Â  Â  Â  Â  Â 155Â  Â  Â  Â  Â  322

Â  Â  Â  Â  Â  Â  4Â  Â  Â  Â  Â  Â 2155Â  Â  Â  Â  Â  Â  Â  2155.0Â  Â  Â  Â  Â  Â  Â  Â  73Â  Â  Â  Â  Â  190

Â  Â  Â  Â  Â  Â  5Â  Â  Â  Â  Â  Â 2155Â  Â  Â  Â  Â  Â  Â  2155.0Â  Â  Â  Â  Â  Â  Â  Â 176Â  Â  Â  Â  Â  293ï¼›  æœ‰ç»“æœäº†ï¼Œ æœ‰å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘çœ‹åˆæœ‰11234ä¸ªbboxï¼Œè¿™ä¸ªéœ€è¦æœ‰å…·ä½“æœ‰1wå¤šä¸ªbboxå—ï¼Ÿ èƒ½ä¸èƒ½å†è¿›ä¸€æ­¥ç®€åŒ–ä¸€ä¸‹ï¼Ÿå› ä¸ºæ•°æ®éƒ½æ˜¯bboxï¼Œä¸èƒ½é«˜æ•ˆåœ°ã€ç‹¬ç«‹åœ°snaptogridå—ï¼Ÿç„¶åç»Ÿè®¡ä¸€ä¸‹ï¼Ÿ æˆ‘ä¸çŸ¥é“è¿™æ ·ç®€åŒ–ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼›ä¸ç”¨æ”¹ä»£ç ã€‚ 
================================================================================

[190] [Unknown Time]
ST_XMin(geometry) è¿™ä¸ªgeometryä¸æ˜¯ä¸€èˆ¬çš„polygonï¼Œè¿˜æ˜¯bboxã€‚è¿™é‡Œæœ‰ä¼˜åŒ–ç©ºé—´å—ï¼Ÿpgé‡Œé¢å­˜å‚¨bboxæœ‰ä»€ä¹ˆç‰¹å®šçš„æ–¹æ³•å—ï¼Ÿ
================================================================================

[191] [Unknown Time]
çš„ç¡®æ˜¯è½´å¯¹ç§°çš„çŸ©å½¢ï¼› è¿™ä¸ªå…ˆä¸ç€æ€¥æ”¹ã€‚å…ˆæŠŠåˆšåˆšsnaptogridçš„è¿™ä¸ªå°½å¿«ä¿®æ”¹ä¸€èˆ¬ï¼›å¢åŠ åˆ†æè€—æ—¶çš„æ‰“å°
================================================================================

[192] [Unknown Time]
è¿è¡Œæ­£å¸¸äº†ï¼Œè€—æ—¶ä¹Ÿå¯æ¥å—ã€‚é‡æ–°å®¡è§†ä¸€ä¸‹ @bbox_overlap_analysis.py  @run_overlap_analysis.py è¿™ä¸¤ä¸ªä»£ç ï¼Œæœ‰æ²¡æœ‰éœ€è¦å»é‡ï¼Œlegacyä»£ç éœ€è¦å»é‡çš„ã€‚ä¸æ˜¯å¤§è§„æ¨¡çš„é‡æ„ï¼Œä½†æ˜¯å¯ä»¥æŒ‰ç…§é•¿æœŸç»´æŠ¤çš„ä»£ç æ¨¡å—çš„æ ‡å‡†ï¼Œå®¡è§†ä¸€ä¸‹ä»£ç ã€‚ åŒ…æ‹¬é‡Œé¢æœ‰ä¸€äº›æ— å¿…è¦çš„æ‰“å°ï¼ˆä»€ä¹ˆç†è®ºæå‡å¤šå°‘å€ï¼‰
================================================================================

[193] [Unknown Time]
è¿è¡Œæ­£å¸¸äº†ï¼Œè€—æ—¶ä¹Ÿå¯æ¥å—ã€‚é‡æ–°å®¡è§†ä¸€ä¸‹ @bbox_overlap_analysis.py  @run_overlap_analysis.py è¿™ä¸¤ä¸ªä»£ç ï¼Œå¦å¤–ä¹Ÿå®¡è§†ä¸€ä¸‹ bbox_examplesç›®å½•ä¸‹çš„æ‰€æœ‰çš„ä»£ç ï¼Œæœ‰æ²¡æœ‰éœ€è¦å»é‡ï¼Œlegacyä»£ç éœ€è¦å»é‡çš„ã€‚ä¸æ˜¯å¤§è§„æ¨¡çš„é‡æ„ï¼Œä½†æ˜¯å¯ä»¥æŒ‰ç…§é•¿æœŸç»´æŠ¤çš„ä»£ç æ¨¡å—çš„æ ‡å‡†ï¼Œå®¡è§†ä¸€ä¸‹ä»£ç ã€‚ åŒ…æ‹¬é‡Œé¢æœ‰ä¸€äº›æ— å¿…è¦çš„æ‰“å°ï¼ˆä»€ä¹ˆç†è®ºæå‡å¤šå°‘å€ï¼‰
================================================================================

[194] [Unknown Time]
é‡æ„åçš„ä»£ç è¿è¡Œæ²¡ä»€ä¹ˆé—®é¢˜ã€‚bbox_overlap_analysisè¿˜éœ€è¦ä¿ç•™å—ï¼Ÿ å®¡è§†ä¸€äº›sqlæ˜¯å¦æœ‰å¿…è¦ä¿ç•™ã€‚
================================================================================

[195] [Unknown Time]
æˆ‘åœ¨å°è¯•è¿™ä¸ªåŠŸèƒ½è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ‰ä¸¤ä¸ªæ”¹è¿›ç‚¹ã€‚ é¦–å…ˆè™½ç„¶æˆ‘çº¦å®šäº†topnï¼Œä½†æ˜¯æŒ‡å®šåŸå¸‚å·åï¼Œæ˜¯å¦æ˜¯æ‰€æœ‰æ•°æ®éƒ½åˆ†æå®Œäº†ï¼Ÿ  æˆ‘æœ‰æ²¡æœ‰å¯èƒ½ä¸æŒ‡å®štopå‡ ï¼Œè€Œæ˜¯ç»Ÿè®¡æ¯ä¸€ä¸ªgridçš„æ•°æ®é›†é‡Œé¢çš„æ•°é‡ï¼Œç„¶åæŒ‰ç…§åˆ†ä½ï¼Œç¡®å®šé˜ˆå€¼ã€‚ç„¶åæŠŠæ»¡è¶³é˜ˆå€¼çš„gridéƒ½ç»™å‡ºæ¥ã€‚ å¦å¤–ï¼Œå¦‚æœgridåˆé€‚ï¼Œå…¶å®è¾“å‡ºçš„gridäº’ç›¸ç›¸é‚»ï¼Œå…¶å®å°±å¯ä»¥è¿æ¥èµ·æ¥ï¼Œå½¢æˆæœ‰æ„ä¹‰çš„åŒºåŸŸã€‚ï¼ˆè¿™ä¸ªç›¸é‚»å…¶å®æŒ‰ç…§gridå¯ä»¥å¿«é€Ÿåˆ¤æ–­ï¼‰ï¼Œè¿™æ ·å°±æ˜¯ç”±å‡ ä¸ªgridè‡³å°‘æ»¡è¶³æ¯”è¾ƒå¤šsceneçš„ï¼Œè¿æˆä¸€ä¸ªpolygonï¼Œè¿›ä¸€æ­¥åˆ†æå°±å¾ˆæœ‰æ„ä¹‰ã€‚å…ˆä¸æ”¹ä»£ç ï¼Œè®²è®²æ€è·¯
================================================================================

[196] [Unknown Time]
æˆ‘è§‰å¾—å¯ä»¥
================================================================================

[197] [Unknown Time]
top-nè¿™ä¸ªå‚æ•°ï¼Œå“ˆå¸Œå“Ÿäº©ï¼Œconflicting optionã€‚å¦å¤– min-cluster-sizeæœ‰å¿…è¦æŒ‡å®šå—ï¼Ÿ --cluster-methodæ˜¯å¹²å•¥çš„ï¼Ÿ
================================================================================

[198] [Unknown Time]
æŠ¥é”™ï¼Œè¿™ä¸ªä¸å­˜åœ¨ undefinedColumn
================================================================================

[199] [Unknown Time]
need to add explicity type casts, æŠ¥é”™
================================================================================

[200] [Unknown Time]
ROUND(AVG(bbox_count_in_grid::numeric), 1) as avg_grid_densityæŠ¥é”™need to add explicity type casts,
================================================================================

[201] [Unknown Time]
âŒ åˆ†æå¤±è´¥: (psycopg.errors.UndefinedFunction) function round(double precision, integer) does not exist

LINE 109:Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ROUND(AVG(bbox_count_in_grid::float), 1)...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^

HINT:Â  No function matches the given name and argument types. You might need to add explicit type casts.

(Background on this error at: https://sqlalche.me/e/20/f405)

Traceback (most recent call last):

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

psycopg.errors.UndefinedFunction: function round(double precision, integer) does not exist

LINE 109:Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ROUND(AVG(bbox_count_in_grid::float), 1)...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^

HINT:Â  No function matches the given name and argument types. You might need to add explicit type casts.



The above exception was the direct cause of the following exception:



Traceback (most recent call last):

Â  File "/workspace/examples/dataset/bbox_examples/run_overlap_analysis.py", line 739, in main

Â  Â  conn.execute(text(analysis_sql))

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

Â  Â  return meth(

Â  Â  Â  Â  Â  Â ^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

Â  Â  return connection._execute_clauseelement(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

Â  Â  ret = self._execute_context(

Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^
================================================================================

[202] [Unknown Time]
âŒ åˆ†æå¤±è´¥: (psycopg.errors.ArraySubscriptError) cannot accumulate arrays of different dimensionality

(Background on this error at: https://sqlalche.me/e/20/9h9h)

Traceback (most recent call last):

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

psycopg.errors.ArraySubscriptError: cannot accumulate arrays of different dimensionality



The above exception was the direct cause of the following exception:



Traceback (most recent call last):

Â  File "/workspace/examples/dataset/bbox_examples/run_overlap_analysis.py", line 739, in main

Â  Â  conn.execute(text(analysis_sql))

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

Â  Â  return meth(

Â  Â  Â  Â  Â  Â ^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

Â  Â  return connection._execute_clauseelement(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

Â  Â  ret = self._execute_context(

Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context

Â  Â  return self._exec_single_context(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context

Â  Â  self._handle_dbapi_exception(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception

Â  Â  raise sqlalchemy_exception.with_traceback(exc_info[2]) from e

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

sqlalchemy.exc.DataError: (psycopg.errors.ArraySubscriptError) cannot accumulate arrays of different dimensionality

[SQL:Â 
================================================================================

[203] [Unknown Time]
æˆ‘æœ¬åœ°æ²¡æ³•åšæµ‹è¯•ã€‚æˆ‘å¯ä»¥è‡ªå·±æ‰‹åŠ¨æµ‹è¯•
================================================================================

[204] [Unknown Time]
è¿è¡ŒæˆåŠŸäº†ï¼Œä½†æ˜¯è¿è¡Œçš„ç»“æœä¸æ˜¯æˆ‘æƒ³è¦çš„ï¼Œæœ‰çœ‹åˆ°æ•´ä¸ªåŸå¸‚çš„bboxåŸºæœ¬éƒ½è”é€šåœ¨ä¸€èµ·äº†ã€‚  å…¶å®å’Œæ”¹é€ å‰ä¸€æ ·ï¼Œä»¥å‰æ˜¯topnï¼Œæˆ‘æƒ³æŠŠtopnç›´æ¥è”é€šåœ¨ä¸€èµ·ï¼ˆä¸ç”¨è€ƒè™‘æ˜¯å¦æœ‰holeï¼‰ã€‚ åªæ˜¯topnæœ‰ç‚¹ç¡¬ã€‚ æˆ‘æƒ³æŒ‰ç…§åˆ†ä½æ•°ï¼ŒæŠŠåˆé€‚çš„é˜ˆå€¼ï¼ˆé‡å çš„ä¸ªæ•°å®šä¸‹æ¥ï¼‰ï¼Œå¦‚æœåªæœ‰10%çš„gridé‡Œé¢æœ‰è¶…è¿‡50ä¸ªæ•°æ®é›†ï¼Œé‚£ä¹ˆå°±æŒ‰ç…§50ä½œä¸ºé˜ˆå€¼ï¼ŒæŠŠgridä¿ç•™ä¸‹æ¥ã€‚æˆ–è€…æˆ‘ä»¬å†ç®€å•ä¸€ç‚¹ï¼Œä¹‹å‰çš„topnæ”¹æˆï¼Œä¿ç•™top*%çš„gridï¼Œç„¶ååšè”é€šï¼Œå…ˆæ­¥æ”¹ä»£ç ï¼Œå…ˆçœ‹çœ‹è¡Œä¸è¡Œ
================================================================================

[205] [Unknown Time]
æ–¹æ¡ˆ1å’Œæ–¹æ¡ˆ2æ˜¯ä¸æ˜¯ç»“æœä¸Šä¸åº”è¯¥å·®å¾ˆå¤šï¼Ÿæ–¹æ¡ˆ3ä¸­çš„é˜ˆå€¼æ€ä¹ˆå®šåˆé€‚ï¼Ÿ
================================================================================

[206] [Unknown Time]
æˆ‘è§‰å¾—ä½ æ¨èçš„æ–¹æ¡ˆå¯ä»¥ã€‚å¦‚æœæˆ‘åé¢è¦åšèšç±»ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥æ”¯æŒï¼Ÿ
================================================================================

[207] [Unknown Time]
æˆ‘è§‰å¾—ä½ æ¨èçš„æ–¹æ¡ˆå¯ä»¥ã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯æƒ³æŠŠèšç±»åçš„ç»“æœä¹Ÿè¾“å‡º
================================================================================

[208] [Unknown Time]
è¿è¡ŒæˆåŠŸäº†ï¼Œä½†æ˜¯è¿è¡Œçš„ç»“æœä¸æ˜¯æˆ‘æƒ³è¦çš„ï¼Œæœ‰çœ‹åˆ°æ•´ä¸ªåŸå¸‚çš„bboxåŸºæœ¬éƒ½è”é€šåœ¨ä¸€èµ·äº†ã€‚  å…¶å®å’Œæ”¹é€ å‰ä¸€æ ·ï¼Œä»¥å‰æ˜¯topnï¼Œæˆ‘æƒ³æŠŠtopnæ”¹æˆtopç™¾åˆ†æ¯”ï¼Œå¯ä»¥å—
================================================================================

[209] [Unknown Time]
æˆ‘åœ¨å°è¯•è¿™ä¸ªåŠŸèƒ½è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ‰ä¸¤ä¸ªæ”¹è¿›ç‚¹ã€‚ é¦–å…ˆè™½ç„¶æˆ‘çº¦å®šäº†topnï¼Œä½†æ˜¯æŒ‡å®šåŸå¸‚å·åï¼Œæ˜¯å¦æ˜¯æ‰€æœ‰æ•°æ®éƒ½åˆ†æå®Œäº†ï¼Ÿ  æˆ‘æœ‰æ²¡æœ‰å¯èƒ½ä¸æŒ‡å®štopå‡ ï¼Œè€Œæ˜¯topç™¾åˆ†æ¯”ï¼Ÿ
================================================================================

[210] [Unknown Time]
âŒ åˆ†æå¤±è´¥: (psycopg.errors.UndefinedColumn) column "none" does not exist

LINE 111:Â  Â  Â  Â  Â  Â  Â  Â  Â WHEN False THEN None

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^

[SQL:Â 

Â  Â  Â  Â  Â  Â  WITH bbox_bounds AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- ğŸš€ ç¬¬1æ­¥ï¼šæå–bboxè¾¹ç•Œï¼ˆä¸€æ¬¡æ€§å‡ ä½•è®¡ç®—ï¼Œçº¦11kæ¬¡ï¼‰

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  subdataset_name,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scene_token,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ST_XMin(geometry) as xmin,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ST_XMax(geometry) as xmax,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ST_YMin(geometry) as ymin,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ST_YMax(geometry) as ymax

Â  Â  Â  Â  Â  Â  Â  Â  FROM clips_bbox_unified

Â  Â  Â  Â  Â  Â  Â  Â  WHERE city_id = 'A263' AND all_good = true

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  bbox_grid_coverage AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- ğŸ¯ ç¬¬2æ­¥ï¼šè®¡ç®—æ¯ä¸ªbboxè¦†ç›–çš„ç½‘æ ¼èŒƒå›´ï¼ˆçº¯æ•°å­¦è®¡ç®—ï¼‰

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  subdataset_name,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scene_token,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  floor(xmin / 0.0001)::int as min_grid_x,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  floor(xmax / 0.0001)::int as max_grid_x,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  floor(ymin / 0.0001)::int as min_grid_y,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  floor(ymax / 0.0001)::int as max_grid_y,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  CASEÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  WHEN True THEN 1.0

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ELSE (xmax - xmin) * (ymax - ymin)Â  -- bboxé¢ç§¯

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  END as bbox_area

Â  Â  Â  Â  Â  Â  Â  Â  FROM bbox_bounds

Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  expanded_grid_coverage AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- ğŸ”§ ç¬¬3æ­¥ï¼šå±•å¼€æ¯ä¸ªbboxåˆ°å®ƒè¦†ç›–çš„æ‰€æœ‰ç½‘æ ¼

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  subdataset_name,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scene_token,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bbox_area,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid_x,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid_y

Â  Â  Â  Â  Â  Â  Â  Â  FROM bbox_grid_coverage,

Â  Â  Â  Â  Â  Â  Â  Â  LATERAL generate_series(min_grid_x, max_grid_x) as grid_x,

Â  Â  Â  Â  Â  Â  Â  Â  LATERAL generate_series(min_grid_y, max_grid_y) as grid_y

Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  grid_density_stats AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- ğŸ“Š ç¬¬4æ­¥ï¼šç»Ÿè®¡æ¯ä¸ªç½‘æ ¼çš„bboxå¯†åº¦

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid_x,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid_y,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  COUNT(*) as bbox_count_in_grid,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  COUNT(DISTINCT subdataset_name) as subdataset_count,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  COUNT(DISTINCT scene_token) as scene_count,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT subdataset_name) as involved_subdatasets,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ARRAY_AGG(DISTINCT scene_token) as involved_scenes,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SUM(bbox_area) as total_bbox_area,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  -- ğŸ”§ æŒ‰éœ€ç”Ÿæˆç½‘æ ¼å‡ ä½•

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ST_MakeEnvelope(

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid_x * 0.0001,Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid_y * 0.0001,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (grid_x + 1) * 0.0001,Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (grid_y + 1) * 0.0001,Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  4326

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) as grid_geom

Â  Â  Â  Â  Â  Â  Â  Â  FROM expanded_grid_coverage

Â  Â  Â  Â  Â  Â  Â  Â  GROUP BY grid_x, grid_y

Â  Â  Â  Â  Â  Â  Â  Â  HAVING COUNT(*) >= 5

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â AND (True OR SUM(bbox_area) >= 0.0)

Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  all_hotspots AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- ğŸ“Š æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„çƒ­ç‚¹ï¼ˆç”¨äºç»Ÿè®¡å’Œç™¾åˆ†æ¯”è®¡ç®—ï¼‰

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid_x,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid_y,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bbox_count_in_grid,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  subdataset_count,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scene_count,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  involved_subdatasets,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  involved_scenes,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  total_bbox_area,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid_geom,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ROW_NUMBER() OVER (ORDER BY bbox_count_in_grid DESC) as density_rank

Â  Â  Â  Â  Â  Â  Â  Â  FROM grid_density_stats

Â  Â  Â  Â  Â  Â  Â  Â  ORDER BY bbox_count_in_grid DESC

Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  hotspot_summary AS (

Â  Â  Â  Â  Â  Â  Â  Â  -- ğŸ“ˆ ç”Ÿæˆæ±‡æ€»ç»Ÿè®¡ä¿¡æ¯

Â  Â  Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  COUNT(*) as total_hotspots,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  MAX(bbox_count_in_grid) as max_density,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  MIN(bbox_count_in_grid) as min_density,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ROUND(AVG(bbox_count_in_grid)::numeric, 2) as avg_density,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ROUND(PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY bbox_count_in_grid)::numeric, 2) as median_density

Â  Â  Â  Â  Â  Â  Â  Â  FROM grid_density_stats

Â  Â  Â  Â  Â  Â  )

Â  Â  Â  Â  Â  Â  INSERT INTO bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  Â  Â  (analysis_id, hotspot_rank, overlap_count, total_overlap_area,Â 

Â  Â  Â  Â  Â  Â  Â subdataset_count, scene_count, involved_subdatasets, involved_scenes, geometry, analysis_params)

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  'overlap_docker_20250925_081445' as analysis_id,

Â  Â  Â  Â  Â  Â  Â  Â  density_rank as hotspot_rank,

Â  Â  Â  Â  Â  Â  Â  Â  bbox_count_in_grid as overlap_count,

Â  Â  Â  Â  Â  Â  Â  Â  total_bbox_area as total_overlap_area,

Â  Â  Â  Â  Â  Â  Â  Â  subdataset_count,

Â  Â  Â  Â  Â  Â  Â  Â  scene_count,

Â  Â  Â  Â  Â  Â  Â  Â  involved_subdatasets,

Â  Â  Â  Â  Â  Â  Â  Â  involved_scenes,

Â  Â  Â  Â  Â  Â  Â  Â  grid_geom as geometry,

Â  Â  Â  Â  Â  Â  Â  Â  '{"analysis_type": "bbox_density", "city_filter": "A263", "grid_size": 0.0001, "density_threshold": 5, "calculate_area": False, "grid_coords": "(" || grid_x || "," || grid_y || ")", "total_hotspots": ' || (SELECT total_hotspots FROM hotspot_summary) || ', "max_density": ' || (SELECT max_density FROM hotspot_summary) || ', "avg_density": ' || (SELECT avg_density FROM hotspot_summary) || '}' as analysis_params

Â  Â  Â  Â  Â  Â  FROM all_hotspots

Â  Â  Â  Â  Â  Â  WHERE density_rank <= CASEÂ 

Â  Â  Â  Â  Â  Â  Â  Â  WHEN False THEN None

Â  Â  Â  Â  Â  Â  Â  Â  ELSE GREATEST(1, ROUND((SELECT total_hotspots FROM hotspot_summary) * 0.1))

Â  Â  Â  Â  Â  Â  END;

Â  Â  Â  Â  Â  Â  ]

(Background on this error at: https://sqlalche.me/e/20/f405)

Traceback (most recent call last):

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

psycopg.errors.UndefinedColumn: column "none" does not exist

LINE 111:Â  Â  Â  Â  Â  Â  Â  Â  Â WHEN False THEN None

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^



The above exception was the direct cause of the following exception:



Traceback (most recent call last):

Â  File "/workspace/examples/dataset/bbox_examples/run_overlap_analysis.py", line 672, in main

Â  Â  conn.execute(text(analysis_sql))

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

Â  Â  return meth(

Â  Â  Â  Â  Â  Â ^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

Â  Â  return connection._execute_clauseelement(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

Â  Â  ret = self._execute_context(

Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context

Â  Â  return self._exec_single_context(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context

Â  Â  self._handle_dbapi_exception(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception

Â  Â  raise sqlalchemy_exception.with_traceback(exc_info[2]) from e

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

sqlalchemy.exc.ProgrammingError: (psycopg.errors.UndefinedColumn) column "none" does not exist

LINE 111:Â  Â  Â  Â  Â  Â  Â  Â  Â WHEN False THEN None
================================================================================

[211] [Unknown Time]
okäº†ã€‚æˆ‘å‘ç°ä½¿ç”¨ä¸ä¸€æ ·çš„gridsizeï¼Œtop 1%çš„åŒºåŸŸæ˜¯æœ‰å·®å¼‚çš„ï¼ˆæœ‰é‡åˆçš„ï¼Œä¹Ÿæœ‰æœ‰å·®å¼‚çš„ï¼‰ã€‚ è¿™ä¸ªæœ‰ä»€ä¹ˆæ˜ç¡®çš„æ–¹æ³•è®ºå—ï¼Ÿæœ‰ä»€ä¹ˆæ¯”è¾ƒå¥½çš„å®è·µï¼Ÿä¸ç”¨é©¬ä¸Šæ”¹ä»£ç 
================================================================================

[212] [Unknown Time]
è¿™ä¸ªæ˜¯æœ‰æˆç†Ÿçš„åº“æˆ–è€…æ–¹æ³•è®ºå—ï¼Ÿä¸æƒ³ä»å¤´é€ è½®å­ã€‚æˆ‘å‘ç°æœ‰äº›å°gridæ˜¯é«˜å¯†åº¦çš„ï¼Œä½†æ˜¯å¤§gridä¸è¦†ç›–çš„ï¼Œæˆ‘å…¶å®æœ‰ç‚¹çœ‹ä¸æ‡‚ã€‚
================================================================================

[213] [Unknown Time]
DBSCANæ˜¯å…¨é‡æ•°æ®éƒ½åšèšç±»å—ï¼Ÿæ„Ÿè§‰æ•ˆç‡ä¼šæœ‰é—®é¢˜ï¼Ÿ æˆ‘è¿˜æ˜¯æƒ³PySALæ˜¯ä¸æ˜¯å¥½ä¸€ç‚¹ï¼Ÿ å’Œæˆ‘ä»¬å½“å‰ç°æœ‰çš„æµç¨‹å¦‚ä½•é…åˆï¼Ÿ
================================================================================

[214] [Unknown Time]
DBSCANæ˜¯å…¨é‡æ•°æ®éƒ½åšèšç±»å—ï¼Ÿæ„Ÿè§‰æ•ˆç‡ä¼šæœ‰é—®é¢˜ï¼Ÿ æˆ‘è¿˜æ˜¯æƒ³PySALæ˜¯ä¸æ˜¯å¥½ä¸€ç‚¹ï¼Ÿ å’Œæˆ‘ä»¬å½“å‰ç°æœ‰çš„æµç¨‹å¦‚ä½•é…åˆï¼Ÿå…ˆä¸æ”¹ä»£ç ï¼Œå…ˆè®²æ–¹æ¡ˆå’Œæ€è·¯
================================================================================

[215] [Unknown Time]
ç¬¬ä¸€é˜¶æ®µ: æœ€å°é›†æˆï¼› è¿™é‡Œå“ªäº›æ˜¯ç”¨pgè®¡ç®—ï¼Œå“ªäº›æ˜¯ç”¨PySALè®¡ç®—ï¼Ÿ æœ‰æ²¡æœ‰å¤©ç„¶å’ŒPGé€‚é…çš„æ¥å£ï¼Ÿä¸æ”¹ä»£ç 
================================================================================

[216] [Unknown Time]
æˆ‘å¯ä»¥è€ƒè™‘ä½¿ç”¨PGçš„æ–¹æ³•ï¼Œä½†æ˜¯å’Œç°åœ¨çš„ç½‘æ ¼æ–¹æ³•è¿˜æœ‰ç»“åˆå¯èƒ½æ€§å—ï¼Ÿæ•ˆç‡æ€ä¹ˆæ ·ï¼Ÿæˆ‘æ ¸å¿ƒè¿˜æ˜¯å…³å¿ƒçš„æ•ˆç‡å’Œå¤„ç†å®¹é‡çš„é—®é¢˜ï¼Œä¸æ”¹ä»£ç 
================================================================================

[217] [Unknown Time] *** å¤šæ¨¡æ€ ***
æˆ‘æŠŠæˆ‘çš„æ‰€æœ‰é—®é¢˜éƒ½æ”¾åœ¨ä¸‹é¢ã€‚æ ¹æ®æˆ‘è¯´çš„ï¼Œèƒ½å¦å½’çº³å‡ºä¸ªéœ€æ±‚æ–‡æ¡£ï¼Ÿï¼šæˆ‘æƒ³æŠŠç©ºé—´åˆ†æå¼•å…¥è‡ªåŠ¨é©¾é©¶çš„æ•°æ®åˆ†æé¢†åŸŸã€‚å•å¯èƒ½ä¸ä»…ä»…æ˜¯ç©ºé—´åˆ†æã€‚æˆ‘ç°çŠ¶å¯¹è¿™ä¸ªä¸šåŠ¡çš„å…³é”®é—®é¢˜å½’çº³ä¸è¶³ã€‚æˆ‘éšçº¦è§‰å¾—ä¼šå¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯æ— æ³•ç³»ç»Ÿæ€§åœ°å½’çº³é—®é¢˜ï¼Œå¹¶ä¸”æå‡ºè§£å†³æ–¹æ¡ˆã€‚ æˆ‘è§‰å¾—æœ‰å‡ ä¸ªç»´åº¦ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯ç‰¹å¾åˆ†æï¼Œå½“å‰çš„ç‰¹å¾åˆ†æä¸»è¦æ˜¯è®­ç»ƒçš„ç½‘ç»œæœ¬èº«ï¼ˆæ¯”å¦‚æ¨¡ä»¿å­¦ä¹ çš„ç«¯åˆ°ç«¯è‡ªåŠ¨é©¾é©¶ï¼Œdiffusionpolicyï¼‰ï¼Œä»è¿™ä¸ªç»´åº¦å¯ä»¥åˆ†æç½‘ç»œçš„è¡¨ç°ï¼Œä½†æ˜¯æ— æ³•åˆ†ææ•°æ®çš„åˆ†å¸ƒæ˜¯å¦åˆç†ï¼ˆå¯èƒ½ä¼šé¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡ï¼‰ï¼Œè¿™æ—¶å€™ä¼šå¼•å…¥å’Œä¸šåŠ¡æ¨¡å‹è§£è€¦çš„å¤–éƒ¨å¤§æ¨¡å‹ï¼ˆæ¯”å¦‚CLIPå¤šæ¨¡æ€æ¨¡å‹ï¼‰ï¼Œçœ‹ä¼¼ä»æ›´åŠ é€šç”¨çš„ç»´åº¦å»åˆ†ææ•°æ®ï¼ˆç”¨é«˜ç»´åº¦çš„embeddingå‡ºå‘ï¼‰ã€‚æ•°æ®åˆ†å¸ƒçš„åˆ†æç›®çš„ï¼Œå‡å°‘å†—ä½™æ•°æ®ï¼Œå¢åŠ ç¨€å°‘æ•°æ®ï¼ˆå¯ä»¥ä¸å†æ˜¯è¢«åŠ¨å‘ç°ï¼Œè€Œæ˜¯ä¸»åŠ¨è¯†åˆ«ï¼‰ï¼Œä¸€æ–¹é¢æå‡è®­ç»ƒæ•ˆç‡ï¼Œå¦ä¸€æ–¹é¢é’ˆå¯¹åç»­çš„å¼ºåŒ–å­¦ä¹ è®­ç»ƒï¼Œä¹Ÿæœ‰æ˜“å¤„ã€‚ä»ç©ºé—´ä¸Šèšç±»ï¼Œé¦–å…ˆå°±å¯ä»¥è¾¾æˆä¸€éƒ¨åˆ†ã€‚ å¦å¤–å…‰ç©ºé—´èšç±»å¯èƒ½ä¸è¶³ï¼Œæˆ‘ä»¬éƒ¨é—¨æœ‰è‡ªå·±ä¼—åŒ…åœ°å›¾ï¼ˆæœ‰æ …æ ¼çš„ã€æœ‰çŸ¢é‡çš„ï¼‰ï¼Œå¯ä»¥é€šè¿‡ç©ºé—´ä½ç½®å¯¹åº”çš„çŸ¢é‡åœ°å›¾ï¼Œè¿›è¡Œåˆ†å—åˆ†æã€‚é‚£ä¹ˆå°±å¯ä»¥å¯¹é™æ€åœºæ™¯è¿›è¡Œæ¯”è¾ƒé«˜æ•ˆçš„èšç±»ï¼ˆå…¨å›½ä¸€å…±æœ‰å¤šå°‘ç§å²”è·¯ï¼Œå¤šå°‘ç§è·¯å£ï¼‰ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œæ¯ä¸€ä¸ªclipæœ‰åæ ‡ï¼Œå°±å¯ä»¥å¤©ç„¶å’Œè¿™ä¸ªåœ°å›¾å—ç»‘å®šï¼Œå®ç°èšç±»ï¼Œæ•ˆç‡æé«˜ï¼ˆè¯•æƒ³ä¸€èˆ¬æ•°æ®ç‰‡æ®µèšç±»å¤æ‚åº¦å¾ˆé«˜ï¼Œæ•°æ®èšç±»æ˜¯éœ€è¦ä¸æ–­é™ç»´åº¦ï¼Œé™ç»´è¿‡ç¨‹ä¸­ï¼Œæˆ‘è®¤ä¸ºåŠ å…¥ä¸“å®¶ç»éªŒï¼Œåœ¨åˆç†çš„æ­¥éª¤ï¼Œä¼šæœ‰æ•ˆé™ä½éš¾åº¦ï¼Œå¹¶ä¸”ç»“æœæ›´åŠ å¯æ§ï¼‰ã€‚å½“ç„¶ç©ºé—´åˆ†æä»¥åŠå¼•å…¥åœ°å›¾åªèƒ½è§£å†³åé™æ€åœºæ™¯çš„é—®é¢˜ï¼Œè‡ªåŠ¨é©¾é©¶ç‰‡æ®µä¸­åŠ¨æ€åœºæ™¯çš„ç›®æ ‡ï¼Œä»¥åŠè‡ªè½¦çš„è¡Œä¸ºï¼Œæ˜¯éœ€è¦ä»å¦å¤–è§’åº¦è¿›è¡Œåˆ†æã€‚æˆ‘èƒ½æƒ³åˆ°çš„ï¼Œå½“å‰æ•°æ®ç‰‡æ®µåŸºäºè§„åˆ™ï¼Œå…¶å®å·²ç»æ‰“äº†ç›¸å½“å¤šçš„æ ‡ç­¾ï¼ˆä»–è½¦çš„ç›®æ ‡ä½ç½®ï¼Œè‡ªè½¦çš„è¡Œä¸ºç­‰ï¼‰ï¼Œè™½ç„¶æœ‰å±€é™æ€§ï¼ˆå› ä¸ºæ˜¯handcraftedçš„è§„åˆ™ç‰¹å¾ï¼‰ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œèšç±»ã€‚ æˆ–è€…æˆ‘æƒ³å¼ºè°ƒçš„æ˜¯ï¼Œç©ºé—´åˆ†æä½œä¸ºåŸºç¡€æ¶å­ï¼Œåœ¨è¿™ä¸ªæ¡†æ¶ä¸‹ï¼Œé™æ€åœºæ™¯ç›¸åŒï¼Œå¯ä»¥ç”¨æ ‡ç­¾ç‰¹å¾ï¼Œæˆ–è€…ç½‘ç»œè®­ç»ƒè¿‡ç¨‹ä¸­çš„ç‰¹å¾ï¼ˆè¿˜æ˜¯æœ‰é¸¡ç”Ÿè›‹ï¼Œè›‹ç”Ÿé¸¡çš„é—®é¢˜ï¼‰è¿›è¡Œèšç±»ï¼Œåˆ†æã€‚ é™¤äº†ä¸Šé¢è¯´çš„æ•°æ®åˆ†å¸ƒåˆ†æå¤–ï¼Œè¿˜å¯ä»¥åšé—®é¢˜åˆ†æã€‚æ¯”å¦‚ç‰¹å®šåœºæ™¯ï¼Œå°†åœºæ™¯é›·è¾¾æ•°æ®èšç±»åœ¨ä¸€èµ·ï¼Œç„¶åå¯¹æ¯”ç½‘ç»œæ¨ç†ç»“æœçš„å˜åŒ–ï¼ˆå½“ç„¶è¿™ä¸ªè¿˜æ˜¯éœ€è¦å’Œé—­ç¯ä»¿çœŸè¯„æµ‹ç»“åˆï¼Œä½†æ˜¯ä¼šæ›´åŠ æœ‰é’ˆå¯¹æ€§ã€‚åœ¨è¯„æµ‹ç¯èŠ‚ï¼Œé’ˆå¯¹å…·ä½“çš„è¯„æµ‹ä»»åŠ¡ï¼Œå¿«é€Ÿåˆ¶å®šæœ‰é’ˆå¯¹æ€§çš„æ•°æ®é›†ï¼Œå…¶å®æ˜¯å¾ˆå›°éš¾çš„ã€‚å¦‚æœè¿™ä¸ªå¾ˆéš¾è¾¾æˆï¼Œå°±ä¼šå¯¼è‡´æ•°æ®é›†çš„ç»´åº¦æ¯”è¾ƒå®½æ³›ï¼Œæ¯”å¦‚å°±æ˜¯åšå¼ˆä¸“é¢˜ï¼Œå…‰çœ‹ä¸€å…±å¤§çŠ¶ä½“çš„è¯„æµ‹é›†è¡¨è±¡ï¼Œæ¯”è¾ƒéš¾æ§åˆ¶æ¨¡å‹çœŸå®çš„æ°´å¹³ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç°åœ¨çš„ä¸€ä¸ªéš¾ç‚¹ï¼Œå°±æ˜¯é—­ç¯ä»¿çœŸè¯„æµ‹çš„è¿è¡Œæˆæœ¬é«˜ï¼Œç¯èŠ‚é•¿ï¼ˆå®Œæˆè®­ç»ƒï¼Œpthè½¬Dï¼Œè½¬omï¼Œç„¶åè·å–èµ„æºï¼ˆå› ä¸ºè¦è·‘3DGSï¼‰ï¼Œç„¶åæ‰æœ‰ç»“æœï¼‰ï¼Œè¯„æµ‹ç»“æœçš„åˆ†ææŠ•å…¥æˆæœ¬ä¹Ÿå¾ˆé«˜ã€‚å¦å¤–æ²¿é€”ä¸‹è›‹çš„ç‚¹ï¼Œä¼—åŒ…åœ°å›¾å…¶å®ä¹Ÿä¼šæœ‰åœºæ™¯åˆ†æçš„éœ€æ±‚ï¼Œæ¯”å¦‚æŸä¸ªåœ°æ–¹å‘ç”Ÿçš„äº†åˆ¶å›¾é—®é¢˜å•ï¼Œä¹Ÿæƒ³æŠŠç›¸ä¼¼åœºæ™¯èšå‡ºæ¥ï¼Œè¿›è¡Œæ‰¹é‡è§£å†³ï¼Œä½†æ˜¯ç°åœ¨ä¹Ÿåªèƒ½åŸºäºè§„åˆ™ã€‚è¿™æ ·ä¹Ÿä¼šæœ‰é¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡çš„é—®é¢˜ã€‚ å½“ç„¶è¿™ä¸ªä¸æ˜¯æˆ‘ä¸»è¦æƒ³è§£å†³çš„ã€‚ å¦å¤–æ•°æ®æŒ‰ç…§ç©ºé—´åœºæ™¯è¿›è¡Œèšç±»ï¼Œå¯¹æ•°æ®å…¨é¢çš„åœºæ™¯è¦†ç›–ï¼ŒæŒ‡å¯¼é‡‡é›†ï¼Œä¹Ÿå¾ˆæœ‰ç”¨ã€‚è§£å†³æ•°æ®é‡‡é›†ï¼Œç¼ºä¹ä¸€ä¸ªå…¨è²Œçš„æŒ‡å¯¼ã€‚ä¸€èˆ¬æ˜¯é æ„å›¾å›¢é˜Ÿã€æµ‹è¯•å›¢é˜Ÿçš„ç»éªŒï¼Œäººå·¥åé¦ˆä¸€äº›ç‰¹ç‚¹åœºæ™¯ï¼Œæˆ–è€…é€šè¿‡è¿ç»´å›¢é˜Ÿçš„äº‹æ•…é»‘ç‚¹ä½ç½®ï¼Œè¿›è¡Œå®šå‘é‡‡é›†ã€‚ä½†æ˜¯éƒ½ç¼ºä¹æ ¹æœ¬çš„åˆ†æã€‚ æˆ‘è¯´çš„å¤ªæ•£äº†ï¼Œæˆ‘æƒ³æŠŠè¿™ä¸ªé¡¹ç›®ç«‹èµ·æ¥ï¼Œæˆ‘è§‰å¾—é—®é¢˜å½’çº³æ˜¯æœ€é‡è¦çš„ï¼Œä¹Ÿå¯èƒ½æˆ‘æƒ³å¾—å¤ªæµ…ã€‚æˆ‘å¦‚æœè¦å»ç«‹é¡¹ï¼Œæœ‰å“ªå‡ ä¸ªç»´åº¦ï¼Œç«‹é¡¹è¿‡ç¨‹ä¸­ï¼Œè¿˜éœ€è¦å¢è¡¥å“ªäº›ï¼Ÿ å¦å¤–é¢†åŸŸé‡Œé¢æœ‰æ²¡æœ‰ç›¸å…³çš„è®ºæ–‡å¯ä»¥å‚è€ƒï¼Ÿ æˆ‘è§‰å¾—ä¸€ä¸‹å­é’»åˆ°æŠ€æœ¯ç»†èŠ‚äº†ã€‚æˆ‘è§‰å¾—é—®é¢˜æŒ–æ˜è¿˜æ˜¯ä¸å¤Ÿæ·±ï¼Œæ¯”è¾ƒæµ®äºè¡¨é¢ã€‚ â€œè¿è¥ä¸å¯è§„æ¨¡åŒ–ï¼šåœ°å›¾ä¿®å¤ã€æ²¿é€”ä¸‹è›‹ã€å®šå‘è¯„æµ‹éƒ½ç¼ºâ€œæŒ‰åœºæ™¯æ‰¹é‡æ“ä½œâ€çš„æŠ“æ‰‹ã€‚â€è¿™ä¸ªç¨å¾®æœ‰ç‚¹åé¢‡ï¼Œå½“å‰è¿ç»´ï¼ˆä¸æ˜¯è¿è¥ï¼‰åªè¦æ˜¯é’ˆå¯¹VOCï¼Œå®šå‘æå‡ç ”å‘ã€‚ æµ‹è¯•å’Œè¿ç»´çš„å·®å¼‚æ—¶ï¼Œæµ‹è¯•æ˜¯æ§åˆ¶ç ”å‘å‘ç‰ˆå‰çš„æµ‹è¯•ï¼Œè¿ç»´æ˜¯å…³æ³¨å®¢æˆ·æœ€å…³æ³¨çš„ç›®æ ‡ã€‚åœ°å›¾ä¿®å¤å¯ä»¥å…ˆä¸è¯´å§ã€‚ å®šå‘è¯„æµ‹å’Œé—®é¢˜å›å½’ä¸å¯å¿«ï¼Œå·®åˆ«ä¸å¤§å•Šã€‚é—®é¢˜æ ‘ï¼Œé‡Œé¢çš„é—®é¢˜â€œæ²¡æœ‰å¯å…±è¯†çš„åœºæ™¯åŸå‹è¯è¡¨â€è¿™ä¸ªå¤ªé»‘è¯äº†ã€‚â€œè¯„æµ‹é›†ä¸åœºæ™¯å¯¹é½ï¼Œå¯¼è‡´â€œæŒ‡æ ‡æ¶¨è·Œâ€è§£é‡Šä¸æ¸…â€---è¿™ä¸ªçš„ç¡®æœ‰è¿™ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬æœ‰å‡ ä¸ªæ³›åŒ–ä¸Šé‡çš„æ•°æ®ï¼Œé‡Œé¢ä»€ä¹ˆåœºæ™¯éƒ½æœ‰ï¼Œå¦å¤–ä¼šæœ‰äº›ä¸“é¢˜æ•°æ®ï¼Œæœ‰æ—¶æ˜¯ä»å·²æœ‰çš„baseè¿›è¡ŒæŒ–æ˜ï¼Œæœ‰æ—¶æ˜¯å¤–é¢å¢è¡¥ã€‚å®é™…ä¸Šåœºæ™¯åŒ–çš„èƒ½åŠ›æ˜¯æœ‰çš„ï¼Œä½†æ˜¯åŸºäºæ‰‹å·¥ç‰¹å¾ä¸ºä¸»ã€‚å½“å‰è¿™é‡Œä¹Ÿå¼•å…¥äº†åŸºäºç«¯åˆ°ç«¯ç½‘ç»œæœ¬èº«çš„ç‰¹å¾è¿›è¡Œåˆ†æï¼Œä½†æ˜¯è¿™é‡Œå°±æ˜¯ç¼ºä¹å¤–éƒ¨ã€ä¸­ç«‹è¡¨å¾äº†ï¼›â€œå…ˆæ˜ç¡®ç®¡ç†å¯¹è±¡æ˜¯â€œåœºæ™¯â€â€------è¿™ä¸ªçš„ç¡®æœ‰ä¸€å®šé“ç†ï¼Œå½“å‰çš„åœºæ™¯ç®¡ç†æ˜¯ç›´æ¥é¢å‘é—®é¢˜çš„ï¼Œæ¯”å¦‚åœ¨ç›²åŒºè·¯å£ä¸å‡é€Ÿã€‚æˆ‘åœ¨æƒ³æ˜¯ä¸æ˜¯è¦åˆ†å±‚ï¼Œè¦æœ‰é™æ€åœºæ™¯çš„åŸºç¡€åˆ†å±‚ã€‚ã€‚ã€‚ æˆ‘è§‰å¾—è¿˜æ˜¯è¦æ·±æŒ–é—®é¢˜ï¼Œç»§ç»­æ·±æŒ– æŠ›å¼€ä¹‹å‰è®¨è®ºçš„ã€‚æˆ‘åœ¨æƒ³ä¸€ä¸ªåˆ†å¸ƒåˆ†æï¼Œå’Œä¸€èˆ¬çš„ç›¸ä¼¼æŸ¥æ‰¾çš„å·®åˆ«ã€‚ åˆ†å¸ƒåˆ†ææ˜¯å¯¹æ•´ä¸ªæ•°æ®åˆå…¨è²Œï¼Œè€Œä¸æ˜¯æ‰¾åˆ°å·®ä¸å¤šå°±å¯ä»¥ã€‚ è¿™ä¹Ÿæ˜¯ç°åœ¨æ•°æ®é›†æ¼”è¿›çš„ä¸€ä¸ªè½¬å˜ï¼Œä¹‹å‰æ˜¯å“ªé‡Œä¸è¡Œè¡¥å“ªé‡Œï¼Œä½†æ˜¯å¯¹æ•´ä¸ªæ•°æ®çš„å…¨è²Œä¸æ¸…æ¥šï¼ˆå¯èƒ½ä¹Ÿå¯ä»¥ç±»æ¯”æŒ–æ˜å’Œèšç±»çš„å·®åˆ«ï¼‰ã€‚æˆ‘ä¸æ˜¯è¦æä¸€ä¸ªå¤§è€Œå…¨çš„æ–¹æ¡ˆï¼Œè§‰å¾—æœ‰ç‚¹è€ç”Ÿå¸¸è°ˆï¼Œç±»ä¼¼çš„è¯æˆ‘éƒ½çœ‹äº†å¥½å‡ æ¬¡äº†ã€‚æˆ‘è§‰å¾—è¿˜æ˜¯å¤ªè¿‡é€šç”¨ã€‚å…¶å®é—®é¢˜å½’çº³æœ‰ç‚¹æœ‰å¤±åé¢‡ã€‚ é¦–å…ˆæ¯ä¸ªæ•°æ®éƒ½æœ‰æ‰‹å·¥è®¾è®¡çš„è‡ªåŠ¨åŒ–è®¡ç®—çš„æ ‡ç­¾ï¼Œåªæ˜¯æ ‡ç­¾ç”¨èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒå›°éš¾ã€‚è®­ç»ƒæ‰€è°“çš„ç›²ï¼Œçš„ç¡®å­˜åœ¨ï¼Œä½†æ˜¯æœ‰äº†åŸºæœ¬é¢åï¼Œä¼šæ ¹æ®è·¯æµ‹çš„è¡¨ç°ï¼Œä»¥åŠé—­ç¯ä»¿çœŸçš„checkerç»“æœï¼Œæ¥çœ‹å“ªé‡Œæå‡å“ªé‡Œä¸‹é™ã€‚ç„¶åé’ˆå¯¹æ€§çš„è°ƒæ•´è®­ç»ƒç­–ç•¥æˆ–è€…å¢åŠ ã€åˆ é™¤ã€ç»†åŒ–åœºæ™¯æ•°æ®ã€‚è¯„æµ‹æ…¢ã€é‡‡é›†æ•£çš„ç¡®ä¹Ÿæœ‰ï¼Œä½†æ˜¯é‡‡é›†ä¹Ÿåšäº†æ ¹æ®æµ‹è¯•ã€è¿ç»´åé¦ˆçš„é«˜é¢‘é—®é¢˜ï¼Œä¸»åŠ¨åœ°å»é‡‡é›†æ•°æ®ã€‚ æˆ‘è§‰å¾—å¤§è€Œå…¨å¥½å—?è¿˜æ˜¯è¯´è¿™ä¸ªæŠ€æœ¯æ¡†æ¶æ€§çš„ä¸œè¥¿ï¼Œéœ€è¦æœ‰è¿™ä¸ªæ¡†æ¶ï¼Œåªæ˜¯é‡ç‚¹å¼ºè°ƒå…¶ä¸­çš„æŸä¸€éƒ¨åˆ†ï¼Ÿ è¿™ä¸ªè¶…çº§å¼•æ“å…¶å®åœ¨æ¯ä¸ªäººçš„è„‘å­é‡Œã€‚ç»™ä¸€ä¸ªç‰‡æ®µï¼Œå¯ä»¥ç»“åˆæ—¶åºã€å›¾åƒã€æ‰‹å·¥æ ‡ç­¾ã€é«˜ä½embeddingçš„ç‰¹å¾å¯¹æ•°æ®è¿›è¡Œç›¸ä¼¼æŸ¥æ‰¾ç­‰ç­‰ã€‚ è¿™ä¸ªå°±æ˜¯åƒï¼Œæƒ³åšä¸ªè°·æ­Œæ£€ç´¢ï¼Œå¾ˆå¤šäººéƒ½æƒ³åšå•Šï¼Œè¿™ä¸ªæ–¹å‘å…¶å®æ˜ç¡®çš„ã€‚ä½†æ˜¯æˆ‘ä¾§é‡çš„è¿˜æ˜¯ç©ºé—´åˆ†æå’Œåœ°å›¾ç‰¹å¾åˆ†æä¸Šçš„å¤ç”¨ï¼Œä»¥åŠåœ°ç†ç»´åº¦ä½œä¸ºåŸºç¡€åˆ†ææ¡†æ¶åº•åº§çš„ä¼˜åŠ¿ã€‚ æŠ›å¼€ä¹‹å‰è®¨è®ºçš„ã€‚æˆ‘åœ¨æƒ³ä¸€ä¸ªåˆ†å¸ƒåˆ†æï¼Œå’Œä¸€èˆ¬çš„ç›¸ä¼¼æŸ¥æ‰¾çš„å·®åˆ«ã€‚ åˆ†å¸ƒåˆ†ææ˜¯å¯¹æ•´ä¸ªæ•°æ®åˆå…¨è²Œï¼Œè€Œä¸æ˜¯æ‰¾åˆ°å·®ä¸å¤šå°±å¯ä»¥ã€‚ è¿™ä¹Ÿæ˜¯ç°åœ¨æ•°æ®é›†æ¼”è¿›çš„ä¸€ä¸ªè½¬å˜ï¼Œä¹‹å‰æ˜¯å“ªé‡Œä¸è¡Œè¡¥å“ªé‡Œï¼Œä½†æ˜¯å¯¹æ•´ä¸ªæ•°æ®çš„å…¨è²Œä¸æ¸…æ¥šï¼ˆå¯èƒ½ä¹Ÿå¯ä»¥ç±»æ¯”æŒ–æ˜å’Œèšç±»çš„å·®åˆ«ï¼‰ã€‚ æˆ‘æœ‰ä¸€ä¸ªæ‹…å¿ƒï¼Œå°±æ˜¯å¹³å°åˆ†æå·¥å…·å’Œå®é™…è‡ªåŠ¨é©¾é©¶äº¤ä»˜è„±èŠ‚ã€‚é¢†å¯¼ä¸æ˜¯é‚£ä¹ˆå…³æ³¨å¹³å°èƒ½åŠ›ã€‚
================================================================================

[218] [Unknown Time]
ä¸Šè¿°å†…å®¹å•ç‹¬åˆ›ä¸€ä¸ªç›®å½•ã€‚é™¤äº†å¹³å°èƒ½åŠ›å¤–ï¼Œæˆ‘ä¹Ÿæƒ³æ‰¾ä¸€ä¸ªé‡ç‚¹çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘æƒ³åšå¼ºåŒ–å­¦ä¹ æ•°æ®é›†çš„æ„å»º
================================================================================

[219] [Unknown Time]
å¯ä»¥å•Š
================================================================================

[220] [Unknown Time]
ä¸ºå•¥commitä¸Šé¢æœ‰è¿™ä¹ˆå¥‡æ€ªçš„å†…å®¹
================================================================================

[221] [Unknown Time]
æµ‹è¯•ä»£ç è¿è¡Œå®Œäº†ï¼Œé€‰æ‹©A263è¿™ä¸ªåŸå¸‚ï¼Œ11235ä¸ªboxã€‚dbscan1.06sï¼›ç½‘æ ¼æ–¹æ³• 0.12ç§’ï¼Œåˆ†å±‚èšç±» 1.19ç§’ï¼› æˆ‘è§‰å¾—éƒ½å¾ˆå¿«ã€‚ä»æ•ˆæœã€æ‰©å±•æ€§ä¸Šï¼Œåº”è¯¥é€‰æ‹©å“ªä¸€ä¸ªï¼Ÿèƒ½å¦æŠŠè¿è¡Œç»“æœè¾“å‡ºåˆ°tableï¼Œæˆ‘å¯ä»¥ç”¨qgisçœ‹ï¼Ÿ
================================================================================

[222] [Unknown Time]
æˆ‘çœ‹è¿è¡Œpython examples/dataset/bbox_examples/run_clustering_benchmark.py --city A263æ—¶æ‰“å°æœ‰ç»“æœå·²ä¿å­˜åˆ°å†…å­˜ï¼Œå¯ç”¨äºè¿›ä¸€æ­¥åˆ†æã€‚è¿™æ˜¯å•¥æ„æ€ï¼Ÿå“ªé‡Œçš„å†…å­˜ï¼Ÿ
================================================================================

[223] [Unknown Time]
root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/compare_methods_to_qgis.pyÂ  --city A263

ğŸ¯ å¤šæ–¹æ³•çƒ­ç‚¹åˆ†æå¯¹æ¯”

==================================================

åˆ†æåŸå¸‚: A263

å¼€å§‹æ—¶é—´: 2025-09-30 08:11:17

âœ… å¯¹æ¯”ç»“æœè¡¨åˆ›å»ºæˆåŠŸ

ğŸ”² è¿è¡Œç½‘æ ¼å¯†åº¦åˆ†æ...



âŒ åˆ†æå¤±è´¥: (psycopg.errors.GroupingError) column "clips_bbox_unified.geometry" must appear in the GROUP BY clause or be used in an aggregate function

LINE 8:Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â floor(ST_X(ST_Centroid(geometry)) / 0.00...
================================================================================

[224] [Unknown Time]
root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/compare_methods_to_qgis.py  --city A263

ğŸ¯ å¤šæ–¹æ³•çƒ­ç‚¹åˆ†æå¯¹æ¯”

==================================================

åˆ†æåŸå¸‚: A263

å¼€å§‹æ—¶é—´: 2025-09-30 08:11:17

âœ… å¯¹æ¯”ç»“æœè¡¨åˆ›å»ºæˆåŠŸ

ğŸ”² è¿è¡Œç½‘æ ¼å¯†åº¦åˆ†æ...



âŒ åˆ†æå¤±è´¥: (psycopg.errors.GroupingError) column "clips_bbox_unified.geometry" must appear in the GROUP BY clause or be used in an aggregate function

LINE 8:                     floor(ST_X(ST_Centroid(geometry)) / 0.00...ï¼› å…ˆä¸å°è¯•ä¿®æ”¹ï¼Œå…ˆçœ‹é—®é¢˜æ˜¯å•¥
================================================================================

[225] [Unknown Time]
ä»æ•ˆç‡è§’åº¦ï¼Œæœ€ä¼˜çš„å¤„ç†æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ
================================================================================

[226] [Unknown Time]
æˆ‘è§‰å¾—bboxçš„è¡¨ç»“æ„æ˜¯ä¸æ˜¯å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ï¼Ÿ å¦‚æœæ¯æ¬¡éƒ½è¦ä»geometryé‡Œé¢æxyï¼Œæ˜¯ä¸€ä¸ªå¥½çš„å®è·µå—ï¼Ÿå…ˆä¸æ”¹ä»£ç ï¼Œåˆ†æä¸€ä¸‹
================================================================================

[227] [Unknown Time]
root@82e398ebaf87:/workspace# python examples/dataset/bbox_examples/compare_methods_to_qgis.py  --city A263

ğŸ¯ å¤šæ–¹æ³•çƒ­ç‚¹åˆ†æå¯¹æ¯”

==================================================

åˆ†æåŸå¸‚: A263

å¼€å§‹æ—¶é—´: 2025-09-30 08:11:17

âœ… å¯¹æ¯”ç»“æœè¡¨åˆ›å»ºæˆåŠŸ

ğŸ”² è¿è¡Œç½‘æ ¼å¯†åº¦åˆ†æ...



âŒ åˆ†æå¤±è´¥: (psycopg.errors.GroupingError) column "clips_bbox_unified.geometry" must appear in the GROUP BY clause or be used in an aggregate function

LINE 8:                     floor(ST_X(ST_Centroid(geometry)) / 0.00...ï¼› å…ˆä¸å°è¯•ä¿®æ”¹ï¼Œå…ˆçœ‹é—®é¢˜æ˜¯å•¥ï¼Ÿæ³¨æ„æˆ‘ç°åœ¨åªæ˜¯è€ƒè™‘ç»“æœçš„å¯è§†åŒ–ï¼Œå°½å¯èƒ½è¦å¤ç”¨åŸæœ‰ä»£ç ï¼Œåªæ˜¯æŠŠç»“æœå¯ä»¥å¯è§†åŒ–å‡ºæ¥
================================================================================

[228] [Unknown Time]
æ”¹å¥½äº†å—ï¼Ÿ
================================================================================

[229] [Unknown Time]
æµ‹è¯•ä»£ç è¿è¡Œå®Œäº†ï¼Œé€‰æ‹©A263è¿™ä¸ªåŸå¸‚ï¼Œ11235ä¸ªboxã€‚dbscan1.06sï¼›ç½‘æ ¼æ–¹æ³• 0.12ç§’ï¼Œåˆ†å±‚èšç±» 1.19ç§’ï¼› æˆ‘è§‰å¾—éƒ½å¾ˆå¿«ã€‚ä»æ•ˆæœã€æ‰©å±•æ€§ä¸Šï¼Œåº”è¯¥é€‰æ‹©å“ªä¸€ä¸ªï¼Ÿèƒ½å¦æŠŠè¿è¡Œç»“æœè¾“å‡ºåˆ°tableï¼Œæˆ‘å¯ä»¥ç”¨qgisçœ‹ï¼Ÿæˆ‘æƒ³å¯è§†åŒ–çš„ å°±æ˜¯run_clustering_benchmarkè¿™é‡Œè¿è¡Œå®Œçš„ç»“æœ
================================================================================

[230] [Unknown Time]
ğŸ’¾ ä¿å­˜èšç±»ç»“æœåˆ°æ•°æ®åº“...

Â  Â ğŸ“Š ä¿å­˜DBSCANèšç±»ç»“æœ...

Â  Â ğŸ”² ä¿å­˜ç½‘æ ¼æ–¹æ³•ç»“æœ...



âŒ æµ‹è¯•å¤±è´¥: (psycopg.errors.NumericValueOutOfRange) value "53035_15400" is out of range for type integer

[SQL:Â 

Â  Â  Â  Â  WITH grid_density AS (

Â  Â  Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  Â  Â  floor(ST_X(ST_Centroid(geometry)) / 0.002)::int as grid_x,

Â  Â  Â  Â  Â  Â  Â  Â  floor(ST_Y(ST_Centroid(geometry)) / 0.002)::int as grid_y,

Â  Â  Â  Â  Â  Â  Â  Â  COUNT(*) as bbox_count

Â  Â  Â  Â  Â  Â  FROM clips_bbox_unifiedÂ 

Â  Â  Â  Â  Â  Â  WHERE city_id = 'A263' AND all_good = true

Â  Â  Â  Â  Â  Â  GROUP BY grid_x, grid_y

Â  Â  Â  Â  Â  Â  HAVING COUNT(*) >= 5
================================================================================

[231] [Unknown Time]
æˆ‘çœ‹äº†åˆ†æçš„ç»“æœï¼Œåˆ†å±‚å’Œdbscançš„é—®é¢˜ï¼Œå°±æ˜¯èšç±»å¤ªç²—äº†ï¼Œé‡Œé¢è¿˜æœ‰å¥½å¤šç°‡ã€‚
================================================================================

[232] [Unknown Time]
æˆ‘çœ‹äº†åˆ†æçš„ç»“æœï¼Œåˆ†å±‚å’Œdbscançš„é—®é¢˜ï¼Œå°±æ˜¯èšç±»å¤ªç²—äº†ï¼Œé‡Œé¢è¿˜æœ‰å¥½å¤šç°‡ã€‚ã€‚èƒ½å¦ç»™ä¸€ä¸ªç³»åˆ—å‚æ•°ï¼Œæˆ‘å¯ä»¥å¯¹æ¯”ç»“æœã€‚
================================================================================

[233] [Unknown Time]
æˆ‘çœ‹äº†åˆ†æçš„ç»“æœï¼Œåˆ†å±‚å’Œdbscançš„é—®é¢˜ï¼Œå°±æ˜¯èšç±»å¤ªç²—äº†ï¼Œé‡Œé¢è¿˜æœ‰å¥½å¤šç°‡ã€‚ã€‚èƒ½å¦ç»™ä¸€ä¸ªç³»åˆ—å‚æ•°ï¼Œæˆ‘å¯ä»¥å¯¹æ¯”ç»“æœã€‚ä¸è¦è¿‡å¤šåœ°ä¿®æ”¹ä»£ç ï¼Œæˆ‘è§‰å¾—å°±è°ƒæ•´ä¸€ä¸‹epså°±æƒ³ã€‚min_sampleå¯ä»¥å®šåˆ°10ï¼›
================================================================================

[234] [Unknown Time]
æˆ‘æœ¬åœ°æ²¡æ³•æµ‹ï¼Œä¸ç”¨æµ‹è¯•
================================================================================

[235] [Unknown Time]
è¿è¡ŒæˆåŠŸäº†ï¼Œä½†æ˜¯ä¸Šé¢å…ˆåŠ è½½qgis_parameter_comparisonå’Œqgis_parameter_statsï¼Œè¿™ä¿©è¡¨éƒ½æ²¡æœ‰å•Šã€‚ã€‚ ä¸ºå•¥ï¼Ÿ å…ˆå®šä½é—®é¢˜ï¼Œå…ˆä¸æ”¹ã€‚
================================================================================

[236] [Unknown Time]
è¿è¡ŒæˆåŠŸäº†ï¼Œä½†æ˜¯ä¸Šé¢å…ˆåŠ è½½qgis_parameter_comparisonå’Œqgis_parameter_statsï¼Œè¿™ä¿©è¡¨éƒ½æ²¡æœ‰å•Šã€‚æˆ‘æ€€ç–‘ä»£ç æ²¡æœ‰å­˜è¿™ä¿©è¡¨ã€‚
================================================================================

[237] [Unknown Time]
è¿è¡Œç»“æœæˆ‘çœ‹äº†ï¼Œæˆ‘è¿˜æ˜¯è§‰å¾—å³ä½¿epså¾ˆå°ï¼Œè¿˜æ˜¯æœ‰äº›è¿ç»­æœ‰bboxä¼šè¿æˆå¾ˆå¤§çš„ä¸€ä¸ªclusterï¼Œè¿™ä¸ªä¸æ˜¯æˆ‘æƒ³è¦çš„ã€‚æˆ‘è¿˜æ˜¯å¸Œæœ›clusterçš„å¤§å°æœ‰å®é™…ç‰©ç†å«ä¹‰ï¼Œä¸€èˆ¬åœ¨ä¸€ä¸ªè·¯å£å¤§å°å°±å¯ä»¥äº†ã€‚æˆ‘åœ¨æƒ³DBSCANé€‚åˆåšè¿™ä¸ªå—ï¼Ÿè¿˜æ˜¯è¯´DBSCANéœ€è¦è·Ÿç½‘æ ¼æ–¹æ³•ç»“åˆï¼Ÿ å…ˆä¸æ”¹ä»£ç ï¼Œæ·±åˆ»æ€è€ƒï¼Œç„¶åæå‡ºåˆé€‚çš„æ–¹æ³•
================================================================================

[238] [Unknown Time]
æˆ‘æ„Ÿè§‰æœ‰ä¸ªé—®é¢˜ï¼Œrun_overlap_analysisç°åœ¨å¾ˆå¤šåˆ†æç»“æœæœ‰åœ¨åˆ›å»ºpgçš„viewï¼Œè€Œä¸æ˜¯tableã€‚å¾ˆå¥‡æ€ªï¼Œè¿™ä¸ªé—®é¢˜ä¹‹å‰å·²ç»å‡ºç°è¿‡ï¼Œä¸ºä»€ä¹ˆä¼˜æƒ å‡ºç°ï¼Ÿ å¦å¤–ä»¥å‰åˆ†æç»“æœéƒ½æ˜¯åœ¨bbox_overlap_analysis_resultsï¼Œç°åœ¨ä¸æ˜¯ï¼Œç°åœ¨æ˜¯åœ¨qgis_bbox_overlap_hotspotsã€‚æˆ‘æ„Ÿè§‰å¾ˆå¥‡æ€ªã€‚å…ˆä¸æ”¹ä»£ç ï¼Œå…ˆçœ‹çœ‹æœ‰å•¥é—®é¢˜ã€‚
================================================================================

[239] [Unknown Time]
ä½ è¿™é‡Œæœ‰å¤§é—®é¢˜ï¼Œæˆ‘æ•°æ®å­˜å‚¨åœ¨bbox_overlap_analysis_resultså°±å¯ä»¥äº†å•Šï¼Œä¸ç”¨æåˆ«çš„å•¥qgisè§†å›¾å•Šã€‚
================================================================================

[240] [Unknown Time]
æˆ‘è§‰å¾—è¿è¡Œéƒ½æ²¡å•¥é—®é¢˜ï¼ŒæŒºå¥½ã€‚ æˆ‘ç°åœ¨éœ€è¦éå†æ¯ä¸€ä¸ªåŸå¸‚ï¼ŒæŠŠtop1çš„åŒºåŸŸæŒ‘é€‰å‡ºæ¥ã€‚æ˜¯ä¸æ˜¯å¢åŠ ä¸€ä¸ªè„šæœ¬å°±è¡Œï¼Ÿ
================================================================================

[241] [Unknown Time]
è¿è¡ŒæŠ¥é”™ï¼šâŒ æ‰¹é‡åˆ†æå¤±è´¥: (psycopg.errors.SyntaxError) syntax error at or near "::"

LINE 46:Â  Â  Â  Â  Â UNIQUE (city_id, analysis_time::date);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ^

[SQL:Â 

Â  Â  Â  Â  CREATE TABLE IF NOT EXISTS city_top1_hotspots (
================================================================================

[242] [Unknown Time]
æ‰€æœ‰åŸå¸‚éƒ½æŠ¥é”™äº†ï¼Œgrid_x is not definedã€‚ æˆ‘è§‰å¾—è¿™ä¸ªè„šæœ¬æ˜¯ä¸æ˜¯ç®€å•ç‚¹ã€‚ä¹Ÿä¸ç”¨ææœ€å°‘bboxçš„é™åˆ¶ï¼Œå°±ä¸€ä¸ªä¸ªåˆ†æè¿‡å»å°±è¡Œäº†ã€‚
================================================================================

[243] [Unknown Time]
ä¸ºä»€ä¹ˆåˆ†æåŸå¸‚æœ€å¤šæ˜¯50ä¸ªï¼Ÿ
================================================================================

[244] [Unknown Time]
è¿™é‡Œå®Œæˆä¸€ä¸ªåŸå¸‚çš„åˆ†æï¼Œä¼šé©¬ä¸Šå¾€è¡¨é‡Œé¢å†™å†…å®¹å—ï¼Ÿ
================================================================================

[245] [Unknown Time]
@examples/ è¿™ä¸ªç›®å½•ä¸‹çš„åˆ†æå¯ä»¥åšæˆjupyternotebookå½¢å¼çš„å—ï¼Ÿæˆ‘ç°åœ¨æœ‰ä¸€äº›é—®é¢˜ï¼Œæœ‰äº›ä»£ç ï¼Œæ¯”å¦‚åˆ†ætop1çš„æ‰€æœ‰åŸå¸‚çš„æ•°æ®ï¼Œç”¨pyæ–‡ä»¶ï¼Œæ—¶é—´ä¹…äº†ä¹Ÿä¸å¥½è·Ÿè¸ªã€‚ æœ‰æ²¡æœ‰ä¸€äº›æ¯”è¾ƒå¥½çš„å®è·µï¼Ÿ æˆ‘ç°åœ¨ä¸€æ¬¡æ€§çš„åˆ†æè„šæœ¬å¤ªå¤šäº†ã€‚éƒ½ä¸çŸ¥é“å“ªäº›æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œå“ªäº›æ˜¯è¦æŠŠåˆ†ææˆæœä¿ç•™ä¸‹æ¥çš„ã€‚ ä½ å…ˆè®²æ–¹æ¡ˆï¼Œå…ˆä¸å†™ä»£ç 
================================================================================

[246] [Unknown Time]
æ˜¯ä¸æ˜¯æœ‰ç‚¹å¤æ‚ï¼Ÿå¯ä»¥è½»é‡ä¸€äº›å—
================================================================================

[247] [Unknown Time]
å¯ä»¥
================================================================================

[248] [Unknown Time]
è¿è¡Œ@batch_top1_analysis.py æ—¶æŠ¥é”™ï¼š[1/365] å¤„ç†åŸå¸‚: A72



ğŸ¯ åˆ†æåŸå¸‚: A72

Â  Â æ‰§è¡Œå‘½ä»¤: python run_overlap_analysis.py --city A72 --top-n 1 --grid-size 0.002 --density-threshold 5

Â  Â âœ… åŸå¸‚ A72 åˆ†ææˆåŠŸ

Â  Â âš ï¸ æå– A72 ç»“æœå¤±è´¥: (psycopg.errors.UndefinedColumn) column "analysis_id" of relation "city_top1_hotspots" does not exist

LINE 3:Â  Â  Â  Â  Â (city_id, analysis_id, bbox_count, subdataset_count,...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^

[SQL:Â 

Â  Â  Â  Â  INSERT INTO city_top1_hotspotsÂ 

Â  Â  Â  Â  (city_id, analysis_id, bbox_count, subdataset_count, scene_count,Â 

Â  Â  Â  Â  Â total_overlap_area, geometry, grid_coords)

Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'city_filter') as city_id,

Â  Â  Â  Â  Â  Â  analysis_id,

Â  Â  Â  Â  Â  Â  overlap_count as bbox_count,

Â  Â  Â  Â  Â  Â  subdataset_count,

Â  Â  Â  Â  Â  Â  scene_count,

Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  geometry,

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'grid_coords') as grid_coords

Â  Â  Â  Â  FROM bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  WHERE hotspot_rank = 1

Â  Â  Â  Â  AND analysis_time::date = CURRENT_DATE

Â  Â  Â  Â  AND analysis_params::json->>'city_filter' = %(city_id)s

Â  Â  Â  Â  ORDER BY analysis_time DESC

Â  Â  Â  Â  LIMIT 1;Â  -- åªè¦æœ€æ–°çš„ä¸€æ¡

Â  Â  ]

[parameters: {'city_id': 'A72'}]

(Background on this error at: https://sqlalche.me/e/20/f405)
================================================================================

[249] [Unknown Time]
å¸®æˆ‘mergeä¸€ä¸‹cleanupçš„åˆ†æ”¯
================================================================================

[250] [Unknown Time]
è¿˜æ˜¯è¿è¡Œbatch_top1_analysis.py ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š[1/365] å¤„ç†åŸå¸‚: A72



ğŸ¯ åˆ†æåŸå¸‚: A72

Â  Â æ‰§è¡Œå‘½ä»¤: python run_overlap_analysis.py --city A72 --top-n 1 --grid-size 0.002 --density-threshold 5

Â  Â âœ… åŸå¸‚ A72 åˆ†ææˆåŠŸ

Â  Â ğŸ“‹ æºè¡¨å¯ç”¨å­—æ®µ: ['id', 'analysis_id', 'analysis_type', 'analysis_time', 'hotspot_rank', 'overlap_count', 'total_overlap_area', 'subdataset_count', 'scene_count', 'involved_subdatasets', 'involved_scenes', 'analysis_params', 'created_at', 'geometry']

Â  Â âš ï¸ æå– A72 ç»“æœå¤±è´¥: (psycopg.errors.UndefinedColumn) column "analysis_id" of relation "city_top1_hotspots" does not exist

LINE 3:Â  Â  Â  Â  Â (city_id, analysis_id, bbox_count, subdataset_count,...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^

[SQL:Â 

Â  Â  Â  Â  INSERT INTO city_top1_hotspotsÂ 

Â  Â  Â  Â  (city_id, analysis_id, bbox_count, subdataset_count, scene_count,Â 

Â  Â  Â  Â  Â total_overlap_area, geometry, grid_coords)

Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'city_filter') as city_id,

Â  Â  Â  Â  Â  Â  analysis_id as analysis_id,

Â  Â  Â  Â  Â  Â  overlap_count as bbox_count,

Â  Â  Â  Â  Â  Â  subdataset_count,

Â  Â  Â  Â  Â  Â  scene_count,

Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  geometry,

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'grid_coords') as grid_coords

Â  Â  Â  Â  FROM bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  WHERE hotspot_rank = 1

Â  Â  Â  Â  AND analysis_time::date = CURRENT_DATE

Â  Â  Â  Â  AND analysis_params::json->>'city_filter' = %(city_id)s

Â  Â  Â  Â  ORDER BY analysis_time DESC

Â  Â  Â  Â  LIMIT 1;Â  -- åªè¦æœ€æ–°çš„ä¸€æ¡

Â  Â  ]

[parameters: {'city_id': 'A72'}]

(Background on this error at: https://sqlalche.me/e/20/f405)
================================================================================

[251] [Unknown Time]
è¿˜æ˜¯æŠ¥é”™ï¼š[1/365] å¤„ç†åŸå¸‚: A72



ğŸ¯ åˆ†æåŸå¸‚: A72

Â  Â æ‰§è¡Œå‘½ä»¤: python run_overlap_analysis.py --city A72 --top-n 1 --grid-size 0.002 --density-threshold 5

Â  Â âœ… åŸå¸‚ A72 åˆ†ææˆåŠŸ

Â  Â ğŸ“‹ æºè¡¨å¯ç”¨å­—æ®µ: ['id', 'analysis_id', 'analysis_type', 'analysis_time', 'hotspot_rank', 'overlap_count', 'total_overlap_area', 'subdataset_count', 'scene_count', 'involved_subdatasets', 'involved_scenes', 'analysis_params', 'created_at', 'geometry']

Â  Â âš ï¸ æå– A72 ç»“æœå¤±è´¥: (psycopg.errors.InvalidTextRepresentation) invalid input syntax for type json

DETAIL:Â  Token "False" is invalid.

CONTEXT:Â  JSON data, line 1: ..., "density_threshold": 5, "calculate_area": False...

[SQL:Â 

Â  Â  Â  Â  INSERT INTO city_top1_hotspotsÂ 

Â  Â  Â  Â  (city_id, analysis_id, bbox_count, subdataset_count, scene_count,Â 

Â  Â  Â  Â  Â total_overlap_area, geometry, grid_coords)

Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'city_filter') as city_id,

Â  Â  Â  Â  Â  Â  analysis_id as analysis_id,

Â  Â  Â  Â  Â  Â  overlap_count as bbox_count,

Â  Â  Â  Â  Â  Â  subdataset_count,

Â  Â  Â  Â  Â  Â  scene_count,

Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  geometry,

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'grid_coords') as grid_coords

Â  Â  Â  Â  FROM bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  WHERE hotspot_rank = 1

Â  Â  Â  Â  AND analysis_time::date = CURRENT_DATE

Â  Â  Â  Â  AND analysis_params::json->>'city_filter' = %(city_id)s

Â  Â  Â  Â  ORDER BY analysis_time DESC

Â  Â  Â  Â  LIMIT 1;Â  -- åªè¦æœ€æ–°çš„ä¸€æ¡

Â  Â  ]

[parameters: {'city_id': 'A72'}]

(Background on this error at: https://sqlalche.me/e/20/9h9h)ï¼› æˆ‘å°è¯•åªè·‘ä¸€ä¸ªåŸå¸‚ï¼Œåˆ†ææ—¶æ²¡æœ‰é—®é¢˜çš„ã€‚ ä½ èƒ½å¦ä»”ç»†çœ‹ä¸€ä¸‹é—®é¢˜ï¼Œå…ˆä¸æ”¹
================================================================================

[252] [Unknown Time]
è¿˜æ˜¯æŠ¥é”™ï¼š[1/365] å¤„ç†åŸå¸‚: A72



ğŸ¯ åˆ†æåŸå¸‚: A72

   æ‰§è¡Œå‘½ä»¤: python run_overlap_analysis.py --city A72 --top-n 1 --grid-size 0.002 --density-threshold 5

   âœ… åŸå¸‚ A72 åˆ†ææˆåŠŸ

   ğŸ“‹ æºè¡¨å¯ç”¨å­—æ®µ: ['id', 'analysis_id', 'analysis_type', 'analysis_time', 'hotspot_rank', 'overlap_count', 'total_overlap_area', 'subdataset_count', 'scene_count', 'involved_subdatasets', 'involved_scenes', 'analysis_params', 'created_at', 'geometry']

   âš ï¸ æå– A72 ç»“æœå¤±è´¥: (psycopg.errors.InvalidTextRepresentation) invalid input syntax for type json

DETAIL:  Token "False" is invalid.

CONTEXT:  JSON data, line 1: ..., "density_threshold": 5, "calculate_area": False...

[SQL: 

        INSERT INTO city_top1_hotspots 

        (city_id, analysis_id, bbox_count, subdataset_count, scene_count, 

         total_overlap_area, geometry, grid_coords)

        SELECT 

            (analysis_params::json->>'city_filter') as city_id,

            analysis_id as analysis_id,

            overlap_count as bbox_count,

            subdataset_count,

            scene_count,

            total_overlap_area,

            geometry,

            (analysis_params::json->>'grid_coords') as grid_coords

        FROM bbox_overlap_analysis_results 

        WHERE hotspot_rank = 1

        AND analysis_time::date = CURRENT_DATE

        AND analysis_params::json->>'city_filter' = %(city_id)s

        ORDER BY analysis_time DESC

        LIMIT 1;  -- åªè¦æœ€æ–°çš„ä¸€æ¡

    ]

[parameters: {'city_id': 'A72'}]

(Background on this error at: https://sqlalche.me/e/20/9h9h)ï¼› æˆ‘å°è¯•åªè·‘ä¸€ä¸ªåŸå¸‚ï¼Œåˆ†ææ—¶æ²¡æœ‰é—®é¢˜çš„ã€‚ ä½ èƒ½å¦ä»”ç»†çœ‹ä¸€ä¸‹é—®é¢˜ï¼Œå…ˆä¸æ”¹
================================================================================

[253] [Unknown Time]
æˆ‘ä¸ç†è§£ä½ çš„ä¿®æ”¹ï¼Œä¸ºå•¥è¦åš{str(args.calculate_area).lower()}ï¼Ÿ å…ˆä¸æ”¹ä»£ç ï¼Œå…ˆæŠŠé—®é¢˜è®²æ¸…æ¥š
================================================================================

[254] [Unknown Time]
å¥½å¥‡æ€ªå•Šã€‚ã€‚ã€‚"calculate_area"æ˜¯å•¥æ•°æ®æ ¼å¼çš„ï¼Ÿ 
================================================================================

[255] [Unknown Time]
è¿˜æ˜¯æŠ¥é”™ï¼š[1/365] å¤„ç†åŸå¸‚: A72



ğŸ¯ åˆ†æåŸå¸‚: A72

Â  Â æ‰§è¡Œå‘½ä»¤: python run_overlap_analysis.py --city A72 --top-n 1 --grid-size 0.002 --density-threshold 5

Â  Â âœ… åŸå¸‚ A72 åˆ†ææˆåŠŸ

Â  Â ğŸ“‹ æºè¡¨å¯ç”¨å­—æ®µ: ['id', 'analysis_id', 'analysis_type', 'analysis_time', 'hotspot_rank', 'overlap_count', 'total_overlap_area', 'subdataset_count', 'scene_count', 'involved_subdatasets', 'involved_scenes', 'analysis_params', 'created_at', 'geometry']

Â  Â âš ï¸ æå– A72 ç»“æœå¤±è´¥: (psycopg.errors.InvalidTextRepresentation) invalid input syntax for type json

DETAIL:Â  Token "False" is invalid.

CONTEXT:Â  JSON data, line 1: ..., "density_threshold": 5, "calculate_area": False...

[SQL:Â 

Â  Â  Â  Â  INSERT INTO city_top1_hotspotsÂ 

Â  Â  Â  Â  (city_id, analysis_id, bbox_count, subdataset_count, scene_count,Â 

Â  Â  Â  Â  Â total_overlap_area, geometry, grid_coords)

Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'city_filter') as city_id,

Â  Â  Â  Â  Â  Â  analysis_id as analysis_id,

Â  Â  Â  Â  Â  Â  overlap_count as bbox_count,

Â  Â  Â  Â  Â  Â  subdataset_count,

Â  Â  Â  Â  Â  Â  scene_count,

Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  geometry,

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'grid_coords') as grid_coords

Â  Â  Â  Â  FROM bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  WHERE hotspot_rank = 1

Â  Â  Â  Â  AND analysis_time::date = CURRENT_DATE

Â  Â  Â  Â  AND analysis_params::json->>'city_filter' = %(city_id)s

Â  Â  Â  Â  ORDER BY analysis_time DESC

Â  Â  Â  Â  LIMIT 1;Â  -- åªè¦æœ€æ–°çš„ä¸€æ¡

Â  Â  ]

[parameters: {'city_id': 'A72'}]

(Background on this error at: https://sqlalche.me/e/20/9h9h)ã€‚ æˆ‘æœ‰å‡ ä¸ªè¦æ±‚ï¼Œä¸€ä¸ªçœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶çš„å‡ ä¸ªä¿®æ”¹ï¼Œæˆ‘è§‰å¾—æ˜¯ä¸æ˜¯æ— æ•ˆä¿®æ”¹ï¼Œå¦å¤–é…å¥—çš„testæ–‡ä»¶ä¹Ÿå¯ä»¥åˆ é™¤ï¼Œä»å¤´å¼€å§‹æ¢³ç†åº”è¯¥æ€ä¹ˆæ”¹ã€‚å…ˆä¸æ”¹ä»£ç ï¼Œå…ˆæŠŠæˆ‘çš„è¦æ±‚åˆ†ææ¸…æ¥š
================================================================================

[256] [Unknown Time]
å•ä¸ªåŸå¸‚åˆ†æå…¶å®æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚èƒ½ä¸èƒ½ä¸è¦æ”¹run_overlap_analysis.pyå•Šï¼Ÿ èƒ½ä¸èƒ½åªçœ‹batchåˆ†æè¿™ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ã€‚ä¸è¦çœ‹commit
================================================================================

[257] [Unknown Time]
å•ä¸ªåŸå¸‚åˆ†æå…¶å®æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚èƒ½ä¸èƒ½ä¸è¦æ”¹run_overlap_analysis.pyå•Šï¼Ÿ èƒ½ä¸èƒ½åªçœ‹batchåˆ†æè¿™ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ã€‚ä¸è¦çœ‹commitã€‚ æˆ‘ä¸‹ä¸ªæŠŠ@run_overlap_analysis.py å’Œbatch_top1_analysis.pyå›é€€åˆ°10æœˆ9æ—¥å‰çš„çŠ¶æ€ï¼Œç„¶åå†çœ‹ä¸€ä¸‹ï¼Ÿ
================================================================================

[258] [Unknown Time]
æˆ‘æƒ³è¦å›é€€
================================================================================

[259] [Unknown Time]
æˆ‘å¯ä»¥æ‰‹åŠ¨æ¸…é™¤æ—§æ•°æ®ï¼ˆåº”è¯¥æŒ‡çš„å°±æ˜¯æ•°æ®åº“é‡Œé¢åˆ†æåˆ›å»ºçš„è¡¨å§ï¼Ÿè¿˜æœ‰åˆ«çš„å—ï¼Ÿï¼‰æˆ‘è§‰å¾—å¯ä»¥ä¿®æ”¹ç”Ÿæˆfalseï¼Œå¦‚æœå› ä¸ºè¿™ä¸ªä¿®æ”¹éœ€æ±‚æ¸…é™¤åˆ«çš„è¡¨ï¼Œè¯·ç»™æˆ‘ä¸€ä¸ªä¸´æ—¶çš„è„šæœ¬
================================================================================

[260] [Unknown Time]
æäº¤çš„commitæœ‰ä¸­æ–‡çš„æ—¶å€™ï¼Œæäº¤æœ‰ä¹±ç ï¼Œå¤„ç†ä¸€ä¸‹ã€‚å¦å¤–æœ‰è¿™ä¸ªæŠ¥é”™ï¼šoot@82e398ebaf87:/workspace/examples/one_time# python cleanup_old_analysis_data.py --all

ğŸ¯ æ¸…ç†æ¨¡å¼: all

ğŸ” æ¨¡æ‹Ÿè¿è¡Œ: False



ğŸ§¹ æ¸…ç†bbox_overlap_analysis_resultsè¡¨ä¸­çš„æ—§æ•°æ®

============================================================

ğŸ“Š å½“å‰æ•°æ®ç»Ÿè®¡:

Â  Â æ€»è®°å½•æ•°: 364224



ğŸ“‹ æ‰€æœ‰æ•°æ®æ ·æœ¬ (å‰5æ¡):



1. Analysis ID: overlap_docker_20251009_095434

Â  Â Time: 2025-10-09 09:55:26.365479

Â  Â Params: {"analysis_type": "bbox_density", "city_filter": "A72", "grid_size": 0.002, "density_threshold": 5, ...



2. Analysis ID: overlap_docker_20251009_094423

Â  Â Time: 2025-10-09 09:45:15.768886

Â  Â Params: {"analysis_type": "bbox_density", "city_filter": "A72", "grid_size": 0.002, "density_threshold": 5, ...



3. Analysis ID: overlap_docker_20251009_094423

Â  Â Time: 2025-10-09 09:45:15.768886

Â  Â Params: {"analysis_type": "bbox_density", "city_filter": "A72", "grid_size": 0.002, "density_threshold": 5, ...



4. Analysis ID: overlap_docker_20251009_094423

Â  Â Time: 2025-10-09 09:45:15.768886

Â  Â Params: {"analysis_type": "bbox_density", "city_filter": "A72", "grid_size": 0.002, "density_threshold": 5, ...



5. Analysis ID: overlap_docker_20251009_094423

Â  Â Time: 2025-10-09 09:45:15.768886

Â  Â Params: {"analysis_type": "bbox_density", "city_filter": "A72", "grid_size": 0.002, "density_threshold": 5, ...

Traceback (most recent call last):

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

psycopg.errors.SyntaxError: syntax error at or near "AND"

LINE 5:Â  Â  Â  Â  Â  Â  Â AND (analysis_params LIKE '%False%' OR analysis_...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^



The above exception was the direct cause of the following exception:



Traceback (most recent call last):

Â  File "/workspace/examples/one_time/cleanup_old_analysis_data.py", line 181, in <module>

Â  Â  sys.exit(main())

Â  Â  Â  Â  Â  Â  Â ^^^^^^

Â  File "/workspace/examples/one_time/cleanup_old_analysis_data.py", line 164, in main

Â  Â  success = cleanup_analysis_data(mode=mode, dry_run=args.dry_run)

Â  Â  Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/workspace/examples/one_time/cleanup_old_analysis_data.py", line 101, in cleanup_analysis_data

Â  Â  bad_json_result = conn.execute(check_json_sql).fetchone()

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

Â  Â  return meth(

Â  Â  Â  Â  Â  Â ^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

Â  Â  return connection._execute_clauseelement(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

Â  Â  ret = self._execute_context(

Â  Â  Â  Â  Â  ^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context

Â  Â  return self._exec_single_context(

Â  Â  Â  Â  Â  Â ^^^^^^^^^^^^^^^^^^^^^^^^^^

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context

Â  Â  self._handle_dbapi_exception(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception

Â  Â  raise sqlalchemy_exception.with_traceback(exc_info[2]) from e

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

Â  Â  self.dialect.do_execute(

Â  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

Â  Â  cursor.execute(statement, parameters)

Â  File "/usr/local/lib/python3.11/site-packages/psycopg/cursor.py", line 97, in execute

Â  Â  raise ex.with_traceback(None)

sqlalchemy.exc.ProgrammingError: (psycopg.errors.SyntaxError) syntax error at or near "AND"

LINE 5:Â  Â  Â  Â  Â  Â  Â AND (analysis_params LIKE '%False%' OR analysis_...

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ^

[SQL:Â 

Â  Â  Â  Â  Â  Â  SELECT COUNT(*) as bad_json_count

Â  Â  Â  Â  Â  Â  FROM bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  AND (analysis_params LIKE '%%False%%' OR analysis_params LIKE '%%True%%');

Â  Â  Â  Â  ]

(Background on this error at: https://sqlalche.me/e/20/f405)
================================================================================

[261] [Unknown Time]
[137/365] å¤„ç†åŸå¸‚: A142



ğŸ¯ åˆ†æåŸå¸‚: A142

Â  Â æ‰§è¡Œå‘½ä»¤: python run_overlap_analysis.py --city A142 --top-n 1 --grid-size 0.002 --density-threshold 5

Â  Â âœ… åŸå¸‚ A142 åˆ†ææˆåŠŸ

Â  Â âš ï¸ æå– A142 ç»“æœå¤±è´¥: (psycopg.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block

[SQL:Â 

Â  Â  Â  Â  DELETE FROM city_top1_hotspotsÂ 

Â  Â  Â  Â  WHERE city_id = %(city_id)sÂ 

Â  Â  Â  Â  AND analysis_time::date = CURRENT_DATE;

Â  Â  ]

[parameters: {'city_id': 'A142'}]

(Background on this error at: https://sqlalche.me/e/20/2j85)ï¼› å…ˆåˆ†æï¼Œä¸æ”¹ä»£ç 
================================================================================

[262] [Unknown Time]
æˆ‘æ¸…é™¤äº†ï¼Œä½†æ˜¯æ²¡æ³•åˆ è¡¨ï¼Œèƒ½å¦åˆ ä¸€ä¸‹è¡¨ï¼Ÿ
================================================================================

[263] [Unknown Time]
å†å®¡è§†ä¸€ä¸‹æœ‰æ²¡æœ‰æ¸¸ç¦»åœ¨å¤–é¢çš„ä¸€äº›æ²¡ç”¨çš„è„šæœ¬
================================================================================

[264] [Unknown Time]
root@82e398ebaf87:/workspace#Â  python examples/dataset/bbox_examples/batch_top1_analysis.py

ğŸš€ æ‰¹é‡åŸå¸‚Top1çƒ­ç‚¹åˆ†æï¼ˆç®€åŒ–ç‰ˆï¼‰

==================================================

è¾“å‡ºè¡¨: city_top1_hotspots

åˆ†ææ‰€æœ‰åŸå¸‚ï¼ˆæ— é™åˆ¶ï¼‰

ğŸ“‹ åˆ›å»ºæ±‡æ€»è¡¨: city_top1_hotspots

âœ… è¡¨ city_top1_hotspots åˆ›å»ºæˆåŠŸ

ğŸ” æŸ¥æ‰¾æ‰€æœ‰åŸå¸‚...

ğŸ“Š æ‰¾åˆ° 365 ä¸ªåŸå¸‚:

city_idÂ  bbox_countÂ  good_bbox_count

Â  Â  A72Â  Â  Â  702257Â  Â  Â  Â  Â  Â 697685

Â  Â A200Â  Â  Â  646472Â  Â  Â  Â  Â  Â 643117

Â  Â A252Â  Â  Â  562988Â  Â  Â  Â  Â  Â 553979

Â  Â  Â A0Â  Â  Â  368250Â  Â  Â  Â  Â  Â 365093

Â  Â  A86Â  Â  Â  307494Â  Â  Â  Â  Â  Â 304863

Â  Â A253Â  Â  Â  267465Â  Â  Â  Â  Â  Â 264952

Â  Â A198Â  Â  Â  256672Â  Â  Â  Â  Â  Â 254478

Â  Â  A73Â  Â  Â  198320Â  Â  Â  Â  Â  Â 196433

Â  Â A214Â  Â  Â  166437Â  Â  Â  Â  Â  Â 164885

Â  Â A167Â  Â  Â  165494Â  Â  Â  Â  Â  Â 164393

... è¿˜æœ‰ 355 ä¸ªåŸå¸‚



ğŸ”„ å¼€å§‹æ‰¹é‡åˆ†æ 365 ä¸ªåŸå¸‚...

æ¯ä¸ªåŸå¸‚ä½¿ç”¨ run_overlap_analysis.py --top-n 1 è¿›è¡Œåˆ†æ



[1/365] å¤„ç†åŸå¸‚: A72



ğŸ¯ åˆ†æåŸå¸‚: A72

Â  Â æ‰§è¡Œå‘½ä»¤: python run_overlap_analysis.py --city A72 --top-n 1 --grid-size 0.002 --density-threshold 5

Â  Â âœ… åŸå¸‚ A72 åˆ†ææˆåŠŸ

Â  Â âš ï¸ æå– A72 ç»“æœå¤±è´¥: (psycopg.errors.InvalidTextRepresentation) invalid input syntax for type json

DETAIL:Â  Token "|" is invalid.

CONTEXT:Â  JSON data, line 1: ... 5, "calculate_area": false, "grid_coords": "(" |...

[SQL:Â 

Â  Â  Â  Â  INSERT INTO city_top1_hotspotsÂ 

Â  Â  Â  Â  (city_id, analysis_id, bbox_count, subdataset_count, scene_count,Â 

Â  Â  Â  Â  Â total_overlap_area, geometry, grid_coords)

Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'city_filter') as city_id,

Â  Â  Â  Â  Â  Â  analysis_id,

Â  Â  Â  Â  Â  Â  overlap_count as bbox_count,

Â  Â  Â  Â  Â  Â  subdataset_count,

Â  Â  Â  Â  Â  Â  scene_count,

Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  geometry,

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'grid_coords') as grid_coords

Â  Â  Â  Â  FROM bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  WHERE hotspot_rank = 1

Â  Â  Â  Â  AND analysis_time::date = CURRENT_DATE

Â  Â  Â  Â  AND analysis_params::json->>'city_filter' = %(city_id)s

Â  Â  Â  Â  ORDER BY analysis_time DESC

Â  Â  Â  Â  LIMIT 1;Â  -- åªè¦æœ€æ–°çš„ä¸€æ¡

Â  Â  ]

[parameters: {'city_id': 'A72'}]

(Background on this error at: https://sqlalche.me/e/20/9h9h)ï¼›è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œå…ˆä¸æ”¹ä»£ç 
================================================================================

[265] [Unknown Time]
ä¿®æ”¹å§
================================================================================

[266] [Unknown Time]
æˆ‘çœŸçš„å¿«æ— è¯­äº†ï¼Œä¸ºå•¥è€æ˜¯ä¿®ä¸å¯¹ï¼šoot@82e398ebaf87:/workspace#Â  python examples/dataset/bbox_examples/batch_top1_analysis.py

ğŸš€ æ‰¹é‡åŸå¸‚Top1çƒ­ç‚¹åˆ†æï¼ˆç®€åŒ–ç‰ˆï¼‰

==================================================

è¾“å‡ºè¡¨: city_top1_hotspots

åˆ†ææ‰€æœ‰åŸå¸‚ï¼ˆæ— é™åˆ¶ï¼‰

ğŸ“‹ åˆ›å»ºæ±‡æ€»è¡¨: city_top1_hotspots

âœ… è¡¨ city_top1_hotspots åˆ›å»ºæˆåŠŸ

ğŸ” æŸ¥æ‰¾æ‰€æœ‰åŸå¸‚...

ğŸ“Š æ‰¾åˆ° 365 ä¸ªåŸå¸‚:

city_idÂ  bbox_countÂ  good_bbox_count

Â  Â  A72Â  Â  Â  702257Â  Â  Â  Â  Â  Â 697685

Â  Â A200Â  Â  Â  646472Â  Â  Â  Â  Â  Â 643117

Â  Â A252Â  Â  Â  562988Â  Â  Â  Â  Â  Â 553979

Â  Â  Â A0Â  Â  Â  368250Â  Â  Â  Â  Â  Â 365093

Â  Â  A86Â  Â  Â  307494Â  Â  Â  Â  Â  Â 304863

Â  Â A253Â  Â  Â  267465Â  Â  Â  Â  Â  Â 264952

Â  Â A198Â  Â  Â  256672Â  Â  Â  Â  Â  Â 254478

Â  Â  A73Â  Â  Â  198320Â  Â  Â  Â  Â  Â 196433

Â  Â A214Â  Â  Â  166437Â  Â  Â  Â  Â  Â 164885

Â  Â A167Â  Â  Â  165494Â  Â  Â  Â  Â  Â 164393

... è¿˜æœ‰ 355 ä¸ªåŸå¸‚



ğŸ”„ å¼€å§‹æ‰¹é‡åˆ†æ 365 ä¸ªåŸå¸‚...

æ¯ä¸ªåŸå¸‚ä½¿ç”¨ run_overlap_analysis.py --top-n 1 è¿›è¡Œåˆ†æ



[1/365] å¤„ç†åŸå¸‚: A72



ğŸ¯ åˆ†æåŸå¸‚: A72

Â  Â æ‰§è¡Œå‘½ä»¤: python run_overlap_analysis.py --city A72 --top-n 1 --grid-size 0.002 --density-threshold 5

Â  Â âœ… åŸå¸‚ A72 åˆ†ææˆåŠŸ

Â  Â âš ï¸ æå– A72 ç»“æœå¤±è´¥: (psycopg.errors.InvalidTextRepresentation) invalid input syntax for type json

DETAIL:Â  Token "|" is invalid.

CONTEXT:Â  JSON data, line 1: ... 5, "calculate_area": false, "grid_coords": "(" |...

[SQL:Â 

Â  Â  Â  Â  INSERT INTO city_top1_hotspotsÂ 

Â  Â  Â  Â  (city_id, analysis_id, bbox_count, subdataset_count, scene_count,Â 

Â  Â  Â  Â  Â total_overlap_area, geometry, grid_coords)

Â  Â  Â  Â  SELECTÂ 

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'city_filter') as city_id,

Â  Â  Â  Â  Â  Â  analysis_id,

Â  Â  Â  Â  Â  Â  overlap_count as bbox_count,

Â  Â  Â  Â  Â  Â  subdataset_count,

Â  Â  Â  Â  Â  Â  scene_count,

Â  Â  Â  Â  Â  Â  total_overlap_area,

Â  Â  Â  Â  Â  Â  geometry,

Â  Â  Â  Â  Â  Â  (analysis_params::json->>'grid_coords') as grid_coords

Â  Â  Â  Â  FROM bbox_overlap_analysis_resultsÂ 

Â  Â  Â  Â  WHERE hotspot_rank = 1

Â  Â  Â  Â  AND analysis_time::date = CURRENT_DATE

Â  Â  Â  Â  AND analysis_params::json->>'city_filter' = %(city_id)s

Â  Â  Â  Â  ORDER BY analysis_time DESC

Â  Â  Â  Â  LIMIT 1;Â  -- åªè¦æœ€æ–°çš„ä¸€æ¡

Â  Â  ]

[parameters: {'city_id': 'A72'}]

(Background on this error at: https://sqlalche.me/e/20/9h9h)



root@82e398ebaf87:/workspace#Â  python examples/dataset/bbox_examples/run_overlap_analysis.py --city A72 --top-n 1

ğŸ¯ Dockerå…¼å®¹çš„BBoxå ç½®åˆ†æ

==================================================

ğŸ”§ è„šæœ¬ä½ç½®: /workspace/examples/dataset/bbox_examples/run_overlap_analysis.py

ğŸ”§ é¡¹ç›®æ ¹ç›®å½•: /workspace/examples

ğŸ”§ Pythonè·¯å¾„:

Â  Â 0: /workspace

Â  Â 1: /workspace/examples/src

Â  Â 2: /workspace/examples

Â  Â 3: /workspace/examples/dataset/bbox_examples

Â  Â 4: /workspace/src

âœ… å¯¼å…¥æ–¹å¼: ç›´æ¥å¯¼å…¥ spdatalab



ğŸš€ ç¯å¢ƒè®¾ç½®æˆåŠŸï¼Œå¼€å§‹å¯¼å…¥æ¨¡å—...

âœ… æ‰€æœ‰æ¨¡å—å¯¼å…¥æˆåŠŸ



ğŸ“‹ åˆ†æå‚æ•°:

Â  Â åŸå¸‚è¿‡æ»¤: A72

Â  Â è¿”å›æ•°é‡: 1 ä¸ªçƒ­ç‚¹

Â  Â å¼ºåˆ¶åˆ·æ–°è§†å›¾: False

Â  Â ğŸ”¥ ç½‘æ ¼åŒ–åˆ†æ: å·²å¯ç”¨ï¼ˆé»˜è®¤ï¼‰

Â  Â ğŸ“ ç½‘æ ¼å¤§å°: 0.002Â° Ã— 0.002Â° (çº¦200mÃ—200m)

Â  Â ğŸ“Š å¯†åº¦é˜ˆå€¼: 5 bbox/ç½‘æ ¼

Â  Â ğŸ¯ åˆ†ææ¨¡å¼: å¿«é€Ÿç›¸äº¤æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰



ğŸ”Œ è¿æ¥æ•°æ®åº“...

âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ



ğŸ“Š æ£€æŸ¥bboxåˆ†è¡¨...

âœ… å‘ç° 292 ä¸ªbboxåˆ†è¡¨



ğŸ” æ£€æŸ¥ç»Ÿä¸€è§†å›¾...

âœ… ç»Ÿä¸€è§†å›¾å·²å­˜åœ¨

ğŸ“Š ç»Ÿä¸€è§†å›¾åŒ…å« 7,575,312 æ¡bboxè®°å½•



ğŸ› ï¸ å‡†å¤‡åˆ†æè¡¨...

âœ… åˆ†æè¡¨å·²å­˜åœ¨



ğŸš€ å¼€å§‹å ç½®åˆ†æ: overlap_docker_20251009_111956

ğŸ™ï¸ åŸå¸‚è¿‡æ»¤: A72

ğŸ”¥ ä½¿ç”¨ç½‘æ ¼åŒ–åˆ†æï¼Œé¿å…è¿é”èšåˆé—®é¢˜...

ğŸ“ åŸå¸‚èŒƒå›´: 4.6423Â° Ã— 1.0875Â°

ğŸ“¦ bboxæ•°é‡: 697,685 ä¸ª

ğŸ“Š ç½‘æ ¼å¤§å°: 0.002Â° Ã— 0.002Â° (çº¦200mÃ—200m)

ğŸ¯ åˆ†ææ–¹æ³•: bboxå¯†åº¦åˆ†æ

âš¡ æ‰§è¡Œbboxå¯†åº¦åˆ†æSQL...

ğŸ’¡ å¯ä»¥ä½¿ç”¨ Ctrl+C å®‰å…¨é€€å‡º

ğŸš€ å¼€å§‹æ‰§è¡ŒSQL... (11:20:48)

âœ… SQLæ‰§è¡Œå®Œæˆï¼Œè€—æ—¶: 29.04ç§’

âœ… æäº¤å®Œæˆï¼Œè€—æ—¶: 0.01ç§’

ğŸ” æ­£åœ¨ç»Ÿè®¡ç»“æœ...

âœ… bboxå¯†åº¦åˆ†æå®Œæˆï¼Œè¿”å› 1 ä¸ªå¯†åº¦çƒ­ç‚¹

â±ï¸ æ€»è€—æ—¶: 29.05ç§’ (SQL: 29.04s + æäº¤: 0.01s)

ğŸ“Š è¦†ç›–åº¦: 1/58001 ä¸ªçƒ­ç‚¹ (0.0%)

ğŸ“ˆ å¯†åº¦ç»Ÿè®¡: æœ€é«˜3047, å¹³å‡53.86

ğŸ’¡ è¿˜æœ‰ 58000 ä¸ªå¯†åº¦è¾ƒä½çš„çƒ­ç‚¹æœªæ˜¾ç¤º

ğŸ“Š å¤„ç†é€Ÿåº¦: 24,023 bbox/ç§’



ğŸ“Š TOP 5 é‡å çƒ­ç‚¹:

Â hotspot_rankÂ  overlap_countÂ  total_overlap_areaÂ  subdataset_countÂ  scene_count

Â  Â  Â  Â  Â  Â  1Â  Â  Â  Â  Â  Â 3047Â  Â  Â  Â  Â  Â  Â  3047.0Â  Â  Â  Â  Â  Â  Â  Â  34Â  Â  Â  Â  Â 1962

âœ… åˆ†æç»“æœå·²ä¿å­˜åˆ°è¡¨: bbox_overlap_analysis_results



ğŸ¯ QGISå¯è§†åŒ–æŒ‡å¯¼

========================================

ğŸ“‹ æ•°æ®åº“è¿æ¥ä¿¡æ¯:

Â  Â host: local_pg

Â  Â port: 5432

Â  Â database: postgres

Â  Â username: postgres



ğŸ“Š æ¨èåŠ è½½çš„å›¾å±‚:

Â  Â 1. clips_bbox_unified - æ‰€æœ‰bboxæ•°æ®ï¼ˆåº•å›¾ï¼‰

Â  Â 2. bbox_overlap_analysis_results - é‡å çƒ­ç‚¹åŒºåŸŸ



ğŸ¨ å¯è§†åŒ–å»ºè®®:

Â  Â â€¢ ä¸»é”®: id

Â  Â â€¢ å‡ ä½•åˆ—: geometry

Â  Â â€¢ æŒ‰ overlap_count å­—æ®µè®¾ç½®é¢œè‰²ï¼ˆæ•°å€¼è¶Šå¤§è¶Šçƒ­ï¼‰

Â  Â â€¢ æ˜¾ç¤º overlap_count æ ‡ç­¾

Â  Â â€¢ ä½¿ç”¨ analysis_id = 'overlap_docker_20251009_111956' è¿‡æ»¤å½“å‰åˆ†æç»“æœ



ğŸ”¥ bboxå¯†åº¦åˆ†æç‰¹åˆ«æç¤º:

Â  Â â€¢ æ¯ä¸ªçƒ­ç‚¹æ˜¯ 0.002Â° Ã— 0.002Â° çš„ç½‘æ ¼ (çº¦200mÃ—200m)

Â  Â â€¢ overlap_count = è¯¥ç½‘æ ¼å†…çš„bboxæ•°é‡ï¼ˆå¯†åº¦ï¼‰

Â  Â â€¢ å¯†åº¦é˜ˆå€¼: >= 5 bbox/ç½‘æ ¼

Â  Â â€¢ è¿”å›ç­–ç•¥: å›ºå®šæ•°é‡å‰1ä¸ªæœ€å¯†é›†ç½‘æ ¼

Â  Â â€¢ ğŸ¯ è¿™æ˜¯å¯†åº¦åˆ†æï¼Œä¸æ˜¯ä¼ ç»Ÿé‡å åˆ†æ

Â  Â â€¢ å»ºè®®ä½¿ç”¨å¡«å……æ ·å¼ + é€æ˜åº¦ 70%

Â  Â â€¢ å¯ä»¥å åŠ åŸå§‹bboxæ•°æ®å¯¹æ¯”æŸ¥çœ‹



âœ… åˆ†æå®Œæˆï¼åˆ†æID: overlap_docker_20251009_111956
================================================================================

[267] [Unknown Time]
è¿è¡Œokäº†ï¼Œä½†æ˜¯æ¯ä¸€ä¸ªåŸå¸‚top-n 1 çš„ç»“æœï¼Œæ¯ä¸ªåŸå¸‚åªä¿ç•™1ç»™gridã€‚ è¿™ä¸ªéš¾é“ä¸æ˜¯1%çš„æ„æ€å—ï¼Ÿ
================================================================================

[268] [Unknown Time]
æˆ‘æƒ³è¦batchåˆ†æé‡Œé¢ï¼Œåˆ†ætop percentï¼Œè€Œä¸æ˜¯topnï¼› 
================================================================================

[269] [Unknown Time]
æˆ‘ç”¨vscodeçš„ attach to containerè¿æ¥åˆ°workspaceçš„å®¹å™¨ï¼Œæˆ‘æƒ³è¿è¡Œé‡Œé¢çš„jupyternotebookï¼Œä½†æ˜¯æ˜¾ç¤ºéœ€è¦select kernelã€‚ æˆ‘å»ºè®®ä½ çœ‹ä¸€ä¸‹ @docker-compose.yml @Dockerfile   çœ‹ä¸€ä¸‹workspaceå¯¹åº”çš„é•œåƒæ˜¯ä»€ä¹ˆæ ·çš„ã€‚ ä¹Ÿä¸ç›´æ¥æ”¹ï¼Œå…ˆç»™æˆ‘æ–¹æ¡ˆ
================================================================================

[270] [Unknown Time]
èƒ½å¦åˆ›å»ºä¸€ä¸ªpythonçš„è™šæ‹Ÿç¯å¢ƒç”¨äºè°ƒè¯•
================================================================================

[271] [Unknown Time]
ç»§ç»­
================================================================================

[272] [Unknown Time]
windowsä¸­å®‰è£…codex
================================================================================

[273] [Unknown Time]
å…·ä½“æŠŠvenvç¯å¢ƒæ”¹æˆ3.12*å—
================================================================================

[274] [Unknown Time]
è¿™æ¬¡è·‘ä¸èµ·æ¥ä¸æ˜¯é¡¹ç›®ä»£ç æŠ¥é”™ï¼Œè€Œæ˜¯ Python 3.13.2 ä¸ pytest 8.4.2 çš„å·²çŸ¥å…¼å®¹æ€§é—®é¢˜ã€‚pytest åœ¨é€€å‡ºæ—¶è¦æŠŠæ•è·åˆ°çš„ stdout/stderr ä»ä¸´æ—¶æ–‡ä»¶é‡Œè¯»å›ï¼Œä½† 3.13 çš„å®ç°ä¼šæå‰æŠŠé‚£ä¸ªä¸´æ—¶æ–‡ä»¶å…³æ‰ï¼Œpytest å†å» seek() å°±æŠ›å‡º ValueError: I/O operation on closed fileï¼Œå› æ­¤æ ¹æœ¬æ²¡è¿›å…¥ç”¨ä¾‹æ”¶é›†é˜¶æ®µã€‚

å¯é€‰çš„åº”å¯¹æ–¹å¼ï¼š

ä¸´æ—¶åˆ‡å› Python 3.12.xï¼ˆæˆ–å›¢é˜Ÿå½“å‰ç¨³å®šç‰ˆæœ¬ï¼‰ï¼›
å…³æ³¨ pytest åç»­ä¿®å¤ï¼ˆ8.4.x ä¹‹åçš„ç‰ˆæœ¬å¾ˆå¯èƒ½ä¼šä¿®ï¼‰ï¼›
å¦‚æœåªæ˜¯çŸ­æœŸéªŒè¯ï¼Œå¯å…ˆåŠ ä¸Š PYTEST_ADDOPTS=--capture=no æˆ–å‘½ä»¤è¡Œ pytest --capture=noï¼Œè®© pytest ä¸ä½¿ç”¨æœ‰é—®é¢˜çš„æ•è·é€»è¾‘ã€‚
ä¸€æ—¦ç¯å¢ƒå‡çº§æˆ–åˆ‡æ¢å›å…¼å®¹ç»„åˆï¼Œæµ‹è¯•å°±èƒ½æ¢å¤æ­£å¸¸æ‰§è¡Œã€‚
================================================================================

[275] [Unknown Time]
ä¸ç”¨å‡†å¤‡æ–‡æ¡£ï¼Œç›´æ¥æ”¹å°±è¡Œ
================================================================================

[276] [Unknown Time]
è¯·å¸®æˆ‘å¤„ç†
================================================================================

[277] [Unknown Time]
.\venv\Scripts\python.exe -m pytest --collect-only âœ still hits ValueError: I/O operation on closed file from pytestâ€™s capture module (same Windows/tmpfile issue; no tests executed).ï¼› è¿™ä¸ªæ€ä¹ˆè§£å†³
================================================================================

[278] [Unknown Time]
æˆ‘è¿™é‡Œæ˜¯pushæˆåŠŸäº†å—ï¼Ÿè¿œç«¯æ˜¯å¦æœ‰è¿™ä¸ªåˆ†æ”¯ï¼Ÿ
================================================================================

[279] [Unknown Time]
ä¸ºä»€ä¹ˆæˆ‘è¿œç«¯æ²¡æœ‰çœ‹åˆ°ï¼Ÿ
================================================================================

[280] [Unknown Time]
è¿œç«¯å¥½åƒæ²¡æœ‰è¿™ä¸ªåˆ†æ”¯feature/analysis-workflow-refactor
================================================================================

